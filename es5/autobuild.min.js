
System.register("/app/awy/admin/admin.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/admin.js";var Awy_Admin_Admin;return{setters:[],execute:function(){Awy_Admin_Admin=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_Admin(){$traceurRuntime.superConstructor(Awy_Admin_Admin).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_Admin,{onBeforeBootstrap:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var config,defTheme,layout;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:defTheme=config.get('modules/awy_admin/theme');$ctx.state=8;break;case 8:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(6),$ctx.errback);return;case 6:layout=$ctx.value;$ctx.state=5;break;case 5:layout.defaultTheme=defTheme||'awy_admin_defaultTheme';layout.defaultViewClass='awy_admin_view_default';$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),bootstrap:function(){console.log('Awy_Admin_Admin.bootstrap exec');}},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Admin_Admin);}};});
System.register("/app/awy/admin/controller.js",["awy/core/controller/abstract.js"],function($__export){"use strict";var __moduleName="/app/awy/admin/controller.js";var Awy_Core_Controller_Abstract,Awy_Admin_Controller;return{setters:[function($__m){Awy_Core_Controller_Abstract=$__m.default;}],execute:function(){Awy_Admin_Controller=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_Controller(){$traceurRuntime.superConstructor(Awy_Admin_Controller).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_Controller,{action_index:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var db,authData;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Admin_Controller.action_index');$ctx.state=13;break;case 13:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(db._connection===null)?4:5;break;case 4:Promise.resolve(db.connect()).then($ctx.createCallback(5),$ctx.errback);return;case 5:authData=db._connection.getAuth();$ctx.state=15;break;case 15:$ctx.state=(authData)?7:9;break;case 7:Promise.resolve(this.layout("/")).then($ctx.createCallback(-2),$ctx.errback);return;case 9:Promise.resolve(this.layout("/login")).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_migrate:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Admin_Controller.action_migrate');$ctx.state=4;break;case 4:Promise.resolve(this.layout('/migrate')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_password_recover:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(this.layout("/password/recover")).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onAfterDispatch:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var admin;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve($traceurRuntime.superGet(this,Awy_Admin_Controller.prototype,"onAfterDispatch").call(this)).then($ctx.createCallback(2),$ctx.errback);return;case 2:Promise.resolve(Class.i('awy_admin_model_user')).then($ctx.createCallback(5),$ctx.errback);return;case 5:admin=$ctx.value;$ctx.state=4;break;case 4:console.log("ADMIN USER: ",admin);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Controller_Abstract);$__export('default',Awy_Admin_Controller);}};});
System.register("/app/awy/admin/layout.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/layout.js";var layout;return{setters:[],execute:function(){layout={base:[{root:'root'},{hook:'header',views:'admin/header'},{hook:'site_main',views:'admin/nav'},{view:'head',do:[['css','css/normalize.css@awy_core','css/skeleton.css@awy_core'],['css','css/admin.css@awy_admin']]},{view:'admin/nav',do:[['addNav',{dashboard:{label:'Dashboard',href:'/',pos:10,icon_class:'icon-dashboard'}}],['addNav',{system:{label:'System',pos:900,icon_class:'icon-cog'}}],['addNav',{system:{users:{label:'Users',href:'/users'}}}],['addNav',{modules:{label:'Modules',pos:800}}]]}],"/":[{include:'base'},{hook:'main',views:'dashboard'}],"/login":[{include:'base'},{root:'baseroot'},{hook:'main',views:'login'}],"/password/recover":[{include:'base'},{root:'baseroot'},{hook:'main',views:'password/recover'}],"/migrate":[{include:'base'},{root:'baseroot'},{hook:'main',views:'migrate'}]};$__export('default',layout);}};});
System.register("/app/awy/admin/main.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/main.js";var Awy_Admin_Main;return{setters:[],execute:function(){Awy_Admin_Main=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_Main(){$traceurRuntime.superConstructor(Awy_Admin_Main).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_Main,{bootstrap:function(){console.log('Awy_Admin_Main.bootstrap exec');}},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Admin_Main);}};});
System.register("/app/awy/admin/manifest.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/manifest.js";var config;return{setters:[],execute:function(){config={module_name:'awy_admin',version:'0.0.0.1',description:"Base Admin functionality",require:{module:{awy_core:'0.0.0.1'}},areas:{awy_admin:{views:{root:{},baseroot:{},dashboard:{view_class:'awy_admin_view_default'},"admin/header":{},"admin/nav":{view_class:'awy_admin_view_nav'},login:{view_class:'awy_admin_view_login'},"password/recover":{view_class:'awy_admin_view_password'},migrate:{view_class:'awy_admin_view_migrate'}},routing:[['/admin/migrate','awy_admin_controller.migrate'],['/admin','awy_admin_controller.index'],['/admin/logout','awy_admin_controller.logout'],['/admin/password/recover','awy_admin_controller.password_recover']],auto_use:['bootstrap'],before_bootstrap:{callback:"awy_admin_admin.onBeforeBootstrap"}}},themes:{awy_admin_defaultTheme:{name:'awy_admin_defaultTheme',layout_before:'layout.js',area:'awy_admin'}},default_config:{modules:{awy_admin:{theme:'awy_admin_defaultTheme',default_locale:'en_US'}}}};$__export('default',config);}};});
System.register("/app/awy/admin/migrate.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/migrate.js";var Awy_Admin_Migrate;return{setters:[],execute:function(){Awy_Admin_Migrate=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_Migrate(){$traceurRuntime.superConstructor(Awy_Admin_Migrate).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_Migrate,{install:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var rules;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:rules={"rules":{"admin_user":{".read":false,".write":false},"admin_role":{".read":false,".write":false}}};$ctx.state=5;break;case 5:$ctx.returnValue=rules;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),upgrade:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('admin upgrade');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),downgrade:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('admin downgrade');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Admin_Migrate);}};});
System.register("/app/awy/admin/model/user.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/model/user.js";var AdminUser_Model;return{setters:[],execute:function(){AdminUser_Model=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function AdminUser_Model(){$traceurRuntime.superConstructor(AdminUser_Model).call(this);this.logger=Class.i('awy_core_model_logger','AdminUser_Model');}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[AdminUser_Model,{createUser:$traceurRuntime.initTailRecursiveFunction(function(email,password){return $traceurRuntime.call(function(email,password){var db;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(db._connection===null)?4:5;break;case 4:Promise.resolve(db.connect()).then($ctx.createCallback(5),$ctx.errback);return;case 5:$ctx.returnValue=new Promise(function(resolve,reject){db._connection.createUser({email:email,password:password},function(error,userData){if(error){reject(error);}else{resolve(userData);}});});$ctx.state=8;break;case 8:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),create:$traceurRuntime.initTailRecursiveFunction(function(data){return $traceurRuntime.call(function(data){var db,auth,userData,$__3,$__4,$__5,$__6,$__7;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(db._connection===null)?4:5;break;case 4:Promise.resolve(db.connect()).then($ctx.createCallback(5),$ctx.errback);return;case 5:Promise.resolve(db.sudo()).then($ctx.createCallback(9),$ctx.errback);return;case 9:auth=$ctx.value;$ctx.state=8;break;case 8:Promise.resolve(this.createUser(data.email,data.password)).then($ctx.createCallback(12),$ctx.errback);return;case 12:userData=$ctx.value;$ctx.state=11;break;case 11:delete data.email;delete data.password;$ctx.state=25;break;case 25:Promise.resolve(db.rput(data,'admin_user/'+userData.uid)).then($ctx.createCallback(14),$ctx.errback);return;case 14:Promise.resolve(db.rput(true,'admin_role/superadmin/members/'+userData.uid)).then($ctx.createCallback(16),$ctx.errback);return;case 16:$__3=this.logger;$ctx.state=21;break;case 21:Promise.resolve($__3).then($ctx.createCallback(19),$ctx.errback);return;case 19:$__4=$ctx.value;$ctx.state=18;break;case 18:$__5=$__4.debug;$__6=userData.uid;$__7=$__5.call($__4,"Successfully created Admin user account with uid:",$__6);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),auth:$traceurRuntime.initTailRecursiveFunction(function(email,password){return $traceurRuntime.call(function(email,password){var db;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(db._connection===null)?4:5;break;case 4:Promise.resolve(db.connect()).then($ctx.createCallback(5),$ctx.errback);return;case 5:$ctx.returnValue=new Promise(function(resolve,reject){db._connection.authWithPassword({email:email,password:password},function(error,authData){if(error){reject(error);}else{resolve(authData);}});});$ctx.state=8;break;case 8:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),logout:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var db;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(db._connection===null)?4:5;break;case 4:Promise.resolve(db.connect()).then($ctx.createCallback(5),$ctx.errback);return;case 5:db._connection.unauth();$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),resetPassword:$traceurRuntime.initTailRecursiveFunction(function(email){return $traceurRuntime.call(function(email){var db;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(db._connection===null)?4:5;break;case 4:Promise.resolve(db.connect()).then($ctx.createCallback(5),$ctx.errback);return;case 5:$ctx.returnValue=new Promise(function(resolve,reject){db._connection.resetPassword({email:email},function(error){if(error){reject(error);}else{resolve(true);}});});$ctx.state=8;break;case 8:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',AdminUser_Model);}};});
System.register("/app/awy/admin/view/admin/header.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/view/admin/header.js";return{setters:[],execute:function(){}};});
System.register("/app/awy/admin/view/default.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/admin/view/default.js";var Awy_Core_Model_View,Awy_Admin_View_Default;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Admin_View_Default=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_View_Default(params){$traceurRuntime.superConstructor(Awy_Admin_View_Default).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_View_Default,{logout:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var admin,config,r;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_admin_model_user')).then($ctx.createCallback(3),$ctx.errback);return;case 3:admin=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(6),$ctx.errback);return;case 6:config=$ctx.value;$ctx.state=5;break;case 5:config.add({db:{key:null}},true);config.writeStorage('db');$ctx.state=13;break;case 13:Promise.resolve(admin.logout()).then($ctx.createCallback(8),$ctx.errback);return;case 8:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(11),$ctx.errback);return;case 11:r=$ctx.value;$ctx.state=10;break;case 10:r.refresh('/admin');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Admin_View_Default);}};});
System.register("/app/awy/admin/view/login.js",["awy/admin/view/default.js"],function($__export){"use strict";var __moduleName="/app/awy/admin/view/login.js";var Awy_Admin_View_Default,Awy_Admin_View_Login;return{setters:[function($__m){Awy_Admin_View_Default=$__m.default;}],execute:function(){Awy_Admin_View_Login=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_View_Login(params){$traceurRuntime.superConstructor(Awy_Admin_View_Login).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_View_Login,{signIn:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var emailEl,passwordEl,loginEmail,db,admin,authData,config,r,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:this.set('spin','<i class="fa fa-spinner fa-pulse"></i>');emailEl=document.querySelector("input[name=email]");passwordEl=document.querySelector("input[name=password]");emailEl.parentElement.classList.remove("has-errors");passwordEl.parentElement.classList.remove("has-errors");this.set('errors',null);$ctx.state=51;break;case 51:$ctx.state=(!this.get('email')||!this.get('password'))?4:3;break;case 4:this.set('errors','<li><i class="fa-li fa fa-close"></i>Please submit all required fields!</li>');if(!this.get('email')){emailEl.parentElement.classList.add("has-errors");}
if(!this.get('password')){passwordEl.parentElement.classList.add("has-errors");}
this.set('spin','');$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:loginEmail=this.get('email');$ctx.state=53;break;case 53:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(9),$ctx.errback);return;case 9:db=$ctx.value;$ctx.state=8;break;case 8:Promise.resolve(Class.i('awy_admin_model_user')).then($ctx.createCallback(12),$ctx.errback);return;case 12:admin=$ctx.value;$ctx.state=11;break;case 11:$ctx.pushTry(43,null);$ctx.state=46;break;case 46:Promise.resolve(admin.auth(loginEmail,this.get('password'))).then($ctx.createCallback(15),$ctx.errback);return;case 15:authData=$ctx.value;$ctx.state=14;break;case 14:db._config['key']=authData.token;$ctx.state=23;break;case 23:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(18),$ctx.errback);return;case 18:config=$ctx.value;$ctx.state=17;break;case 17:config.writeLocalStorage('db',db._config);$ctx.state=25;break;case 25:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(21),$ctx.errback);return;case 21:r=$ctx.value;$ctx.state=20;break;case 20:this.set('spin','');r.refresh('/admin');$ctx.state=27;break;case 27:$ctx.popTry();$ctx.state=-2;break;case 43:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=39;break;case 39:this.set('errors','<li><i class="fa-li fa fa-close"></i>'+e.message+'</li>');$ctx.state=40;break;case 40:switch(e.code){case"INVALID_PASSWORD":$ctx.state=30;break;default:$ctx.state=34;break;}
break;case 30:passwordEl.parentElement.classList.add("has-errors");$ctx.state=33;break;case 34:emailEl.parentElement.classList.add("has-errors");$ctx.state=33;break;case 33:this.set('spin','');$ctx.state=42;break;case 42:$ctx.returnValue=false;$ctx.state=37;break;case 37:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),forgotPassword:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var r;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(3),$ctx.errback);return;case 3:r=$ctx.value;$ctx.state=2;break;case 2:r.navigate('admin/password/recover');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Admin_View_Default);$__export('default',Awy_Admin_View_Login);}};});
System.register("/app/awy/admin/view/migrate.js",["awy/admin/view/default.js"],function($__export){"use strict";var __moduleName="/app/awy/admin/view/migrate.js";var Awy_Admin_View_Default,Migrate_View;return{setters:[function($__m){Awy_Admin_View_Default=$__m.default;}],execute:function(){Migrate_View=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Migrate_View(params){$traceurRuntime.superConstructor(Migrate_View).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Migrate_View,{execute:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var keyEl,config,migri,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:keyEl=document.querySelector("input[name=key]");keyEl.parentElement.classList.remove("has-errors");this.set('errors',null);$ctx.state=28;break;case 28:$ctx.state=(!this.get('db_key'))?4:3;break;case 4:this.set('errors','<li><i class="fa-li fa fa-close"></i>Please submit Security Key!</li>');keyEl.parentElement.classList.add("has-errors");$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(9),$ctx.errback);return;case 9:config=$ctx.value;$ctx.state=8;break;case 8:config.add({db:{key:this.get('db_key')}},false);$ctx.state=30;break;case 30:$ctx.pushTry(20,null);$ctx.state=23;break;case 23:Promise.resolve(Class.i('awy_core_model_migrate')).then($ctx.createCallback(12),$ctx.errback);return;case 12:migri=$ctx.value;$ctx.state=11;break;case 11:Promise.resolve(migri.migrateModules(true)).then($ctx.createCallback(14),$ctx.errback);return;case 14:$ctx.popTry();$ctx.state=-2;break;case 20:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=18;break;case 18:this.set('errors','<li><i class="fa-li fa fa-close"></i>'+e+'</li>');$ctx.state=19;break;case 19:$ctx.returnValue=false;$ctx.state=16;break;case 16:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Admin_View_Default);$__export('default',Migrate_View);}};});
System.register("/app/awy/admin/view/nav.js",["awy/admin/view/default.js"],function($__export){"use strict";var __moduleName="/app/awy/admin/view/nav.js";var Awy_Admin_View_Default,Nav_View;return{setters:[function($__m){Awy_Admin_View_Default=$__m.default;}],execute:function(){Nav_View=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Nav_View(params){$traceurRuntime.superConstructor(Nav_View).call(this);this._params=params;this.set('tree',{});this.set('curNav',null);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Nav_View,{render_nav:function(ref){var html=arguments[1]!==(void 0)?arguments[1]:'';html+='<ul>';for(var c in ref){var node=ref[c];if((typeof node==='undefined'?'undefined':$traceurRuntime.typeof(node))==='object'){var hasChildren=this.hasObjects(node);html+='<li><a title="'+node.label+'" href="'+(node.href||'#')+'"><i class="'+node.icon_class+'"></i><span>'+node.label+'</span>';if(hasChildren){html+='<i class="icon-angle-down angle-down"></i>';}
html+='</a>';if(hasChildren){html=this.render_nav(node,html);}else{html+='</li>';}}}
html+='</ul>';return html;},addNav:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('addNav merge',JSON.parse(JSON.stringify(this.get('tree'))),args[0]);this.objectMerge(this.get('tree'),args[0]);$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),removeNav:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){var root,path,key,parent,$__11,$__12,$__13,$__14,i;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:root=this.get('tree');path=args[0].split('/');$ctx.state=17;break;case 17:$__11=[];$__12=path;for($__13 in $__12)
$__11.push($__13);$ctx.state=12;break;case 12:$__14=0;$ctx.state=10;break;case 10:$ctx.state=($__14<$__11.length)?4:8;break;case 7:$__14++;$ctx.state=10;break;case 4:i=$__11[$__14];$ctx.state=5;break;case 5:$ctx.state=(!(i in $__12))?7:2;break;case 2:key=path[i];parent=root;root=root[key];$ctx.state=7;break;case 8:delete parent[key];$ctx.state=19;break;case 19:$ctx.returnValue=this;$ctx.state=14;break;case 14:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),objectMerge:function(){for(var rest=[],$__10=0;$__10<arguments.length;$__10++)
rest[$__10]=arguments[$__10];var base=rest.shift();var $__6=true;var $__7=false;var $__8=undefined;try{for(var $__4=void 0,$__3=(rest)[Symbol.iterator]();!($__6=($__4=$__3.next()).done);$__6=true){var append=$__4.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
var key=void 0;for(key in append){if(key in base){base[key]=this.objectMerge(base[key],append[key]);}else{Object.assign(base,append);}}}}}catch($__9){$__7=true;$__8=$__9;}finally{try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}}
return base;}},{},$__super]);},this,arguments);})(Awy_Admin_View_Default);$__export('default',Nav_View);}};});
System.register("/app/awy/admin/view/password.js",["awy/admin/view/default.js"],function($__export){"use strict";var __moduleName="/app/awy/admin/view/password.js";var Awy_Admin_View_Default,Awy_Admin_View_Password;return{setters:[function($__m){Awy_Admin_View_Default=$__m.default;}],execute:function(){Awy_Admin_View_Password=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Admin_View_Password(params){$traceurRuntime.superConstructor(Awy_Admin_View_Password).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Admin_View_Password,{resetPassword:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var emailEl,admin,r,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:emailEl=document.querySelector("input[name=email]");emailEl.parentElement.classList.remove("has-errors");this.set('errors',null);$ctx.state=32;break;case 32:$ctx.state=(!this.get('email'))?4:3;break;case 4:this.set('errors','<li><i class="fa-li fa fa-close"></i>Please submit all required fields!</li>');emailEl.parentElement.classList.add("has-errors");$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.pushTry(24,null);$ctx.state=27;break;case 27:Promise.resolve(Class.i('awy_admin_model_user')).then($ctx.createCallback(9),$ctx.errback);return;case 9:admin=$ctx.value;$ctx.state=8;break;case 8:Promise.resolve(admin.resetPassword(this.get('email'))).then($ctx.createCallback(11),$ctx.errback);return;case 11:alert('Password reset email sent successfully!');$ctx.state=16;break;case 16:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(14),$ctx.errback);return;case 14:r=$ctx.value;$ctx.state=13;break;case 13:r.navigate('admin');$ctx.state=18;break;case 18:$ctx.popTry();$ctx.state=-2;break;case 24:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=22;break;case 22:this.set('errors','<li><i class="fa-li fa fa-close"></i>'+e+'</li>');$ctx.state=23;break;case 23:$ctx.returnValue=false;$ctx.state=20;break;case 20:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),back:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:history.back();$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Admin_View_Default);$__export('default',Awy_Admin_View_Password);}};});
System.register("/app/awy/admin/views/admin/header.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/admin/header.js";var str;return{setters:[],execute:function(){str="\n<nav>\n    <a href=\"javascript:void(0);\" class=\"toggle-nav button pull-left\">\n      <i class=\"fa fa-bars\"></i>\n    </a>\n    <a href=\"javascript:void(0);\" class=\"navbar-brand\">\n      <span class=\"logo\">Distro</span>\n    </a>\n    <ul class=\"nav u-pull-right\">\n        <li>\n            <a href=\"javascript:void(0);\" data-bind=\"click logout\" class=\"button u-pull-right\">Logout</a>\n        </li>\n    </ul>\n</nav>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/admin/nav.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/admin/nav.js";var str;return{setters:[],execute:function(){str="\n<nav class=\"admin-nav\" id=\"main-nav\">\n  <div class=\"navigation\" data-render=\"nav tree\"></div>\n</div>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/baseroot.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/baseroot.js";var str;return{setters:[],execute:function(){str="\n<div class=\"container\" data-hook=\"main\"></div>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/dashboard.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/dashboard.js";var str;return{setters:[],execute:function(){str="\n<div class=\"admin-container\">\n\t<div class=\"row errors\">\n\t\t<ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n\t</div>\n\t<div class=\"row\">\n\t\t<h1>Distro Administration Panel</h1>\n\t</div>\n</div>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/login.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/login.js";var str;return{setters:[],execute:function(){str="\n<div class=\"login-container\">\n\t<div class=\"row errors\">\n\t\t<ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n\t</div>\n\t<div class=\"row\">\n\t\t<h1>Distro Admin</h1>\n\t</div>\n\t<div class=\"row\">\n    \t<div class=\"u-full-width\">\n            <label class=\"required\" for=\"email\">Email</label>\n    \t\t<input type=\"text\" class=\"required u-full-width\" name=\"email\" data-bind=\"value email\" placeholder=\"email@domain.tld\" autocomplete=\"on\"/>\n    \t</div>\n    </div>\n    <div class=\"row\">\n    \t<div class=\"u-full-width\">\n            <label class=\"required\" for=\"password\">Password</label>\n    \t\t<input type=\"text\" class=\"required u-full-width\" name=\"password\" data-bind=\"value password\" placeholder=\"******\" autocomplete=\"off\"/>\n    \t</div>\n    </div>\n    <div class=\"row\">\n        <div class=\"one-half column u-pull-left\">\n        \t<button type=\"button\" class=\"button long-text-button u-pull-left\" data-bind=\"click forgotPassword\">Forgot your password?</button>\n        </div>\n        <div class=\"one-half column u-pull-right\">\n            <button type=\"button\" class=\"button-primary u-pull-right\" data-bind=\"click signIn\">Sign In</button><span class=\"u-pull-right spinner\" data-bind=\"text spin\"></span>\n        </div>\n    </div>\n</div>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/migrate.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/migrate.js";var str;return{setters:[],execute:function(){str="\n    <div class=\"row errors\">\n        <ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n    </div>\n    <div class=\"row\">\n        <h1>Pending Migrations</h1>\n    </div>\n    <div class=\"row\">\n        <ul class=\"fa-ul\" data-bind=\"text migrations\"></ul>\n    </div>\n    <div class=\"row\">\n        <h1>Run Migration</h1>\n    </div>\n    <div class=\"row\">\n    \t<div class=\"six columns\">\n            <label class=\"required\" for=\"key\">Secure Key</label>\n    \t\t<input type=\"text\" class=\"required u-full-width\" name=\"key\" data-bind=\"value db_key\" placeholder=\"HkAgAjx75eRzC4sLqzV1HVw4rPmEFqqcTQcUSAt0\"/>\n    \t</div>\n    </div>\n    <div class=\"row\">\n        <div class=\"three columns\">\n            <button type=\"submit\" class=\"button-primary\" data-bind=\"click execute\">Run</button>\n        </div>\n    </div>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/password/recover.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/password/recover.js";var str;return{setters:[],execute:function(){str="\n<div class=\"login-container\">\n\t<div class=\"row errors\">\n\t\t<ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n\t</div>\n\t<div class=\"row\">\n\t\t<h1>Recover password</h1>\n\t</div>\n\t<div class=\"row\">\n    \t<div class=\"u-full-width\">\n            <label class=\"required\" for=\"email\">E-mail</label>\n    \t\t<input type=\"text\" class=\"required u-full-width\" name=\"email\" data-bind=\"value email\" placeholder=\"\"/>\n    \t</div>\n    </div>\n    <div class=\"row\">\n        <div class=\"one-half column u-pull-left\">\n        \t<button type=\"button\" class=\"button u-pull-left\" data-bind=\"click back\">Back to Login</button>\n        </div>\n        <div class=\"one-half column u-pull-right\">\n            <button type=\"button\" class=\"button-primary long-text-button u-pull-right\" data-bind=\"click resetPassword\">Send me the instructions</button>\n        </div>\n    </div>\n</div>\n";$__export('default',str);}};});
System.register("/app/awy/admin/views/root.js",[],function($__export){"use strict";var __moduleName="/app/awy/admin/views/root.js";var str;return{setters:[],execute:function(){str="\n<div class=\"body_start\" data-hook=\"body_start\"></div>\n<header class=\"header\" data-hook=\"header\"></header>\n<div class=\"after_header\" data-hook=\"after_header\"></div>\n<div class=\"site-main\" role=\"main\" data-hook=\"site_main\">\n\t<div class=\"container\">\n\t\t<div class=\"before_main\" data-hook=\"before_main\"></div>\n\t\t<div class=\"main\" data-hook=\"main\"></div>\n\t\t<div class=\"after_main\" data-hook=\"after_main\"></div>\n\t</div>\n</div>\n<div class=\"before_footer\" data-hook=\"before_footer\"></div>\n<footer class=\"footer\" data-hook=\"footer\"></footer>\n<div class=\"before_body_end\" data-hook=\"before_body_end\"></div>\n";$__export('default',str);}};});
System.register("/app/awy/core/controller/abstract.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/controller/abstract.js";var Awy_Core_Controller_Abstract;return{setters:[],execute:function(){Awy_Core_Controller_Abstract=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_Controller_Abstract(){$traceurRuntime.superConstructor(Awy_Core_Controller_Abstract).call(this);this._action;this._forward;this._actionMethodPrefix='action_';}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Controller_Abstract,{view:$traceurRuntime.initTailRecursiveFunction(function(viewname){return $traceurRuntime.call(function(viewname){var layout,v;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(3),$ctx.errback);return;case 3:layout=$ctx.value;$ctx.state=2;break;case 2:v=layout.view(viewname);$ctx.state=8;break;case 8:$ctx.returnValue=v;$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),layout:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var name,config,layout,req,theme,l,$__6,$__7,$__8,$__4,$__3,$__9;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:name=$arguments[0]!==(void 0)?$arguments[0]:null;$ctx.state=40;break;case 40:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(6),$ctx.errback);return;case 6:layout=$ctx.value;$ctx.state=5;break;case 5:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(9),$ctx.errback);return;case 9:req=$ctx.value;$ctx.state=8;break;case 8:theme=config.get('modules/'+req.area+'/theme');if(!theme){theme=layout.defaultTheme;}
$ctx.state=42;break;case 42:$ctx.state=(theme)?10:11;break;case 10:Promise.resolve(layout.applyTheme(theme)).then($ctx.createCallback(11),$ctx.errback);return;case 11:$ctx.state=(name)?33:25;break;case 33:if(!Array.isArray(name)){name=[name];}
$__6=true;$__7=false;$__8=undefined;$ctx.state=34;break;case 34:$ctx.pushTry(20,21);$ctx.state=23;break;case 23:$__4=void 0,$__3=(name)[Symbol.iterator]();$ctx.state=19;break;case 19:$ctx.state=(!($__6=($__4=$__3.next()).done))?15:17;break;case 14:$__6=true;$ctx.state=19;break;case 15:l=$__4.value;$ctx.state=16;break;case 16:Promise.resolve(layout.applyLayout(l)).then($ctx.createCallback(14),$ctx.errback);return;case 17:$ctx.popTry();$ctx.state=21;$ctx.finallyFallThrough=25;break;case 20:$ctx.popTry();$ctx.maybeUncatchable();$__9=$ctx.storedException;$ctx.state=26;break;case 26:$__7=true;$__8=$__9;$ctx.state=21;$ctx.finallyFallThrough=25;break;case 21:$ctx.popTry();$ctx.state=32;break;case 32:try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}
$ctx.state=30;break;case 25:$ctx.returnValue=this;$ctx.state=37;break;case 37:$ctx.state=-2;break;case 30:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),dispatch:$traceurRuntime.initTailRecursiveFunction(function(actionName){return $traceurRuntime.call(function(actionName){var args,before,authenticated;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[1]!==(void 0)?$arguments[1]:{};this._action=actionName;this._forward=null;$ctx.state=36;break;case 36:Promise.resolve(this.onBeforeDispatch(args)).then($ctx.createCallback(3),$ctx.errback);return;case 3:before=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(!before)?4:6;break;case 4:$ctx.returnValue=false;$ctx.state=5;break;case 5:$ctx.state=-2;break;case 6:$ctx.state=(null!==this._forward)?8:10;break;case 8:$ctx.returnValue=this._forward;$ctx.state=9;break;case 9:$ctx.state=-2;break;case 10:authenticated=true;$ctx.state=38;break;case 38:$ctx.state=(actionName!=='unauthenticated')?24:20;break;case 24:authenticated=this.authenticate(args);$ctx.state=25;break;case 25:$ctx.state=(!authenticated)?15:14;break;case 15:this.forward('unauthenticated');$ctx.state=16;break;case 16:$ctx.returnValue=this._forward;$ctx.state=13;break;case 13:$ctx.state=-2;break;case 14:$ctx.state=(actionName!=='unauthorized'&&!this.authorize(args))?21:20;break;case 21:this.forward('unauthorized');$ctx.state=22;break;case 22:$ctx.returnValue=this._forward;$ctx.state=19;break;case 19:$ctx.state=-2;break;case 20:Promise.resolve(this.tryDispatch(actionName,args)).then($ctx.createCallback(28),$ctx.errback);return;case 28:$ctx.state=(null===this._forward)?29:30;break;case 29:Promise.resolve(this.onAfterDispatch(args)).then($ctx.createCallback(30),$ctx.errback);return;case 30:$ctx.returnValue=this._forward;$ctx.state=33;break;case 33:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),tryDispatch:$traceurRuntime.initTailRecursiveFunction(function(actionName,args){return $traceurRuntime.call(function(actionName,args){var actionMethod;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:actionMethod=this._actionMethodPrefix+actionName;$ctx.state=13;break;case 13:$ctx.state=(!(actionMethod in this))?4:3;break;case 4:this.forward(false);$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(this[actionMethod](args)).then($ctx.createCallback(8),$ctx.errback);return;case 8:$ctx.returnValue=this;$ctx.state=10;break;case 10:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onAfterDispatch:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var response;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Core_Controller_Abstract.onAfterDispatch');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_router_response')).then($ctx.createCallback(3),$ctx.errback);return;case 3:response=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(response.output()).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onBeforeDispatch:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var args;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Core_Controller_Abstract.onBeforeDispatch');args={'action':this._action,'controller':this};$ctx.state=5;break;case 5:$ctx.returnValue=true;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),authenticate:function(){var args=arguments[0]!==(void 0)?arguments[0]:{};return true;},authorize:function(){var args=arguments[0]!==(void 0)?arguments[0]:{};return true;},forward:function(){var actionName=arguments[0]!==(void 0)?arguments[0]:null;var controllerName=arguments[1]!==(void 0)?arguments[1]:null;var params=arguments[2]!==(void 0)?arguments[2]:{};if(false===actionName){this._forward=false;}else{this._forward=[actionName,controllerName,params];}
return this;}},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Controller_Abstract);}};});
System.register("/app/awy/core/controller/main.js",["awy/core/controller/abstract.js"],function($__export){"use strict";var __moduleName="/app/awy/core/controller/main.js";var Awy_Core_Controller_Abstract,Awy_Core_Controller_Main;return{setters:[function($__m){Awy_Core_Controller_Abstract=$__m.default;}],execute:function(){Awy_Core_Controller_Main=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_Controller_Main(){$traceurRuntime.superConstructor(Awy_Core_Controller_Main).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Controller_Main,{action_initialize_js:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Core_Controller_Main.action_initialize_js');$ctx.state=4;break;case 4:Promise.resolve(this.layout('/initialize.js')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_initialize_css:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Core_Controller_Main.action_initialize_css');$ctx.state=4;break;case 4:Promise.resolve(this.layout('/initialize.css')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Controller_Abstract);$__export('default',Awy_Core_Controller_Main);}};});
System.register("/app/awy/core/layout.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/layout.js";var layout;return{setters:[],execute:function(){layout={};$__export('default',layout);}};});
System.register("/app/awy/core/manifest.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/manifest.js";var config;return{setters:[],execute:function(){config={module_name:'awy_core',version:'0.0.0.1',description:"Base Awy classes and JS libraries",before_bootstrap:{callback:"awy_core_model_app.onBeforeBootstrap"},routing:[['/initialize.js','awy_core_controller_main.initialize_js'],['/initialize.css','awy_core_controller_main.initialize_css']],views:{head:{view_class:'awy_core_view_head'},head_script:{view_class:'awy_core_view_text'},head_css:{view_class:'awy_core_view_text'},text:{view_class:'awy_core_view_text'}},observe:[],default_config:{'db/implicit_migration':true,web:{},cookie:{},modules:{awy_core:{company_name:'Awy',site_title:'Awy',copyright_message:'Awy',admin_email:'admin@example.com',support_name:'Support',support_email:'support@example.com',sales_name:'Sales',sales_email:'support@example.com',default_tz:"America/New_York",default_country:'US',base_locale:'en_US',base_currency:'USD',default_currency:'USD'}}}};$__export('default',config);}};});
System.register("/app/awy/core/migrate.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/migrate.js";var Awy_Core_Migrate;return{setters:[],execute:function(){Awy_Core_Migrate=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_Migrate(){$traceurRuntime.superConstructor(Awy_Core_Migrate).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Migrate,{install:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var rules;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:rules={"rules":{"modules":{".read":true,".write":false},"config":{".read":true,".write":false}}};$ctx.state=5;break;case 5:$ctx.returnValue=rules;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),upgrade:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('core upgrade');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),downgrade:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('core downgrade');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Migrate);}};});
System.register("/app/awy/core/model/aobject.js",[],function($__export){"use strict";var $__7=$traceurRuntime.initTailRecursiveFunction(escapeRegExp),$__9=$traceurRuntime.initTailRecursiveFunction(replaceAll);var __moduleName="/app/awy/core/model/aobject.js";var diGlobal,Aobject,_instance,_singletons,_classes,ObjectRegistry;function escapeRegExp(string){return $traceurRuntime.call(function(string){return $traceurRuntime.continuation(string.replace,string,[/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"]);},this,arguments);}
function replaceAll(string,find,replace){return $traceurRuntime.call(function(string,find,replace){return $traceurRuntime.continuation(string.replace,string,[new RegExp(escapeRegExp(find),'g'),replace]);},this,arguments);}
return{setters:[],execute:function(){diGlobal={};Aobject=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var $__11;function Aobject(){this._origClass=this.constructor.name;this._diConfig={'*':'ALL'};this._diLocal={};}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Aobject,{getGlobalDependencyInstance:$traceurRuntime.initTailRecursiveFunction(function(name,receiver){return $traceurRuntime.call(function(name,receiver){return $traceurRuntime.continuation($traceurRuntime.construct,Promise,[function(resolve,reject){var className=false;if(name in receiver._diConfig){if($traceurRuntime.typeof(receiver._diConfig[name])==='object'&&!Array.isArray(receiver._diConfig[name])){reject("Invalid class type in DI Configuration!!");}
if(Array.isArray(receiver._diConfig[name])){className=receiver._diConfig[name][0];}else{className=receiver._diConfig[name];}}else{className=name;if(!('*'in receiver._diConfig)){reject("Class is not allowed by DI "+className);}}
ObjectRegistry.getInstance(className,true).then(function(inst){diGlobal[className]=inst;resolve(diGlobal[className]);},function(error){reject(error);});}]);},this,arguments);})},{i:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var $__5;var newInst=arguments[0]!==(void 0)?arguments[0]:false;for(var rest=[],$__3=1;$__3<arguments.length;$__3++)
rest[$__3-1]=arguments[$__3];var className='';if(typeof newInst==="string"){className=newInst;newInst=false;}else{className=this;}
return($__11=($__5=ObjectRegistry).getInstance,$traceurRuntime.continuation($__11.apply,$__11,[$__5,$traceurRuntime.spread([className,!newInst],rest)]));},this,arguments);})}]);},this,arguments);})();$__export("Aobject",Aobject);_instance=null;_singletons={};_classes={};ObjectRegistry=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__12;function ObjectRegistry(){$traceurRuntime.superConstructor(ObjectRegistry).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[ObjectRegistry,{},{getInstance:$traceurRuntime.initTailRecursiveFunction(function(className){return $traceurRuntime.call(function(className){var $__12;var singleton=arguments[1]!==(void 0)?arguments[1]:false;for(var rest=[],$__3=2;$__3<arguments.length;$__3++)
rest[$__3-2]=arguments[$__3];return $traceurRuntime.continuation($traceurRuntime.construct,Promise,[$traceurRuntime.initTailRecursiveFunction(function(resolve,reject){return $traceurRuntime.call(function(resolve,reject){var moduleName=className.split('_').slice(0,2).join("_");if('awy_core_model_module_registry'in _singletons&&moduleName!=='awy_core'){var modReg=_singletons['awy_core_model_module_registry'];if(!modReg._modules.has(moduleName)){throw new Error(moduleName+' module is disabled!!! '+className);}}
var key=$traceurRuntime.spread(rest,[className]).join('-');if(singleton&&$traceurRuntime.typeof(_singletons[key])==='object'){return $traceurRuntime.continuation(resolve,null,[_singletons[key]]);}
className=className in _classes?_classes[className]['class_name']:className;var path=replaceAll(String(className),"_",'/');return($__12=System.import(path+'.js').then($traceurRuntime.initTailRecursiveFunction(function(file){return $traceurRuntime.call(function(file){var $__5;var instance=Object.create(file.default.prototype);($__5=file.default).call.apply($__5,$traceurRuntime.spread([instance],rest));if(singleton){_singletons[key]=instance;}
return $traceurRuntime.continuation(resolve,null,[instance]);},this,arguments);})),$traceurRuntime.continuation($__12.catch,$__12,[$traceurRuntime.initTailRecursiveFunction(function(e){return $traceurRuntime.call(function(e){return $traceurRuntime.continuation(reject,null,[e]);},this,arguments);})]));},this,arguments);})]);},this,arguments);}),processDI:function(className){for(var rest=[],$__4=1;$__4<arguments.length;$__4++)
rest[$__4-1]=arguments[$__4];},overrideClass:$traceurRuntime.initTailRecursiveFunction(function(className,newClassName){return $traceurRuntime.call(function(className,newClassName){var replaceSingleton=arguments[2]!==(void 0)?arguments[2]:false;var curModName='';if('awy_core_model_module_registry'in _singletons){var modReg=_singletons['awy_core_model_module_registry'];curModName=modReg.currentModuleName();}
if(typeof newClassName==='string'){_classes[className]={'class_name':newClassName,'module_name':curModName};}else if(null===newClassName){if(!(className in _classes)){return $traceurRuntime.continuation(Promise.resolve,Promise,[false]);}
delete _classes[className];}
if(replaceSingleton&&className in _singletons){return($__12=this.getInstance(newClassName),$traceurRuntime.continuation($__12.then,$__12,[function(inst){_singletons[className]=inst;}]));}
return $traceurRuntime.continuation(Promise.resolve,Promise,[true]);},this,arguments);})},$__super]);},this,arguments);})(Aobject);$__export("ObjectRegistry",ObjectRegistry);}};});
System.register("/app/awy/core/model/app.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/app.js";var Core_Model_App;return{setters:[],execute:function(){Core_Model_App=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Core_Model_App(){$traceurRuntime.superConstructor(Core_Model_App).call(this);this.logger=Class.i('awy_core_model_logger','App');this.isInitialized=false;this.host=null;this._baseUrl=null;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_App,{run:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var area,modReg,router,config,layout,db,layout$__3,l,response,er,e;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:area=$arguments[0]!==(void 0)?$arguments[0]:'frontend';$ctx.state=52;break;case 52:$ctx.pushTry(44,null);$ctx.state=47;break;case 47:Promise.resolve(this.init(area)).then($ctx.createCallback(3),$ctx.errback);return;case 3:modReg=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(modReg.bootstrap()).then($ctx.createCallback(5),$ctx.errback);return;case 5:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(8),$ctx.errback);return;case 8:router=$ctx.value;$ctx.state=7;break;case 7:console.log('router listen');router.listen();$ctx.state=19;break;case 19:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(11),$ctx.errback);return;case 11:config=$ctx.value;$ctx.state=10;break;case 10:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(14),$ctx.errback);return;case 14:layout=$ctx.value;$ctx.state=13;break;case 13:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(17),$ctx.errback);return;case 17:db=$ctx.value;$ctx.state=16;break;case 16:console.log(config);console.log(router);console.log(layout);console.log(db);$ctx.state=21;break;case 21:$ctx.popTry();$ctx.state=-2;break;case 44:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=37;break;case 37:$ctx.pushTry(35,null);$ctx.state=38;break;case 38:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(24),$ctx.errback);return;case 24:layout$__3=$ctx.value;$ctx.state=23;break;case 23:Promise.resolve(layout$__3.addView('core/errors',{template:'awy/core/views/core/errors'})).then($ctx.createCallback(27),$ctx.errback);return;case 27:l=$ctx.value;$ctx.state=26;break;case 26:l.rootView='core/errors';l.view('core/errors').set('errors',e);$ctx.state=34;break;case 34:Promise.resolve(Class.i('awy_core_model_router_response')).then($ctx.createCallback(30),$ctx.errback);return;case 30:response=$ctx.value;$ctx.state=29;break;case 29:Promise.resolve(response.output()).then($ctx.createCallback(32),$ctx.errback);return;case 32:$ctx.popTry();$ctx.state=-2;break;case 35:$ctx.popTry();$ctx.maybeUncatchable();er=$ctx.storedException;$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),init:$traceurRuntime.initTailRecursiveFunction(function(area){return $traceurRuntime.call(function(area){var config,modReg,router,$__4,$__5,$__6,$__7;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(this.initConfig(area)).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(this.initModules()).then($ctx.createCallback(6),$ctx.errback);return;case 6:modReg=$ctx.value;$ctx.state=5;break;case 5:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(9),$ctx.errback);return;case 9:router=$ctx.value;$ctx.state=8;break;case 8:$__4=this.logger;$ctx.state=14;break;case 14:Promise.resolve($__4).then($ctx.createCallback(12),$ctx.errback);return;case 12:$__5=$ctx.value;$ctx.state=11;break;case 11:$__6=$__5.debug;$__7=$__6.call($__5,'initRouter');$ctx.state=16;break;case 16:router.config({mode:'history'});$ctx.state=21;break;case 21:$ctx.returnValue=modReg;$ctx.state=18;break;case 18:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),initConfig:$traceurRuntime.initTailRecursiveFunction(function(area){return $traceurRuntime.call(function(area){var config,req,localConfig,rootDir,coreDir,$__8,$__9,$__10,$__11,$__12,$__13,$__14,$__15,$__16,$__17,$__18,$__19,$__20,$__21,$__22,$__23,$__24,$__25,$__26,$__27,$__28,$__29;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__8=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__8).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__9=$ctx.value;$ctx.state=2;break;case 2:$__10=$__9.debug;$__11=$__10.call($__9,'initConfig');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(10),$ctx.errback);return;case 10:config=$ctx.value;$ctx.state=9;break;case 9:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(13),$ctx.errback);return;case 13:req=$ctx.value;$ctx.state=12;break;case 12:localConfig={};rootDir=config.get('fs/root_dir');if(!rootDir){rootDir=req.scriptDir();}
localConfig.fs={root_dir:rootDir};$ctx.state=50;break;case 50:$__12=this.logger;$ctx.state=18;break;case 18:Promise.resolve($__12).then($ctx.createCallback(16),$ctx.errback);return;case 16:$__13=$ctx.value;$ctx.state=15;break;case 15:$__14=$__13.debug;$__15=$__14.call($__13,'ROOTDIR = '+rootDir);$ctx.state=20;break;case 20:coreDir=config.get('fs/core_dir');if(!coreDir){coreDir='/app/awy/core';config.set('fs/core_dir',coreDir);}
config.add(localConfig,true);$ctx.state=52;break;case 52:$__16=this.logger;$ctx.state=25;break;case 25:Promise.resolve($__16).then($ctx.createCallback(23),$ctx.errback);return;case 23:$__17=$ctx.value;$ctx.state=22;break;case 22:$__18=$__17.debug;$__19=$__18.call($__17,'DB HOST CONFIG START');$ctx.state=27;break;case 27:Promise.resolve(config.initDbHost()).then($ctx.createCallback(29),$ctx.errback);return;case 29:$__20=this.logger;$ctx.state=34;break;case 34:Promise.resolve($__20).then($ctx.createCallback(32),$ctx.errback);return;case 32:$__21=$ctx.value;$ctx.state=31;break;case 31:$__22=$__21.debug;$__23=config.get;$__24=$__23.call(config,'db/host');$__25=$__22.call($__21,'DB URL: '+$__24);$ctx.state=36;break;case 36:console.log('AFTER DB HOST CONFIG',JSON.parse(JSON.stringify(config)),JSON.parse(JSON.stringify(localStorage)));$ctx.state=54;break;case 54:$__26=this.logger;$ctx.state=41;break;case 41:Promise.resolve($__26).then($ctx.createCallback(39),$ctx.errback);return;case 39:$__27=$ctx.value;$ctx.state=38;break;case 38:$__28=$__27.debug;$__29=$__28.call($__27,'CORE CONFIG START');$ctx.state=43;break;case 43:Promise.resolve(config.initCoreConfiguration()).then($ctx.createCallback(45),$ctx.errback);return;case 45:console.log('AFTER CORE CONFIG',JSON.parse(JSON.stringify(config)),JSON.parse(JSON.stringify(localStorage)));req.area=area;$ctx.state=56;break;case 56:$ctx.returnValue=config;$ctx.state=47;break;case 47:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),initModules:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var config,req,moduleRegistry,runLevels,area,modules,$__30,$__31,$__32,$__33,$__34,$__35,$__36,$__37;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__30=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__30).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__31=$ctx.value;$ctx.state=2;break;case 2:$__32=$__31.debug;$__33=$__32.call($__31,'initModules');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(10),$ctx.errback);return;case 10:config=$ctx.value;$ctx.state=9;break;case 9:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(13),$ctx.errback);return;case 13:req=$ctx.value;$ctx.state=12;break;case 12:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(16),$ctx.errback);return;case 16:moduleRegistry=$ctx.value;$ctx.state=15;break;case 15:runLevels={};area=req.area;if(config.get('install_status')==='installed'){runLevels[area]='REQUIRED';}else{config.set('module_run_levels',[]);runLevels['awy_install']='REQUIRED';area='awy_install';req.area=area;}
config.add({'module_run_levels':{'request':runLevels}});$ctx.state=31;break;case 31:Promise.resolve(moduleRegistry.scan()).then($ctx.createCallback(19),$ctx.errback);return;case 19:modules=$ctx.value;$ctx.state=18;break;case 18:$__34=this.logger;$ctx.state=24;break;case 24:Promise.resolve($__34).then($ctx.createCallback(22),$ctx.errback);return;case 22:$__35=$ctx.value;$ctx.state=21;break;case 21:$__36=$__35.debug;$__37=$__36.call($__35,'localConfigFile');$ctx.state=26;break;case 26:$ctx.returnValue=modules;$ctx.state=28;break;case 28:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onBeforeBootstrap:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var layout,req,area,config;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(3),$ctx.errback);return;case 3:layout=$ctx.value;$ctx.state=2;break;case 2:layout.defaultViewClass='awy_core_view_base';$ctx.state=11;break;case 11:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(6),$ctx.errback);return;case 6:req=$ctx.value;$ctx.state=5;break;case 5:area=req.area;$ctx.state=13;break;case 13:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(9),$ctx.errback);return;case 9:config=$ctx.value;$ctx.state=8;break;case 8:['cookie','web'].forEach(function(section){var areaConfig=config.get(area+"/"+section);if(areaConfig){config.set(section,areaConfig,true);}});$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),baseUrl:function(){if(!this._baseUrl){this._baseUrl=window.location.protocol+"//"+window.location.hostname+"/";}
return this._baseUrl;},href:function(){var url=arguments[0]!==(void 0)?arguments[0]:'';return this.baseUrl()+url;}},{},$__super]);},this,arguments);})(Class);$__export('default',Core_Model_App);}};});
System.register("/app/awy/core/model/config.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/config.js";var Core_Model_Config;return{setters:[],execute:function(){Core_Model_Config=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Core_Model_Config(){$traceurRuntime.superConstructor(Core_Model_Config).call(this);this.config={};this.configToSave={};this.enableSaving=true;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_Config,{storageAvailable:function(type){try{var storage=window[type],x='__storage_test__';storage.setItem(x,x);storage.removeItem(x);return true;}catch(e){return false;}},initDbHost:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var config,coreConfigFile,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:config=JSON.parse(localStorage.getItem('db'));$ctx.state=20;break;case 20:$ctx.state=(!config)?11:16;break;case 11:$ctx.pushTry(9,null);$ctx.state=12;break;case 12:Promise.resolve(System.import('db.js')).then($ctx.createCallback(3),$ctx.errback);return;case 3:coreConfigFile=$ctx.value;$ctx.state=2;break;case 2:config=coreConfigFile.default;$ctx.state=5;break;case 5:$ctx.popTry();$ctx.state=14;break;case 9:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=6;break;case 6:$ctx.returnValue=undefined;$ctx.state=7;break;case 7:$ctx.state=-2;break;case 16:config={db:config};$ctx.state=14;break;case 14:this.add(config,true);this.writeLocalStorage('db',config.db);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),initCoreConfiguration:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var config,def,db,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:config=JSON.parse(localStorage.getItem('core'));def={'install_status':null,'module_run_levels':{}};$ctx.state=25;break;case 25:$ctx.state=(!config)?20:14;break;case 20:$ctx.state=(this.get('db/host')!==null)?11:18;break;case 11:$ctx.pushTry(9,null);$ctx.state=12;break;case 12:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(db.rget('config')).then($ctx.createCallback(6),$ctx.errback);return;case 6:config=$ctx.value;$ctx.state=5;break;case 5:config=JSON.parse(config)||{};$ctx.state=8;break;case 8:$ctx.popTry();$ctx.state=14;break;case 9:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=15;break;case 15:config=def;$ctx.state=14;break;case 18:config=def;$ctx.state=14;break;case 14:if(config!==null){this.add(config,true);this.writeLocalStorage('core',config);}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),writeLocalStorage:function(filename){var config=arguments[1]!==(void 0)?arguments[1]:null;if(!this.storageAvailable('localStorage')){return;}
if(null===config){config=this.configToSave;}
var contents=JSON.stringify(config);localStorage.setItem(filename,contents);},writeCoreConfig:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var c,copy,db;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:c=this.get(null,null,true);copy=JSON.parse(JSON.stringify(c));delete(copy.db);delete(copy.fs);$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(3),$ctx.errback);return;case 3:db=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(db.rput(copy,'config')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),saveDbHostConfig:function(){if(this.get('db/host')===null){return;}
var c=this.get(null,null,true);var data=new FormData();data.append("data",JSON.stringify(c.db.host));var xhr=(window.XMLHttpRequest)?new XMLHttpRequest():new activeXObject("Microsoft.XMLHTTP");xhr.open('post','/c.php',false);xhr.send(data);},writeStorage:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var files,util,c,core,db;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:files=$arguments[0]!==(void 0)?$arguments[0]:null;console.log('writeLocalStorage');$ctx.state=8;break;case 8:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(3),$ctx.errback);return;case 3:util=$ctx.value;$ctx.state=2;break;case 2:if(!this.storageAvailable('localStorage')){throw new Error('localStorage unavailable!!!!');}
if(null===files){files=['core','db','local'];}
if(typeof files==='string'){files=files.toLowerCase().split(',');}
c=this.get(null,null,true);if(util.contains(files,'core')){if('module_run_levels'in c&&'request'in c['module_run_levels']){delete(c['module_run_levels']['request']);}
core={'install_status':'install_status'in c?c['install_status']:null,'module_run_levels':'module_run_levels'in c?c['module_run_levels']:{}};this.writeLocalStorage('core',core);}
if(util.contains(files,'db')){db=c['db']||null;if(db){this.writeLocalStorage('db',db);}}
$ctx.state=10;break;case 10:$ctx.returnValue=this;$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),add:function(config){var toSave=arguments[1]!==(void 0)?arguments[1]:false;var configCopy=JSON.parse(JSON.stringify(config));this.config=this.objectMerge(this.config,configCopy);if(this.enableSaving&&toSave){this.configToSave=this.objectMerge(this.configToSave,configCopy);}
return this;},addFile:$traceurRuntime.initTailRecursiveFunction(function(filename){return $traceurRuntime.call(function(filename){var toSave,config;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:toSave=$arguments[1]!==(void 0)?$arguments[1]:false;if(!this.storageAvailable('localStorage')){throw new Error('localStorage unavailable!!!!');}
config=JSON.parse(localStorage.getItem(filename));this.add(config,toSave);$ctx.state=5;break;case 5:$ctx.returnValue=config;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),get:function(){var path=arguments[0]!==(void 0)?arguments[0]:null;var defaultValue=arguments[1]!==(void 0)?arguments[1]:null;var toSave=arguments[2]!==(void 0)?arguments[2]:false;var node=toSave?this.configToSave:this.config;if(null===path){return node;}
var $__6=true;var $__7=false;var $__8=undefined;try{for(var $__4=void 0,$__3=(path.split('/'))[Symbol.iterator]();!($__6=($__4=$__3.next()).done);$__6=true){var key=$__4.value;{if(typeof node[key]==='undefined'){return defaultValue;}
node=node[key];}}}catch($__9){$__7=true;$__8=$__9;}finally{try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}}
return node;},set:function(path,value){var merge=arguments[2]!==(void 0)?arguments[2]:false;var toSave=arguments[3]!==(void 0)?arguments[3]:false;var node=this.config;if(typeof toSave==='string'&&toSave==='configToSave'){node=this.configToSave;}
var pathArray=path.split('/');var last=pathArray.pop();var $__6=true;var $__7=false;var $__8=undefined;try{for(var $__4=void 0,$__3=(pathArray)[Symbol.iterator]();!($__6=($__4=$__3.next()).done);$__6=true){var key=$__4.value;{node=node[key]||(node[key]={});}}}catch($__9){$__7=true;$__8=$__9;}finally{try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}}
if(merge){node[last]=this.objectMerge(node[last],value);}else{node[last]=value;}
if(this.enableSaving&&toSave===true){this.set(path,value,merge,'configToSave');}
return this;},objectMerge:function(){var $__18;for(var rest=[],$__17=0;$__17<arguments.length;$__17++)
rest[$__17]=arguments[$__17];var base=rest.shift();var $__13=true;var $__14=false;var $__15=undefined;try{for(var $__11=void 0,$__10=(rest)[Symbol.iterator]();!($__13=($__11=$__10.next()).done);$__13=true){var append=$__11.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
if(Array.isArray(append)&&Array.isArray(base)){var $__6=true;var $__7=false;var $__8=undefined;try{for(var $__4=void 0,$__3=(append)[Symbol.iterator]();!($__6=($__4=$__3.next()).done);$__6=true){var val=$__4.value;{if(!!~base.indexOf(val)){base[base.indexOf(val)]=val;append.splice(append.indexOf(val),1);}}}}catch($__9){$__7=true;$__8=$__9;}finally{try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}}
($__18=base).push.apply($__18,$traceurRuntime.spread(append));}
var key=void 0;for(key in append){if(key in base){base[key]=this.objectMerge(base[key],append[key]);}else{Object.assign(base,append);}}}}}catch($__16){$__14=true;$__15=$__16;}finally{try{if(!$__13&&$__10.return!=null){$__10.return();}}finally{if($__14){throw $__15;}}}
return base;}},{},$__super]);},this,arguments);})(Class);$__export('default',Core_Model_Config);}};});
System.register("/app/awy/core/model/db.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/db.js";var MASTER_KEY,Awy_Core_Model_Db;return{setters:[],execute:function(){MASTER_KEY='HkAgAjx75eRzC4sLqzV1HVw4rPmEFqqcTQcUSAt0';Awy_Core_Model_Db=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_Model_Db(){$traceurRuntime.superConstructor(Awy_Core_Model_Db).call(this);this.logger=Class.i('awy_core_model_logger','DB');this._defaultConnectionName='DEFAULT';this._currentConnectionName;this._config={};this._connection=null;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Model_Db,{connect:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var name,config,dbCfg,$__3,$__4,$__5,$__6;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:name=$arguments[0]!==(void 0)?$arguments[0]:null;if(!name&&this._currentConnectionName){}
if(null===name){name=this._defaultConnectionName;}
if(name===this._currentConnectionName){}
$ctx.state=18;break;case 18:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:dbCfg=config.get(this._defaultConnectionName?'db':'db/named/'+name);$ctx.state=20;break;case 20:$__3=this.logger;$ctx.state=8;break;case 8:Promise.resolve($__3).then($ctx.createCallback(6),$ctx.errback);return;case 6:$__4=$ctx.value;$ctx.state=5;break;case 5:$__5=$__4.debug;$__6=$__5.call($__4,"DB.CONNECT: "+name);$ctx.state=10;break;case 10:console.log(dbCfg);this._currentConnectionName=name;this._config=dbCfg;$ctx.state=22;break;case 22:Promise.resolve(this.getDb()).then($ctx.createCallback(13),$ctx.errback);return;case 13:this._connection=$ctx.value;$ctx.state=12;break;case 12:config.writeLocalStorage('db',this._config);$ctx.state=24;break;case 24:$ctx.returnValue=this._connection;$ctx.state=15;break;case 15:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),sudo:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var cfg,ref;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(this._connection===null)?1:2;break;case 1:Promise.resolve(this.connect()).then($ctx.createCallback(2),$ctx.errback);return;case 2:cfg=this._config;ref=this._connection;$ctx.state=8;break;case 8:$ctx.returnValue=new Promise(function(resolve,reject){ref.authWithCustomToken(cfg.key,function(error,authData){if(error){reject("SUDO Failed!"+error);}else{if(authData.provider!="custom"){reject("SUDO Failed!"+error);}else{console.log("SuperAdmin Authenticated successfully:",authData);cfg['key']=cfg.key;resolve(authData);}}});});$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),getDb:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var cfg;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:cfg=this._config;$ctx.state=5;break;case 5:$ctx.returnValue=new Promise(function(resolve,reject){try{var ref=new Firebase(cfg.host);resolve(ref);}catch(e){reject(e);}});$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),get:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var path,name,ref;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[0]!==(void 0)?$arguments[0]:null;name=$arguments[1]!==(void 0)?$arguments[1]:null;$ctx.state=8;break;case 8:Promise.resolve(this.connect(name)).then($ctx.createCallback(3),$ctx.errback);return;case 3:ref=$ctx.value;$ctx.state=2;break;case 2:$ctx.returnValue=new Promise(function(resolve,reject){ref.child(path).once("value",function(snapshot){resolve(snapshot.val());});});$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),rput:$traceurRuntime.initTailRecursiveFunction(function(data){return $traceurRuntime.call(function(data){var path,name,print,params,req,result;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[1]!==(void 0)?$arguments[1]:null;name=$arguments[2]!==(void 0)?$arguments[2]:null;print=$arguments[3]!==(void 0)?$arguments[3]:'silent';console.log("rput conn: ",this._connection,this._config);$ctx.state=14;break;case 14:$ctx.state=(this._connection===null)?1:2;break;case 1:Promise.resolve(this.connect(name)).then($ctx.createCallback(2),$ctx.errback);return;case 2:params={"auth":this._config.key,"print":print};if(typeof this._config.key==='undefined'){delete params.auth;}
$ctx.state=16;break;case 16:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(6),$ctx.errback);return;case 6:req=$ctx.value;$ctx.state=5;break;case 5:Promise.resolve(req.ajax('PUT',this._config.host+'/'+path+'.json',params,JSON.stringify(data))).then($ctx.createCallback(9),$ctx.errback);return;case 9:result=$ctx.value;$ctx.state=8;break;case 8:$ctx.returnValue=result;$ctx.state=11;break;case 11:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),rpatch:$traceurRuntime.initTailRecursiveFunction(function(data){return $traceurRuntime.call(function(data){var path,name,print,params,req,result;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[1]!==(void 0)?$arguments[1]:null;name=$arguments[2]!==(void 0)?$arguments[2]:null;print=$arguments[3]!==(void 0)?$arguments[3]:'silent';console.log("rpatch conn: ",this._connection,this._config);$ctx.state=14;break;case 14:$ctx.state=(this._connection===null)?1:2;break;case 1:Promise.resolve(this.connect(name)).then($ctx.createCallback(2),$ctx.errback);return;case 2:params={"auth":this._config.key,"print":print};if(typeof this._config.key==='undefined'){delete params.auth;}
$ctx.state=16;break;case 16:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(6),$ctx.errback);return;case 6:req=$ctx.value;$ctx.state=5;break;case 5:Promise.resolve(req.ajax('PATCH',this._config.host+'/'+path+'.json',params,JSON.stringify(data))).then($ctx.createCallback(9),$ctx.errback);return;case 9:result=$ctx.value;$ctx.state=8;break;case 8:$ctx.returnValue=result;$ctx.state=11;break;case 11:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),rpost:$traceurRuntime.initTailRecursiveFunction(function(data){return $traceurRuntime.call(function(data){var path,name,print,params,req,result;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[1]!==(void 0)?$arguments[1]:null;name=$arguments[2]!==(void 0)?$arguments[2]:null;print=$arguments[3]!==(void 0)?$arguments[3]:'pretty';console.log("rpost conn: ",this._connection,this._config);$ctx.state=14;break;case 14:$ctx.state=(this._connection===null)?1:2;break;case 1:Promise.resolve(this.connect(name)).then($ctx.createCallback(2),$ctx.errback);return;case 2:params={"auth":this._config.key,"print":print};if(typeof this._config.key==='undefined'){delete params.auth;}
$ctx.state=16;break;case 16:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(6),$ctx.errback);return;case 6:req=$ctx.value;$ctx.state=5;break;case 5:Promise.resolve(req.ajax('POST',this._config.host+'/'+path+'.json',params,JSON.stringify(data))).then($ctx.createCallback(9),$ctx.errback);return;case 9:result=$ctx.value;$ctx.state=8;break;case 8:$ctx.returnValue=result;$ctx.state=11;break;case 11:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),rdelete:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var path,name,params,req,result;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[0]!==(void 0)?$arguments[0]:null;name=$arguments[1]!==(void 0)?$arguments[1]:null;console.log("rdelete conn: ",this._connection,this._config);$ctx.state=18;break;case 18:$ctx.state=(path===null)?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.state=(this._connection===null)?5:6;break;case 5:Promise.resolve(this.connect(name)).then($ctx.createCallback(6),$ctx.errback);return;case 6:params={"auth":this._config.key};if(typeof this._config.key==='undefined'){delete params.auth;}
$ctx.state=20;break;case 20:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(10),$ctx.errback);return;case 10:req=$ctx.value;$ctx.state=9;break;case 9:Promise.resolve(req.ajax('DELETE',this._config.host+'/'+path+'.json',params)).then($ctx.createCallback(13),$ctx.errback);return;case 13:result=$ctx.value;$ctx.state=12;break;case 12:$ctx.returnValue=result;$ctx.state=15;break;case 15:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),rget:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var path,name,params,shallow,req,shallowRes,$__7,$__8,$__9,$__10,p,result;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[0]!==(void 0)?$arguments[0]:null;name=$arguments[1]!==(void 0)?$arguments[1]:null;params=$arguments[2]!==(void 0)?$arguments[2]:{};shallow=$arguments[3]!==(void 0)?$arguments[3]:false;console.log("rget conn: ",this._connection,this._config);$ctx.state=33;break;case 33:$ctx.state=(this._connection===null)?1:2;break;case 1:Promise.resolve(this.connect(name)).then($ctx.createCallback(2),$ctx.errback);return;case 2:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(6),$ctx.errback);return;case 6:req=$ctx.value;$ctx.state=5;break;case 5:$ctx.state=(shallow===true)?7:12;break;case 7:Promise.resolve(req.ajax('GET',this._config.host+'/'+path+'.json',{"auth":this._config.key,"shallow":true})).then($ctx.createCallback(9),$ctx.errback);return;case 9:shallowRes=$ctx.value;$ctx.state=8;break;case 8:$ctx.returnValue=shallowRes;$ctx.state=11;break;case 11:$ctx.state=-2;break;case 12:$__7=[];$__8=params;for($__9 in $__8)
$__7.push($__9);$ctx.state=25;break;case 25:$__10=0;$ctx.state=23;break;case 23:$ctx.state=($__10<$__7.length)?17:21;break;case 20:$__10++;$ctx.state=23;break;case 17:p=$__7[$__10];$ctx.state=18;break;case 18:$ctx.state=(!(p in $__8))?20:15;break;case 15:if((p=="orderBy"||p=="equalTo")&&typeof params[p]==="string"){params[p]=JSON.stringify(params[p]);}
$ctx.state=20;break;case 21:params["auth"]=this._config.key;if(typeof this._config.key==='undefined'){delete params.auth;}
$ctx.state=35;break;case 35:Promise.resolve(req.ajax('GET',this._config.host+'/'+path+'.json',params)).then($ctx.createCallback(28),$ctx.errback);return;case 28:result=$ctx.value;$ctx.state=27;break;case 27:$ctx.returnValue=result;$ctx.state=30;break;case 30:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),listen:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var path,eventname,name,evtSource;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=$arguments[0]!==(void 0)?$arguments[0]:null;eventname=$arguments[1]!==(void 0)?$arguments[1]:"put";name=$arguments[2]!==(void 0)?$arguments[2]:null;$ctx.state=5;break;case 5:$ctx.state=(this._connection===null)?1:2;break;case 1:Promise.resolve(this.connect(name)).then($ctx.createCallback(2),$ctx.errback);return;case 2:evtSource=new EventSource(this._config.host+'/'+path+'.json?auth='+MASTER_KEY);evtSource.addEventListener(eventname,function(e){var obj=JSON.parse(e.data);var epath=obj.path;var evalue=obj.data;if(evalue===null){console.log("Path: "+path+epath+" has been removed");}else{console.log("Path: "+path+epath+" has new value: ",evalue);}},false);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Model_Db);}};});
System.register("/app/awy/core/model/events.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/events.js";var Awy_Core_Model_Events;return{setters:[],execute:function(){Awy_Core_Model_Events=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__37;function Awy_Core_Model_Events(){$traceurRuntime.superConstructor(Awy_Core_Model_Events).call(this);this.logger=Class.i('awy_core_model_logger','Events');this._events=new Map();}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Model_Events,{declare:function(eventName){var args=arguments[1]!==(void 0)?arguments[1]:{};if(Array.isArray(eventName)){var evnt;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(eventName)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){evnt=$__5.value;{this.declare(evnt[0],evnt[1]||{});}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
return $this;}
eventName=eventName.toLowerCase();this._events.set(eventName,{'observers':[],'args':args});return $this;},on:$traceurRuntime.initTailRecursiveFunction(function(eventName){return $traceurRuntime.call(function(eventName){var callback,args,params,obs,$__7,$__8,$__9,$__5,$__4,observer,modReg,inserted,e,$__14,$__15,$__16,$__17;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:callback=$arguments[1]!==(void 0)?$arguments[1]:null;args=$arguments[2]!==(void 0)?$arguments[2]:{};params=$arguments[3]!==(void 0)?$arguments[3]:{};$ctx.state=21;break;case 21:$ctx.state=(Array.isArray(eventName))?4:3;break;case 4:$__7=true;$__8=false;$__9=undefined;try{for($__5=void 0,$__4=(eventName)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){obs=$__5.value;{this.on(obs[0],obs[1],obs[2]||{});}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:if(typeof params==='string'){params={'alias':params};}
if(!('alias'in params)&&typeof callback==='string'){params['alias']=callback;}
observer={'callback':callback,'args':args,'alias':params['alias']};$ctx.state=23;break;case 23:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(9),$ctx.errback);return;case 9:modReg=$ctx.value;$ctx.state=8;break;case 8:observer['module_name']=modReg.currentModuleName();eventName=eventName.toLowerCase();inserted=false;if('insert'in params){}
if(!inserted){if(!this._events.has(eventName)){this._events.set(eventName,{'observers':[]});}
e=this._events.get(eventName);if(!('observers'in e)){e['observers']=[];}
e.observers.push(observer);}
$ctx.state=25;break;case 25:$__14=this.logger;$ctx.state=14;break;case 14:Promise.resolve($__14).then($ctx.createCallback(12),$ctx.errback);return;case 12:$__15=$ctx.value;$ctx.state=11;break;case 11:$__16=$__15.debug;$__17=$__16.call($__15,'SUBSCRIBE '+eventName);$ctx.state=16;break;case 16:$ctx.returnValue=this;$ctx.state=18;break;case 18:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),once:$traceurRuntime.initTailRecursiveFunction(function(eventName){return $traceurRuntime.call(function(eventName){var callback,args,params,$__3,obs,$__7,$__8,$__9,$__5,$__4,e,lastId,$__10;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:callback=$arguments[1]!==(void 0)?$arguments[1]:null;args=$arguments[2]!==(void 0)?$arguments[2]:{};params=$arguments[3]!==(void 0)?$arguments[3]:{};$__3=this;$ctx.state=35;break;case 35:$ctx.state=(Array.isArray(eventName))?24:23;break;case 24:$__7=true;$__8=false;$__9=undefined;$ctx.state=25;break;case 25:$ctx.pushTry(8,9);$ctx.state=11;break;case 11:$__5=void 0,$__4=(eventName)[Symbol.iterator]();$ctx.state=7;break;case 7:$ctx.state=(!($__7=($__5=$__4.next()).done))?3:5;break;case 2:$__7=true;$ctx.state=7;break;case 3:obs=$__5.value;$ctx.state=4;break;case 4:Promise.resolve(this.once(obs[0],obs[1],obs[2]||{})).then($ctx.createCallback(2),$ctx.errback);return;case 5:$ctx.popTry();$ctx.state=9;$ctx.finallyFallThrough=13;break;case 8:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=14;break;case 14:$__8=true;$__9=$__10;$ctx.state=9;$ctx.finallyFallThrough=13;break;case 9:$ctx.popTry();$ctx.state=20;break;case 20:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=18;break;case 13:$ctx.returnValue=this;$ctx.state=22;break;case 22:$ctx.state=-2;break;case 23:Promise.resolve(this.on(eventName,callback,args,params)).then($ctx.createCallback(28),$ctx.errback);return;case 28:e=this._events.get(eventName);lastId=e.observers.length;$ctx.state=37;break;case 37:Promise.resolve(this.on(eventName,function(eventName,lastId){$__3.off(eventName,lastId-1);$__3.off(eventName,lastId);})).then($ctx.createCallback(30),$ctx.errback);return;case 30:$ctx.returnValue=this;$ctx.state=32;break;case 32:$ctx.state=-2;break;case 18:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),off:function(eventName){var alias=arguments[1]!==(void 0)?arguments[1]:null;eventName=eventName.toLowerCase();if(true===alias){this._events.delete(eventName);return this;}
var e=this._events.get(eventName);if(typeof alias==="number"){e.observers.splice(alias,1);return this;}
e.observers.splice(e.observers.indexOf(alias),1);return this;},clear:function(){this._events.clear();},fire:$traceurRuntime.initTailRecursiveFunction(function(eventName){return $traceurRuntime.call(function(eventName){var args,result,e,observers,observer,$__7,$__8,$__9,$__5,$__4,i,modReg,cb,exists,s$__12,r,clbClass,exists$__13,s,$__18,$__19,$__20,$__21,$__22,$__23,$__24,$__25,$__26,$__27,$__28,$__29,$__30,$__31,$__32,$__33,$__10;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[1]!==(void 0)?$arguments[1]:{};eventName=eventName.toLowerCase();$ctx.state=96;break;case 96:$__18=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__18).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__19=$ctx.value;$ctx.state=2;break;case 2:$__20=$__19.debug;$__21=$__20.call($__19,'FIRE '+eventName);$ctx.state=7;break;case 7:result=[];$ctx.state=98;break;case 98:$ctx.state=(!this._events.has(eventName))?8:10;break;case 8:$ctx.returnValue=result;$ctx.state=9;break;case 9:$ctx.state=-2;break;case 10:e=this._events.get(eventName);$ctx.state=100;break;case 100:$__22=this.logger;$ctx.state=16;break;case 16:Promise.resolve($__22).then($ctx.createCallback(14),$ctx.errback);return;case 14:$__23=$ctx.value;$ctx.state=13;break;case 13:$__24=$__23.debug;$__25=$__24.call($__23,e);$ctx.state=18;break;case 18:$__26=this.logger;$ctx.state=23;break;case 23:Promise.resolve($__26).then($ctx.createCallback(21),$ctx.errback);return;case 21:$__27=$ctx.value;$ctx.state=20;break;case 20:$__28=$__27.debug;$__29=$__28.call($__27,args);$ctx.state=25;break;case 25:observers=e.observers;$__7=true;$__8=false;$__9=undefined;$ctx.state=102;break;case 102:$ctx.pushTry(79,80);$ctx.state=82;break;case 82:$__5=void 0,$__4=(observers)[Symbol.iterator]();$ctx.state=78;break;case 78:$ctx.state=(!($__7=($__5=$__4.next()).done))?74:76;break;case 73:$__7=true;$ctx.state=78;break;case 74:observer=$__5.value;$ctx.state=75;break;case 75:i=observers.indexOf(observer);if('args'in e){args=this.objectMerge(e.args,args);}
if('args'in observer){}
$ctx.state=69;break;case 69:$ctx.state=('module_name'in observer)?26:30;break;case 26:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(28),$ctx.errback);return;case 28:modReg=$ctx.value;$ctx.state=27;break;case 27:modReg.pushModule(observer['module_name']);$ctx.state=30;break;case 30:cb=observer['callback'];$ctx.state=71;break;case 71:$ctx.state=((typeof cb==='undefined'?'undefined':$traceurRuntime.typeof(cb))==="object")?32:39;break;case 32:Promise.resolve(this.methodExists(cb,'set')).then($ctx.createCallback(34),$ctx.errback);return;case 34:exists=$ctx.value;$ctx.state=33;break;case 33:if(exists){cb.set(args);}
$ctx.state=41;break;case 41:Promise.resolve(cb.__toString()).then($ctx.createCallback(37),$ctx.errback);return;case 37:s$__12=$ctx.value;$ctx.state=36;break;case 36:result.push(s$__12);$ctx.state=73;break;case 39:$ctx.state=(typeof cb==="string")?62:60;break;case 62:r=cb.split('.');$ctx.state=63;break;case 63:$ctx.state=(r.length==2)?45:60;break;case 45:Promise.resolve(Class.i(r[0])).then($ctx.createCallback(47),$ctx.errback);return;case 47:clbClass=$ctx.value;$ctx.state=46;break;case 46:Promise.resolve(this.methodExists(clbClass,r[1])).then($ctx.createCallback(50),$ctx.errback);return;case 50:exists$__13=$ctx.value;$ctx.state=49;break;case 49:$ctx.state=(!exists$__13)?54:57;break;case 54:$__30=this.logger;$ctx.state=55;break;case 55:Promise.resolve($__30).then($ctx.createCallback(53),$ctx.errback);return;case 53:$__31=$ctx.value;$ctx.state=52;break;case 52:$__32=$__31.warn;$__33=$__32.call($__31,'Invalid callback: '+cb);$ctx.state=57;break;case 57:observer['callback']=cb=clbClass[r[1]];$ctx.state=60;break;case 60:Promise.resolve(cb(args)).then($ctx.createCallback(67),$ctx.errback);return;case 67:s=$ctx.value;$ctx.state=66;break;case 66:result.push(s);if('module_name'in observer){modReg.popModule();}
$ctx.state=73;break;case 76:$ctx.popTry();$ctx.state=80;$ctx.finallyFallThrough=84;break;case 79:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=85;break;case 85:$__8=true;$__9=$__10;$ctx.state=80;$ctx.finallyFallThrough=84;break;case 80:$ctx.popTry();$ctx.state=91;break;case 91:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=89;break;case 84:$ctx.returnValue=result;$ctx.state=93;break;case 93:$ctx.state=-2;break;case 89:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),observers:$traceurRuntime.initTailRecursiveFunction(function(eventName){return $traceurRuntime.call(function(eventName){return this._events.has(eventName)?($__37=this._events,$traceurRuntime.continuation($__37.get,$__37,[eventName])):{};},this,arguments);}),objectMerge:function(){for(var rest=[],$__11=0;$__11<arguments.length;$__11++)
rest[$__11]=arguments[$__11];var base=rest.shift();var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(rest)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){var append=$__5.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
var key=void 0;for(key in append){if(key in base){base[key]=this.objectMerge(base[key],append[key]);}else{Object.assign(base,append);}}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
return base;},methodExists:$traceurRuntime.initTailRecursiveFunction(function(obj,method){return $traceurRuntime.call(function(obj,method){var clbClass,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.pushTry(9,null);$ctx.state=12;break;case 12:clbClass=obj;$ctx.state=5;break;case 5:$ctx.returnValue=typeof clbClass[method]==='function';$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.popTry();$ctx.state=-2;break;case 9:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=6;break;case 6:$ctx.returnValue=false;$ctx.state=7;break;case 7:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Model_Events);}};});
System.register("/app/awy/core/model/layout.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/layout.js";var Awy_Core_Model_Layout;return{setters:[],execute:function(){Awy_Core_Model_Layout=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__3;function Awy_Core_Model_Layout(){$traceurRuntime.superConstructor(Awy_Core_Model_Layout).call(this);this._defaultViewClass=false;this._defaultTheme=false;this.views={};this._layouts=new Map();this._themes={};this._rootViewName='root';this._addViewsDirs=[];this._metaDirectives={'remove':'metaDirectiveRemoveCallback','callback':'metaDirectiveCallback','include':'metaDirectiveIncludeCallback','root':'metaDirectiveRootCallback','hook':'metaDirectiveHookCallback','view':'metaDirectiveViewCallback'};this.logger=Class.i('awy_core_model_logger','Layout');}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Model_Layout,($__3={},Object.defineProperty($__3,"defaultViewClass",{set:function(viewClass){this._defaultViewClass=viewClass;return this;},configurable:true,enumerable:true,get:function(){return this._defaultViewClass;}}),Object.defineProperty($__3,"defaultTheme",{set:function(theme){this._defaultTheme=theme;return this;},configurable:true,enumerable:true,get:function(){return this._defaultTheme;}}),Object.defineProperty($__3,"rootView",{set:function(viewName){this._rootViewName=viewName;return this;},configurable:true,enumerable:true,get:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return this._rootViewName?$traceurRuntime.continuation(this.view,this,[this._rootViewName]):null;},this,arguments);})}),Object.defineProperty($__3,"rootViewName",{get:function(){return this._rootViewName;},configurable:true,enumerable:true}),Object.defineProperty($__3,"collectAllViewsFiles",{value:function(){var area=arguments[0]!==(void 0)?arguments[0]:null;if(null===area){Class.i('awy_core_model_router_request').then(function(r){area=r.area;});}},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"view",{value:function(viewName){return this.views[viewName]||null;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"addView",{value:$traceurRuntime.initTailRecursiveFunction(function(viewName){return $traceurRuntime.call(function(viewName){var params,reset,view,modReg,viewAlias,viewFile,v;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:params=$arguments[1]!==(void 0)?$arguments[1]:{};reset=$arguments[2]!==(void 0)?$arguments[2]:false;$ctx.state=24;break;case 24:Promise.resolve(Class.i('awy_core_model_view')).then($ctx.createCallback(3),$ctx.errback);return;case 3:view=$ctx.value;$ctx.state=2;break;case 2:if(typeof params==='string'){params={view_class:params};}
$ctx.state=26;break;case 26:$ctx.state=(!('module_name'in params))?4:8;break;case 4:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(6),$ctx.errback);return;case 6:modReg=$ctx.value;$ctx.state=5;break;case 5:params['module_name']=modReg.currentModuleName();$ctx.state=8;break;case 8:viewAlias=params.view_alias||viewName;viewFile=params.view_file||viewName;$ctx.state=28;break;case 28:$ctx.state=(!(viewAlias in this.views)||('view_class'in params))?13:17;break;case 13:if(!('view_class'in params)){if(this._defaultViewClass){params['view_class']=this._defaultViewClass;}}
$ctx.state=14;break;case 14:Promise.resolve(view.factory(viewFile,params)).then($ctx.createCallback(12),$ctx.errback);return;case 12:v=$ctx.value;$ctx.state=11;break;case 11:this.views[viewAlias]=v;$ctx.state=16;break;case 17:this.views[viewAlias].setParam(params);$ctx.state=16;break;case 16:$ctx.returnValue=this;$ctx.state=21;break;case 21:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"render",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var routeName,args,rootView,eventsInstance,hookRes,result,$__28,$__29,$__30,$__31,$__32,$__33,$__34,$__35,$__36,$__37,$__38,$__39,$__40;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:routeName=$arguments[0]!==(void 0)?$arguments[0]:null;args=$arguments[1]!==(void 0)?$arguments[1]:{};rootView=this.rootView;$ctx.state=36;break;case 36:$__28=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__28).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__29=$ctx.value;$ctx.state=2;break;case 2:$__30=$__29.debug;$__31=$__30.call($__29,'LAYOUT.RENDER ');$ctx.state=7;break;case 7:$__32=this.logger;$ctx.state=12;break;case 12:Promise.resolve($__32).then($ctx.createCallback(10),$ctx.errback);return;case 10:$__33=$ctx.value;$ctx.state=9;break;case 9:$__34=$__33.debug;$__35=$__34.call($__33,rootView);$ctx.state=14;break;case 14:$ctx.state=(!rootView)?18:21;break;case 18:$__36=this.logger;$ctx.state=19;break;case 19:Promise.resolve($__36).then($ctx.createCallback(17),$ctx.errback);return;case 17:$__37=$ctx.value;$ctx.state=16;break;case 16:$__38=$__37.error;$__39=this._rootViewName;$__40=$__38.call($__37,'Main view not found: '+$__39);$ctx.state=21;break;case 21:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(25),$ctx.errback);return;case 25:eventsInstance=$ctx.value;$ctx.state=24;break;case 24:Promise.resolve(eventsInstance.fire('Layout::hook:head',args)).then($ctx.createCallback(28),$ctx.errback);return;case 28:hookRes=$ctx.value;$ctx.state=27;break;case 27:Promise.resolve(this.rootView.render(args)).then($ctx.createCallback(31),$ctx.errback);return;case 31:result=$ctx.value;$ctx.state=30;break;case 30:$ctx.returnValue=result;$ctx.state=33;break;case 33:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"updateTheme",{value:$traceurRuntime.initTailRecursiveFunction(function(themeName,params){return $traceurRuntime.call(function(themeName,params){var curModName=arguments[2]!==(void 0)?arguments[2]:null;return $traceurRuntime.continuation(this.addTheme,this,[themeName,params,curModName]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"addTheme",{value:$traceurRuntime.initTailRecursiveFunction(function(themeName,params){return $traceurRuntime.call(function(themeName,params){var curModName,modReg,paramsCopy,$__41,$__42,$__43,$__44;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:curModName=$arguments[2]!==(void 0)?$arguments[2]:null;$ctx.state=15;break;case 15:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(3),$ctx.errback);return;case 3:modReg=$ctx.value;$ctx.state=2;break;case 2:if(!curModName){curModName=modReg.currentModuleName();}
$ctx.state=17;break;case 17:$__41=this.logger;$ctx.state=8;break;case 8:Promise.resolve($__41).then($ctx.createCallback(6),$ctx.errback);return;case 6:$__42=$ctx.value;$ctx.state=5;break;case 5:$__43=$__42.debug;$__44=$__43.call($__42,'Adding theme '+themeName+' from module '+curModName);$ctx.state=10;break;case 10:paramsCopy=JSON.parse(JSON.stringify(params));['area','parent','layout_before','layout_after','views_before','views_after'].forEach(function(t){if(t in paramsCopy&&t!=='area'&&t!=='parent'){if(!Array.isArray(paramsCopy[t])){paramsCopy[t]=[paramsCopy[t]];}else{paramsCopy[t]=paramsCopy[t];}
paramsCopy[t].forEach(function(v,i){if(v[0]!=='@'){paramsCopy[t][i]='@'+curModName+'/'+v;}});}});if(!(themeName in this._themes)){this._themes[themeName]=paramsCopy;}else{this._themes[themeName]=this.objectMerge(this._themes[themeName],paramsCopy);}
$ctx.state=19;break;case 19:$ctx.returnValue=this._themes[themeName];$ctx.state=12;break;case 12:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"applyTheme",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var themeName,n,$__7,$__8,$__9,$__5,$__4,evnt,$__45,$__46,$__47,$__48;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:themeName=$arguments[0]!==(void 0)?$arguments[0]:null;if(null===themeName){if(!this._defaultTheme){throw new Error('Empty theme supplied and no default theme is set');}
themeName=this._defaultTheme;}
$ctx.state=29;break;case 29:$ctx.state=(Array.isArray(themeName))?4:3;break;case 4:$__7=true;$__8=false;$__9=undefined;try{for($__5=void 0,$__4=(themeName)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){n=$__5.value;{this.applyTheme(n);}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.state=(!(themeName in this._themes))?10:9;break;case 10:throw new Error('Invalid theme supplied: '+themeName);$ctx.state=11;break;case 11:$ctx.returnValue=this;$ctx.state=8;break;case 8:$ctx.state=-2;break;case 9:$__45=this.logger;$ctx.state=17;break;case 17:Promise.resolve($__45).then($ctx.createCallback(15),$ctx.errback);return;case 15:$__46=$ctx.value;$ctx.state=14;break;case 14:$__47=$__46.debug;$__48=$__47.call($__46,'THEME.APPLY '+themeName);$ctx.state=19;break;case 19:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(22),$ctx.errback);return;case 22:evnt=$ctx.value;$ctx.state=21;break;case 21:evnt.fire('Layout::applyTheme:before',{'theme_name':themeName});$ctx.state=31;break;case 31:Promise.resolve(this.loadTheme(themeName)).then($ctx.createCallback(24),$ctx.errback);return;case 24:$ctx.returnValue=this;$ctx.state=26;break;case 26:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"loadTheme",{value:$traceurRuntime.initTailRecursiveFunction(function(themeName){return $traceurRuntime.call(function(themeName){var theme,req,util,area,parentThemeName,$__7,$__8,$__9,$__5,$__4,p,evnt,modReg,layoutBefore,$__14,$__15,$__16,$__12,$__11,$__49,$__50,$__51,$__52,$__10,$__17;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!(themeName in this._themes))?4:3;break;case 4:throw new Error('Invalid theme name: '+themeName);$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:theme=this._themes[themeName];$ctx.state=84;break;case 84:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(9),$ctx.errback);return;case 9:req=$ctx.value;$ctx.state=8;break;case 8:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(12),$ctx.errback);return;case 12:util=$ctx.value;$ctx.state=11;break;case 11:area=req.area;if('area'in theme&&!Array.isArray(theme.area)){theme.area=[theme.area];}
$ctx.state=86;break;case 86:$ctx.state=('area'in theme&&!util.contains(theme.area,area))?16:22;break;case 16:$__49=this.logger;$ctx.state=17;break;case 17:Promise.resolve($__49).then($ctx.createCallback(15),$ctx.errback);return;case 15:$__50=$ctx.value;$ctx.state=14;break;case 14:$__51=$__50.debug;$__52=$__51.call($__50,'Theme '+themeName+' can not be used in '+area);$ctx.state=19;break;case 19:$ctx.returnValue=false;$ctx.state=21;break;case 21:$ctx.state=-2;break;case 22:$ctx.state=('parent'in theme)?48:40;break;case 48:if(!Array.isArray(theme.parent)){theme.parent=[theme.parent];}
$__7=true;$__8=false;$__9=undefined;$ctx.state=49;break;case 49:$ctx.pushTry(35,36);$ctx.state=38;break;case 38:$__5=void 0,$__4=(theme.parent)[Symbol.iterator]();$ctx.state=34;break;case 34:$ctx.state=(!($__7=($__5=$__4.next()).done))?30:32;break;case 28:$__7=true;$ctx.state=34;break;case 30:parentThemeName=$__5.value;$ctx.state=31;break;case 31:Promise.resolve(this.loadTheme(parentThemeName)).then($ctx.createCallback(26),$ctx.errback);return;case 26:p=$ctx.value;$ctx.state=25;break;case 25:$ctx.state=(p)?32:28;break;case 32:$ctx.popTry();$ctx.state=36;$ctx.finallyFallThrough=40;break;case 35:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=41;break;case 41:$__8=true;$__9=$__10;$ctx.state=36;$ctx.finallyFallThrough=40;break;case 36:$ctx.popTry();$ctx.state=47;break;case 47:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=45;break;case 40:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(53),$ctx.errback);return;case 53:evnt=$ctx.value;$ctx.state=52;break;case 52:evnt.fire('Layout::loadTheme:before',{'theme_name':themeName,'theme':theme});$ctx.state=88;break;case 88:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(56),$ctx.errback);return;case 56:modReg=$ctx.value;$ctx.state=55;break;case 55:$ctx.state=('layout_before'in theme)?77:69;break;case 77:$__14=true;$__15=false;$__16=undefined;$ctx.state=78;break;case 78:$ctx.pushTry(64,65);$ctx.state=67;break;case 67:$__12=void 0,$__11=(theme.layout_before)[Symbol.iterator]();$ctx.state=63;break;case 63:$ctx.state=(!($__14=($__12=$__11.next()).done))?59:61;break;case 58:$__14=true;$ctx.state=63;break;case 59:layoutBefore=$__12.value;$ctx.state=60;break;case 60:Promise.resolve(this.loadLayout(modReg.expandPath(layoutBefore))).then($ctx.createCallback(58),$ctx.errback);return;case 61:$ctx.popTry();$ctx.state=65;$ctx.finallyFallThrough=69;break;case 64:$ctx.popTry();$ctx.maybeUncatchable();$__17=$ctx.storedException;$ctx.state=70;break;case 70:$__15=true;$__16=$__17;$ctx.state=65;$ctx.finallyFallThrough=69;break;case 65:$ctx.popTry();$ctx.state=76;break;case 76:try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}
$ctx.state=74;break;case 69:evnt.fire('Layout::loadTheme:after',{'theme_name':themeName,'theme':theme});$ctx.state=90;break;case 90:$ctx.returnValue=true;$ctx.state=81;break;case 81:$ctx.state=-2;break;case 45:$ctx.state=$ctx.finallyFallThrough;break;case 74:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"addAllViewsDir",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var rootDir,prefix,curModule,modReg;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:rootDir=$arguments[0]!==(void 0)?$arguments[0]:null;prefix=$arguments[1]!==(void 0)?$arguments[1]:'';curModule=$arguments[2]!==(void 0)?$arguments[2]:null;$ctx.state=11;break;case 11:$ctx.state=(!curModule)?1:5;break;case 1:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(3),$ctx.errback);return;case 3:modReg=$ctx.value;$ctx.state=2;break;case 2:curModule=modReg.currentModuleName();$ctx.state=5;break;case 5:this._addViewsDirs.push([rootDir,prefix,curModule]);$ctx.state=13;break;case 13:$ctx.returnValue=this;$ctx.state=8;break;case 8:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"loadLayout",{value:$traceurRuntime.initTailRecursiveFunction(function(layoutFilename){return $traceurRuntime.call(function(layoutFilename){var layoutData,$__53,$__54,$__55,$__56,$__57,$__58,$__59,$__60,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__53=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__53).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__54=$ctx.value;$ctx.state=2;break;case 2:$__55=$__54.debug;$__56=$__55.call($__54,'LAYOUT.LOAD: '+layoutFilename);$ctx.state=7;break;case 7:$ctx.pushTry(22,null);$ctx.state=25;break;case 25:Promise.resolve(System.import(layoutFilename)).then($ctx.createCallback(10),$ctx.errback);return;case 10:layoutData=$ctx.value;$ctx.state=9;break;case 9:layoutData=layoutData.default;$ctx.state=14;break;case 14:Promise.resolve(this.addLayout(layoutData)).then($ctx.createCallback(12),$ctx.errback);return;case 12:$ctx.popTry();$ctx.state=27;break;case 22:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=18;break;case 18:$__57=this.logger;$ctx.state=19;break;case 19:Promise.resolve($__57).then($ctx.createCallback(17),$ctx.errback);return;case 17:$__58=$ctx.value;$ctx.state=16;break;case 16:$__59=$__58.warn;$__60=$__59.call($__58,'LAYOUT.LOAD.MISSING: '+layoutFilename);$ctx.state=27;break;case 27:$ctx.returnValue=this;$ctx.state=30;break;case 30:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"addLayout",{value:$traceurRuntime.initTailRecursiveFunction(function(layoutName){return $traceurRuntime.call(function(layoutName){var layout,l,$__61,$__62,$__63,$__64,def,$__65,$__66,$__67,$__68,$__69,$__70,$__71,$__72,$__73,$__74,$__75,$__76;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:layout=$arguments[1]!==(void 0)?$arguments[1]:null;$ctx.state=48;break;case 48:$ctx.state=((typeof layoutName==='undefined'?'undefined':$traceurRuntime.typeof(layoutName))==="object")?13:17;break;case 13:$__61=[];$__62=layoutName;for($__63 in $__62)
$__61.push($__63);$ctx.state=14;break;case 14:$__64=0;$ctx.state=12;break;case 12:$ctx.state=($__64<$__61.length)?6:10;break;case 2:$__64++;$ctx.state=12;break;case 6:l=$__61[$__64];$ctx.state=7;break;case 7:$ctx.state=(!(l in $__62))?2:4;break;case 4:def=layoutName[l];$ctx.state=9;break;case 9:Promise.resolve(this.addLayout(l,def)).then($ctx.createCallback(2),$ctx.errback);return;case 10:$ctx.returnValue=this;$ctx.state=16;break;case 16:$ctx.state=-2;break;case 17:$ctx.state=(!Array.isArray(layout))?22:42;break;case 22:$__65=this.logger;$ctx.state=23;break;case 23:Promise.resolve($__65).then($ctx.createCallback(21),$ctx.errback);return;case 21:$__66=$ctx.value;$ctx.state=20;break;case 20:$__67=$__66.debug;$__68=$__67.call($__66,'LAYOUT.ADD '+layoutName+': Invalid or empty layout');$ctx.state=25;break;case 42:$ctx.state=(!this._layouts.has(layoutName))?29:38;break;case 29:$__69=this.logger;$ctx.state=30;break;case 30:Promise.resolve($__69).then($ctx.createCallback(28),$ctx.errback);return;case 28:$__70=$ctx.value;$ctx.state=27;break;case 27:$__71=$__70.debug;$__72=$__71.call($__70,'LAYOUT.ADD '+layoutName);$ctx.state=32;break;case 32:this._layouts.set(layoutName,layout);$ctx.state=25;break;case 38:$__73=this.logger;$ctx.state=39;break;case 39:Promise.resolve($__73).then($ctx.createCallback(37),$ctx.errback);return;case 37:$__74=$ctx.value;$ctx.state=36;break;case 36:$__75=$__74.warn;$__76=$__75.call($__74,'!!NOT WORKING!! LAYOUT.UPDATE '+layoutName);$ctx.state=25;break;case 25:$ctx.returnValue=this;$ctx.state=45;break;case 45:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"applyLayout",{value:$traceurRuntime.initTailRecursiveFunction(function(layoutName){return $traceurRuntime.call(function(layoutName){var util,callbacks,d,$__7,$__8,$__9,$__5,$__4,r,clbClass,exists,key,callback,cb,$__14,$__15,$__16,$__12,$__11,$__77,$__78,$__79,$__80,$__81,$__82,$__83,$__84,$__85,$__86,$__87,$__88,$__10,$__17;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!this._layouts.has(layoutName))?4:10;break;case 4:$__77=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__77).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__78=$ctx.value;$ctx.state=2;break;case 2:$__79=$__78.debug;$__80=$__79.call($__78,'LAYOUT.EMPTY '+layoutName);$ctx.state=7;break;case 7:$ctx.returnValue=this;$ctx.state=9;break;case 9:$ctx.state=-2;break;case 10:$__81=this.logger;$ctx.state=16;break;case 16:Promise.resolve($__81).then($ctx.createCallback(14),$ctx.errback);return;case 14:$__82=$ctx.value;$ctx.state=13;break;case 13:$__83=$__82.debug;$__84=$__83.call($__82,'LAYOUT.APPLY '+layoutName);$ctx.state=18;break;case 18:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(21),$ctx.errback);return;case 21:util=$ctx.value;$ctx.state=20;break;case 20:callbacks=[];$__7=true;$__8=false;$__9=undefined;$ctx.state=105;break;case 105:$ctx.pushTry(66,67);$ctx.state=69;break;case 69:$__5=void 0,$__4=(this._layouts.get(layoutName))[Symbol.iterator]();$ctx.state=65;break;case 65:$ctx.state=(!($__7=($__5=$__4.next()).done))?61:63;break;case 52:$__7=true;$ctx.state=65;break;case 61:d=$__5.value;$ctx.state=62;break;case 62:d['layout_name']=layoutName;$ctx.state=58;break;case 58:$ctx.state=('if'in d)?31:29;break;case 31:r=d['if'].split('.');$ctx.state=32;break;case 32:Promise.resolve(Class.i(r[0])).then($ctx.createCallback(24),$ctx.errback);return;case 24:clbClass=$ctx.value;$ctx.state=23;break;case 23:Promise.resolve(this.methodExists(clbClass,r[1])).then($ctx.createCallback(27),$ctx.errback);return;case 27:exists=$ctx.value;$ctx.state=26;break;case 26:$ctx.state=(!exists||!clbClass[r[1]]())?52:29;break;case 29:$ctx.state=(!('type'in d))?39:42;break;case 39:key=Object.keys(this._metaDirectives).find($traceurRuntime.initTailRecursiveFunction(function(element,index,array){return $traceurRuntime.call(function(element,index,array){return $traceurRuntime.continuation(util.contains,util,[Object.keys(d),element]);},this,arguments);}),this);$ctx.state=40;break;case 40:$ctx.state=(!(key in this._metaDirectives))?36:35;break;case 36:throw new Error('Unknown layout directive: ');$ctx.state=52;break;case 35:d['type']=key.trim();d['name']=d[key].trim();$ctx.state=42;break;case 42:callback=this._metaDirectives[d['type']];$ctx.state=60;break;case 60:$ctx.state=(d['type']==='remove')?53:54;break;case 53:$ctx.state=(d['name']==='ALL')?47:52;break;case 47:$__85=this.logger;$ctx.state=48;break;case 48:Promise.resolve($__85).then($ctx.createCallback(46),$ctx.errback);return;case 46:$__86=$ctx.value;$ctx.state=45;break;case 45:$__87=$__86.debug;$__88=$__87.call($__86,'LAYOUT.REMOVE ALL');$ctx.state=50;break;case 50:callbacks=[];$ctx.state=52;break;case 54:callbacks.push([callback,d]);$ctx.state=52;break;case 63:$ctx.popTry();$ctx.state=67;$ctx.finallyFallThrough=71;break;case 66:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=72;break;case 72:$__8=true;$__9=$__10;$ctx.state=67;$ctx.finallyFallThrough=71;break;case 67:$ctx.popTry();$ctx.state=78;break;case 78:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=76;break;case 71:$__14=true;$__15=false;$__16=undefined;$ctx.state=107;break;case 107:$ctx.pushTry(88,89);$ctx.state=91;break;case 91:$__12=void 0,$__11=(callbacks)[Symbol.iterator]();$ctx.state=87;break;case 87:$ctx.state=(!($__14=($__12=$__11.next()).done))?83:85;break;case 80:$__14=true;$ctx.state=87;break;case 83:cb=$__12.value;$ctx.state=84;break;case 84:console.log(cb);$ctx.state=82;break;case 82:Promise.resolve(this[cb[0]](cb[1])).then($ctx.createCallback(80),$ctx.errback);return;case 85:$ctx.popTry();$ctx.state=89;$ctx.finallyFallThrough=93;break;case 88:$ctx.popTry();$ctx.maybeUncatchable();$__17=$ctx.storedException;$ctx.state=94;break;case 94:$__15=true;$__16=$__17;$ctx.state=89;$ctx.finallyFallThrough=93;break;case 89:$ctx.popTry();$ctx.state=100;break;case 100:try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}
$ctx.state=98;break;case 93:$ctx.returnValue=this;$ctx.state=102;break;case 102:$ctx.state=-2;break;case 76:$ctx.state=$ctx.finallyFallThrough;break;case 98:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"hookView",{value:$traceurRuntime.initTailRecursiveFunction(function(hookName,viewName){return $traceurRuntime.call(function(hookName,viewName){var args,params,viewParams,view,p,$__89,$__90,$__91,$__92;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[2]!==(void 0)?$arguments[2]:{};params=$arguments[3]!==(void 0)?$arguments[3]:{};$ctx.state=23;break;case 23:$ctx.state=(Array.isArray(viewName))?3:2;break;case 3:viewParams=viewName;viewName=viewParams.shift();$ctx.state=4;break;case 4:Promise.resolve(this.addView(viewName,viewParams)).then($ctx.createCallback(2),$ctx.errback);return;case 2:view=this.view(viewName);$ctx.state=25;break;case 25:$ctx.state=(!view)?9:15;break;case 9:$__89=this.logger;$ctx.state=10;break;case 10:Promise.resolve($__89).then($ctx.createCallback(8),$ctx.errback);return;case 8:$__90=$ctx.value;$ctx.state=7;break;case 7:$__91=$__90.warn;$__92=$__91.call($__90,'Invalid view name: '+viewName);$ctx.state=12;break;case 12:$ctx.returnValue=this;$ctx.state=14;break;case 14:$ctx.state=-2;break;case 15:p={};if(!('alias'in params)){p['alias']=viewName;}
$ctx.state=27;break;case 27:Promise.resolve(this.hook(hookName,view,args,p)).then($ctx.createCallback(18),$ctx.errback);return;case 18:$ctx.returnValue=this;$ctx.state=20;break;case 20:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"hook",{value:$traceurRuntime.initTailRecursiveFunction(function(hookName,callback){return $traceurRuntime.call(function(hookName,callback){var args,params,evt;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[2]!==(void 0)?$arguments[2]:{};params=$arguments[3]!==(void 0)?$arguments[3]:{};$ctx.state=10;break;case 10:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(3),$ctx.errback);return;case 3:evt=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(evt.on('Layout::hook:'+hookName,callback,args,params)).then($ctx.createCallback(5),$ctx.errback);return;case 5:$ctx.returnValue=this;$ctx.state=7;break;case 7:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"metaDirectiveIncludeCallback",{value:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){var layoutsApplied;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(args['name']==args['layout_name'])?4:3;break;case 4:throw new Error('Layout recursion detected: '+args['name']);$ctx.state=5;break;case 5:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:layoutsApplied=[];$ctx.state=14;break;case 14:$ctx.state=(args['name']in layoutsApplied&&!('repeat'in args))?7:9;break;case 7:$ctx.returnValue=undefined;$ctx.state=8;break;case 8:$ctx.state=-2;break;case 9:layoutsApplied.push(args['name']);$ctx.state=16;break;case 16:Promise.resolve(this.applyLayout(args['name'])).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"metaDirectiveViewCallback",{value:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){var view,k,$__7,$__8,$__9,$__5,$__4,key,$__14,$__15,$__16,$__12,$__11,i,$__21,$__22,$__23,$__19,$__18,job,method,exist,$__93,$__94,$__95,$__96,$__24;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:view=this.view(args['name']);console.log(view);if('set'in args){$__7=true;$__8=false;$__9=undefined;try{for($__5=void 0,$__4=(Object.keys(args['set']))[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){k=$__5.value;{view.set(k,args['set'][k]);}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}}
if('param'in args){$__14=true;$__15=false;$__16=undefined;try{for($__12=void 0,$__11=(Object.keys(args['param']))[Symbol.iterator]();!($__14=($__12=$__11.next()).done);$__14=true){key=$__12.value;{view.setParam(key,args['param'][key]);}}}catch($__17){$__15=true;$__16=$__17;}finally{try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}}}
$ctx.state=38;break;case 38:$ctx.state=('do'in args)?34:-2;break;case 34:$__21=true;$__22=false;$__23=undefined;$ctx.state=35;break;case 35:$ctx.pushTry(21,22);$ctx.state=24;break;case 24:$__19=void 0,$__18=(args['do'])[Symbol.iterator]();$ctx.state=20;break;case 20:$ctx.state=(!($__21=($__19=$__18.next()).done))?16:18;break;case 12:$__21=true;$ctx.state=20;break;case 16:i=$__19.value;$ctx.state=17;break;case 17:job=JSON.parse(JSON.stringify(i));method=job.shift();$ctx.state=15;break;case 15:$__93=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__93).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__94=$ctx.value;$ctx.state=2;break;case 2:$__95=$__94.debug;$__96=$__95.call($__94,'LAYOUT.view.do '+method);$ctx.state=7;break;case 7:Promise.resolve(this.methodExists(view,method)).then($ctx.createCallback(10),$ctx.errback);return;case 10:exist=$ctx.value;$ctx.state=9;break;case 9:$ctx.state=(exist)?11:12;break;case 11:Promise.resolve(view[method](job)).then($ctx.createCallback(12),$ctx.errback);return;case 18:$ctx.popTry();$ctx.state=22;$ctx.finallyFallThrough=-2;break;case 21:$ctx.popTry();$ctx.maybeUncatchable();$__24=$ctx.storedException;$ctx.state=27;break;case 27:$__22=true;$__23=$__24;$ctx.state=22;$ctx.finallyFallThrough=-2;break;case 22:$ctx.popTry();$ctx.state=33;break;case 33:try{if(!$__21&&$__18.return!=null){$__18.return();}}finally{if($__22){throw $__23;}}
$ctx.state=31;break;case 31:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"metaDirectiveHookCallback",{value:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){var hookArgs,params,v,$__7,$__8,$__9,$__5,$__4,t,obj,$__14,$__15,$__16,$__12,$__11,$__10,$__17;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:hookArgs=args['args']||{};params=args['params']||{};$ctx.state=56;break;case 56:$ctx.state=('views'in args)?24:27;break;case 24:if(!Array.isArray(args.views)){args.views=[args.views];}
$__7=true;$__8=false;$__9=undefined;$ctx.state=25;break;case 25:$ctx.pushTry(11,12);$ctx.state=14;break;case 14:$__5=void 0,$__4=(args.views)[Symbol.iterator]();$ctx.state=10;break;case 10:$ctx.state=(!($__7=($__5=$__4.next()).done))?6:8;break;case 4:$__7=true;$ctx.state=10;break;case 6:v=$__5.value;$ctx.state=7;break;case 7:$ctx.state=(v[0]==='^')?4:1;break;case 1:Promise.resolve(this.hookView(args.name,v,hookArgs,params)).then($ctx.createCallback(4),$ctx.errback);return;case 8:$ctx.popTry();$ctx.state=12;$ctx.finallyFallThrough=16;break;case 11:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=17;break;case 17:$__8=true;$__9=$__10;$ctx.state=12;$ctx.finallyFallThrough=16;break;case 12:$ctx.popTry();$ctx.state=23;break;case 23:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=21;break;case 16:if('use_meta'in args){}
$ctx.state=27;break;case 27:$ctx.state=('text'in args)?49:41;break;case 49:if(!Array.isArray(args.text)){args.text=[args.text];}
$__14=true;$__15=false;$__16=undefined;$ctx.state=50;break;case 50:$ctx.pushTry(36,37);$ctx.state=39;break;case 39:$__12=void 0,$__11=(args.text)[Symbol.iterator]();$ctx.state=35;break;case 35:$ctx.state=(!($__14=($__12=$__11.next()).done))?31:33;break;case 30:$__14=true;$ctx.state=35;break;case 31:t=$__12.value;$ctx.state=32;break;case 32:Promise.resolve(this.hook(args.name,function(obj){return obj.text||'';},{text:t})).then($ctx.createCallback(30),$ctx.errback);return;case 33:$ctx.popTry();$ctx.state=37;$ctx.finallyFallThrough=41;break;case 36:$ctx.popTry();$ctx.maybeUncatchable();$__17=$ctx.storedException;$ctx.state=42;break;case 42:$__15=true;$__16=$__17;$ctx.state=37;$ctx.finallyFallThrough=41;break;case 37:$ctx.popTry();$ctx.state=48;break;case 48:try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}
$ctx.state=46;break;case 41:$ctx.returnValue=undefined;$ctx.state=53;break;case 53:$ctx.state=-2;break;case 21:$ctx.state=$ctx.finallyFallThrough;break;case 46:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"metaDirectiveRootCallback",{value:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){var $__97,$__98,$__99,$__100,$__101;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:this.rootView=args['name'];$ctx.state=9;break;case 9:$__97=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__97).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__98=$ctx.value;$ctx.state=2;break;case 2:$__99=$__98.debug;$__100=args['name'];$__101=$__99.call($__98,'SET ROOT VIEW: '+$__100);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"metaDirectiveCallback",{value:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"metaDirectiveRemoveCallback",{value:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"objectMerge",{value:function(){for(var rest=[],$__25=0;$__25<arguments.length;$__25++)
rest[$__25]=arguments[$__25];var base=rest.shift();var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(rest)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){var append=$__5.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
var key=void 0;for(key in append){if(key in base){base[key]=this.objectMerge(base[key],append[key]);}else{Object.assign(base,append);}}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
return base;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"arrayMerge",{value:function(){var $__27;for(var rest=[],$__26=0;$__26<arguments.length;$__26++)
rest[$__26]=arguments[$__26];var base=rest.shift();var $__14=true;var $__15=false;var $__16=undefined;try{for(var $__12=void 0,$__11=(rest)[Symbol.iterator]();!($__14=($__12=$__11.next()).done);$__14=true){var append=$__12.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
if(Array.isArray(append)&&Array.isArray(base)){var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(append)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){var val=$__5.value;{if(!!~base.indexOf(val)){base[base.indexOf(val)]=val;append.splice(append.indexOf(val),1);}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
($__27=base).push.apply($__27,$traceurRuntime.spread(append));}}}}catch($__17){$__15=true;$__16=$__17;}finally{try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}}
return base;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"methodExists",{value:$traceurRuntime.initTailRecursiveFunction(function(obj,method){return $traceurRuntime.call(function(obj,method){var clbClass,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.pushTry(9,null);$ctx.state=12;break;case 12:clbClass=obj;$ctx.state=5;break;case 5:$ctx.returnValue=typeof clbClass[method]==='function';$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.popTry();$ctx.state=-2;break;case 9:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=6;break;case 6:$ctx.returnValue=false;$ctx.state=7;break;case 7:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),$__3),{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Model_Layout);}};});
System.register("/app/awy/core/model/logger.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/logger.js";var instances,singletonEnforcer,Core_Model_Logger;return{setters:[],execute:function(){instances={};singletonEnforcer={};Core_Model_Logger=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Core_Model_Logger(id,key){$traceurRuntime.superConstructor(Core_Model_Logger).call(this);this.id=id||'Default';this.slice=Array.prototype.slice;this.levels={none:0,error:1,warn:2,info:3,debug:4};this._level=this.levels.debug;return instances[this.id]||(instances[this.id]=this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_Logger,{setLevel:function(level){this._level=level;},log:function(level,args){this[level].call(this,args);},debug:function(){var $__7;for(var rest=[],$__3=0;$__3<arguments.length;$__3++)
rest[$__3]=arguments[$__3];if(this._level<4){return;}
($__7=console).debug.apply($__7,$traceurRuntime.spread([("DEBUG ["+this.id+"]")],rest));},info:function(){var $__7;for(var rest=[],$__4=0;$__4<arguments.length;$__4++)
rest[$__4]=arguments[$__4];if(this._level<3){return;}
($__7=console).info.apply($__7,$traceurRuntime.spread([("INFO ["+this.id+"]")],rest));},warn:function(){var $__7;for(var rest=[],$__5=0;$__5<arguments.length;$__5++)
rest[$__5]=arguments[$__5];if(this._level<2){return;}
($__7=console).warn.apply($__7,$traceurRuntime.spread([("WARN ["+this.id+"]")],rest));},error:function(){var $__7;for(var rest=[],$__6=0;$__6<arguments.length;$__6++)
rest[$__6]=arguments[$__6];if(this._level<1){return;}
($__7=console).error.apply($__7,$traceurRuntime.spread([("ERROR ["+this.id+"]")],rest));}},{getInstance:function(id){return instances[id]||(instances[id]=new Core_Model_Logger(id,singletonEnforcer));}},$__super]);},this,arguments);})(Class);Object.defineProperty(Core_Model_Logger,"parameters",{get:function(){return[[$traceurRuntime.type.string],[Object]];}});Object.defineProperty(Core_Model_Logger.prototype.setLevel,"parameters",{get:function(){return[[$traceurRuntime.type.number]];}});Object.defineProperty(Core_Model_Logger.getInstance,"parameters",{get:function(){return[[$traceurRuntime.type.string]];}});$__export('default',Core_Model_Logger);}};});
System.register("/app/awy/core/model/migrate.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/migrate.js";var Awy_Core_Model_Migrate;return{setters:[],execute:function(){Awy_Core_Model_Migrate=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_Model_Migrate(){$traceurRuntime.superConstructor(Awy_Core_Model_Migrate).call(this);this.logger=Class.i('awy_core_model_logger','Migrate');}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Model_Migrate,{methodExists:$traceurRuntime.initTailRecursiveFunction(function(obj,method){return $traceurRuntime.call(function(obj,method){var clbClass,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.pushTry(10,null);$ctx.state=13;break;case 13:Promise.resolve(Class.i(obj)).then($ctx.createCallback(3),$ctx.errback);return;case 3:clbClass=$ctx.value;$ctx.state=2;break;case 2:$ctx.returnValue=typeof clbClass[method]==='function';$ctx.state=5;break;case 5:$ctx.state=-2;break;case 6:$ctx.popTry();$ctx.state=-2;break;case 10:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=7;break;case 7:$ctx.returnValue=false;$ctx.state=8;break;case 8:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),classExists:$traceurRuntime.initTailRecursiveFunction(function(obj){return $traceurRuntime.call(function(obj){var $__41,$__42,$__43;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__41=this.methodExists;$__42=$__41.call(this,obj,'constructor');$ctx.state=5;break;case 5:Promise.resolve($__42).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__43=$ctx.value;$ctx.state=2;break;case 2:$ctx.returnValue=$__43;$ctx.state=7;break;case 7:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),objectMerge:function(){var $__35;for(var rest=[],$__31=0;$__31<arguments.length;$__31++)
rest[$__31]=arguments[$__31];var base=rest.shift();var $__13=true;var $__14=false;var $__15=undefined;try{for(var $__11=void 0,$__10=(rest)[Symbol.iterator]();!($__13=($__11=$__10.next()).done);$__13=true){var append=$__11.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
if(Array.isArray(append)&&Array.isArray(base)){var $__6=true;var $__7=false;var $__8=undefined;try{for(var $__4=void 0,$__3=(append)[Symbol.iterator]();!($__6=($__4=$__3.next()).done);$__6=true){var val=$__4.value;{if(!!~base.indexOf(val)){base[base.indexOf(val)]=val;append.splice(append.indexOf(val),1);}}}}catch($__9){$__7=true;$__8=$__9;}finally{try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}}
($__35=base).push.apply($__35,$traceurRuntime.spread(append));}
var key=void 0;for(key in append){if(key in base){base[key]=this.objectMerge(base[key],append[key]);}else{Object.assign(base,append);}}}}}catch($__16){$__14=true;$__15=$__16;}finally{try{if(!$__13&&$__10.return!=null){$__10.return();}}finally{if($__14){throw $__15;}}}
return base;},getMigrationData:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var $__33,$__34,modReg,migration,$__6,$__7,$__8,$__4,$__3,$__32,modName,mod,defaultExist,customExist,connName,$__9,$__44,$__45,$__46,$__47,$__48,$__49,$__50,$__51;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:modReg=$arguments[0]!==(void 0)?$arguments[0]:null;migration={};$ctx.state=54;break;case 54:$ctx.state=(!modReg)?1:2;break;case 1:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(3),$ctx.errback);return;case 3:modReg=$ctx.value;$ctx.state=2;break;case 2:$__6=true;$__7=false;$__8=undefined;$ctx.state=56;break;case 56:$ctx.pushTry(23,24);$ctx.state=26;break;case 26:$__4=void 0,$__3=(modReg._modules)[Symbol.iterator]();$ctx.state=22;break;case 22:$ctx.state=(!($__6=($__4=$__3.next()).done))?18:20;break;case 17:$__6=true;$ctx.state=22;break;case 18:$__32=$__4.value,modName=($__33=$__32[Symbol.iterator](),($__34=$__33.next()).done?void 0:$__34.value),mod=($__34=$__33.next()).done?void 0:$__34.value;$ctx.state=19;break;case 19:$ctx.state=(!('migrate'in mod))?5:10;break;case 5:Promise.resolve(this.classExists(mod.module_name+'_migrate')).then($ctx.createCallback(7),$ctx.errback);return;case 7:defaultExist=$ctx.value;$ctx.state=6;break;case 6:if(defaultExist){mod.migrate=mod.module_name+'_migrate';}
$ctx.state=9;break;case 10:Promise.resolve(this.classExists(mod.migrate)).then($ctx.createCallback(12),$ctx.errback);return;case 12:customExist=$ctx.value;$ctx.state=11;break;case 11:if(!customExist){delete mod.migrate;}
$ctx.state=9;break;case 9:if(mod.version&&mod.migrate){connName=mod.db_connection_name||'DEFAULT';if(!(connName in migration)){migration[connName]={};}
migration[connName][modName]={'code_version':mod.version,'script':mod.migrate,'run_status':mod.run_status,'module_name':modName,'connection_name':connName};}
$ctx.state=17;break;case 20:$ctx.popTry();$ctx.state=24;$ctx.finallyFallThrough=28;break;case 23:$ctx.popTry();$ctx.maybeUncatchable();$__9=$ctx.storedException;$ctx.state=29;break;case 29:$__7=true;$__8=$__9;$ctx.state=24;$ctx.finallyFallThrough=28;break;case 24:$ctx.popTry();$ctx.state=35;break;case 35:try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}
$ctx.state=33;break;case 28:$__44=this.logger;$ctx.state=40;break;case 40:Promise.resolve($__44).then($ctx.createCallback(38),$ctx.errback);return;case 38:$__45=$ctx.value;$ctx.state=37;break;case 37:$__46=$__45.debug;$__47=$__46.call($__45,"MIGRATION DATA: ");$ctx.state=42;break;case 42:$__48=this.logger;$ctx.state=47;break;case 47:Promise.resolve($__48).then($ctx.createCallback(45),$ctx.errback);return;case 45:$__49=$ctx.value;$ctx.state=44;break;case 44:$__50=$__49.debug;$__51=$__50.call($__49,migration);$ctx.state=49;break;case 49:$ctx.returnValue=migration;$ctx.state=51;break;case 51:$ctx.state=-2;break;case 33:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),migrateModules:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var limitModules,force,redirectUrl,config,modReg,util,req,db,migration,num,connectionName,$__52,$__53,$__54,$__55,modules,$__6,$__7,$__8,$__4,$__3,modName,mod,su,modulesSnapshotJson,modulesSnapshot,$__13,$__14,$__15,$__11,$__10,modName$__36,mod$__37,migrationRulesArray,$__56,$__57,$__58,$__59,modules$__38,$__20,$__21,$__22,$__18,$__17,modName$__39,mod$__40,action,clbClass,rule,f,rules,migrationRule,$__27,$__28,$__29,$__25,$__24,ff,$__60,$__61,$__62,$__63,$__64,$__65,$__66,$__67,$__9,$__68,$__69,$__70,$__71,$__72,$__73,$__74,$__75,$__76,$__77,$__78,$__79,$__16,$__80,$__81,$__82,$__83,$__84,$__85,$__23,$__86,$__87,$__88,$__89,$__90,$__91,$__92,$__93,$__94,$__95,$__96,$__97;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:limitModules=$arguments[0]!==(void 0)?$arguments[0]:false;force=$arguments[1]!==(void 0)?$arguments[1]:false;redirectUrl=$arguments[2]!==(void 0)?$arguments[2]:null;$ctx.state=233;break;case 233:$ctx.state=(!force)?1:6;break;case 1:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:$ctx.state=(config.get('install_status')!=='installed'||!config.get('db/implicit_migration'))?4:6;break;case 4:$ctx.returnValue=undefined;$ctx.state=5;break;case 5:$ctx.state=-2;break;case 6:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(11),$ctx.errback);return;case 11:modReg=$ctx.value;$ctx.state=10;break;case 10:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(14),$ctx.errback);return;case 14:util=$ctx.value;$ctx.state=13;break;case 13:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(17),$ctx.errback);return;case 17:req=$ctx.value;$ctx.state=16;break;case 16:Promise.resolve(Class.i('awy_core_model_db')).then($ctx.createCallback(20),$ctx.errback);return;case 20:db=$ctx.value;$ctx.state=19;break;case 19:Promise.resolve(this.getMigrationData(modReg)).then($ctx.createCallback(23),$ctx.errback);return;case 23:migration=$ctx.value;$ctx.state=22;break;case 22:$ctx.state=(!Object.keys(migration).length)?24:26;break;case 24:$ctx.returnValue=undefined;$ctx.state=25;break;case 25:$ctx.state=-2;break;case 26:if(typeof limitModules==='string'){limitModules=limitModules.split(/\s*,\s*/);}
num=0;$ctx.state=235;break;case 235:$__52=[];$__53=migration;for($__54 in $__53)
$__52.push($__54);$ctx.state=143;break;case 143:$__55=0;$ctx.state=141;break;case 141:$ctx.state=($__55<$__52.length)?131:139;break;case 120:$__55++;$ctx.state=141;break;case 131:connectionName=$__52[$__55];$ctx.state=132;break;case 132:$ctx.state=(!(connectionName in $__53))?120:129;break;case 129:modules=migration[connectionName];$ctx.state=134;break;case 134:$ctx.state=(limitModules!==false)?67:59;break;case 67:$__6=true;$__7=false;$__8=undefined;$ctx.state=68;break;case 68:$ctx.pushTry(54,55);$ctx.state=57;break;case 57:$__4=void 0,$__3=(Object.keys(modules))[Symbol.iterator]();$ctx.state=53;break;case 53:$ctx.state=(!($__6=($__4=$__3.next()).done))?49:51;break;case 48:$__6=true;$ctx.state=53;break;case 49:modName=$__4.value;$ctx.state=50;break;case 50:mod=modules[modName];$ctx.state=46;break;case 46:$ctx.state=((true===limitModules&&mod['run_status']==='LOADED')||(Array.isArray(limitModules)&&util.contains(limitModules,modName)))?31:36;break;case 31:$__60=this.logger;$ctx.state=32;break;case 32:Promise.resolve($__60).then($ctx.createCallback(30),$ctx.errback);return;case 30:$__61=$ctx.value;$ctx.state=29;break;case 29:$__62=$__61.debug;$__63=$__62.call($__61,"KEEP MIGRATION FOR: "+modName);$ctx.state=48;break;case 36:$__64=this.logger;$ctx.state=42;break;case 42:Promise.resolve($__64).then($ctx.createCallback(40),$ctx.errback);return;case 40:$__65=$ctx.value;$ctx.state=39;break;case 39:$__66=$__65.debug;$__67=$__66.call($__65,"SKIP MIGRATION FOR: "+modName);$ctx.state=44;break;case 44:delete modules[modName];$ctx.state=48;break;case 51:$ctx.popTry();$ctx.state=55;$ctx.finallyFallThrough=59;break;case 54:$ctx.popTry();$ctx.maybeUncatchable();$__9=$ctx.storedException;$ctx.state=60;break;case 60:$__7=true;$__8=$__9;$ctx.state=55;$ctx.finallyFallThrough=59;break;case 55:$ctx.popTry();$ctx.state=66;break;case 66:try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}
$ctx.state=64;break;case 59:Promise.resolve(db.sudo()).then($ctx.createCallback(72),$ctx.errback);return;case 72:su=$ctx.value;$ctx.state=71;break;case 71:console.log("SUDO: ",su);$ctx.state=136;break;case 136:Promise.resolve(db.rget('modules')).then($ctx.createCallback(75),$ctx.errback);return;case 75:modulesSnapshotJson=$ctx.value;$ctx.state=74;break;case 74:modulesSnapshot=JSON.parse(modulesSnapshotJson)||{};Object.keys(modulesSnapshot).forEach($traceurRuntime.initTailRecursiveFunction(function(mKey){return $traceurRuntime.call(function(mKey){var mData;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:mData=modulesSnapshot[mKey];$ctx.state=7;break;case 7:$ctx.state=(mData.last_status==='INSTALLING')?1:3;break;case 1:Promise.resolve(db.rdelete('modules/'+mKey)).then($ctx.createCallback(-2),$ctx.errback);return;case 3:if(mKey in modules){modules[mKey]['schema_version']=mData.schema_version;}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}));$__13=true;$__14=false;$__15=undefined;$ctx.state=138;break;case 138:$ctx.pushTry(115,116);$ctx.state=118;break;case 118:$__11=void 0,$__10=(Object.keys(modules))[Symbol.iterator]();$ctx.state=114;break;case 114:$ctx.state=(!($__13=($__11=$__10.next()).done))?110:112;break;case 109:$__13=true;$ctx.state=114;break;case 110:modName$__36=$__11.value;$ctx.state=111;break;case 111:mod$__37=modules[modName$__36];$ctx.state=107;break;case 107:$ctx.state=(!('code_version'in mod$__37))?79:84;break;case 79:$__68=this.logger;$ctx.state=80;break;case 80:Promise.resolve($__68).then($ctx.createCallback(78),$ctx.errback);return;case 78:$__69=$ctx.value;$ctx.state=77;break;case 77:$__70=$__69.warn;$__71=$__70.call($__69,modName$__36+' not currently active');$ctx.state=109;break;case 84:$ctx.state=('schema_version'in mod$__37&&mod$__37['schema_version']===mod$__37['code_version'])?89:94;break;case 89:$__72=this.logger;$ctx.state=90;break;case 90:Promise.resolve($__72).then($ctx.createCallback(88),$ctx.errback);return;case 88:$__73=$ctx.value;$ctx.state=87;break;case 87:$__74=$__73.warn;$__75=$__74.call($__73,modName$__36+' no migration necessary');$ctx.state=109;break;case 94:$ctx.state=(!('script'in mod$__37))?99:104;break;case 99:$__76=this.logger;$ctx.state=100;break;case 100:Promise.resolve($__76).then($ctx.createCallback(98),$ctx.errback);return;case 98:$__77=$ctx.value;$ctx.state=97;break;case 97:$__78=$__77.warn;$__79=$__78.call($__77,"No migration script found: "+modName$__36);$ctx.state=109;break;case 104:modules[modName$__36]['migrate']=true;num++;$ctx.state=109;break;case 112:$ctx.popTry();$ctx.state=116;$ctx.finallyFallThrough=120;break;case 115:$ctx.popTry();$ctx.maybeUncatchable();$__16=$ctx.storedException;$ctx.state=121;break;case 121:$__14=true;$__15=$__16;$ctx.state=116;$ctx.finallyFallThrough=120;break;case 116:$ctx.popTry();$ctx.state=127;break;case 127:try{if(!$__13&&$__10.return!=null){$__10.return();}}finally{if($__14){throw $__15;}}
$ctx.state=125;break;case 139:$ctx.state=(!num)?144:146;break;case 144:$ctx.returnValue=undefined;$ctx.state=145;break;case 145:$ctx.state=-2;break;case 146:migrationRulesArray=[];$ctx.state=237;break;case 237:$__56=[];$__57=migration;for($__58 in $__57)
$__56.push($__58);$ctx.state=206;break;case 206:$__59=0;$ctx.state=204;break;case 204:$ctx.state=($__59<$__56.length)?198:202;break;case 187:$__59++;$ctx.state=204;break;case 198:connectionName=$__56[$__59];$ctx.state=199;break;case 199:$ctx.state=(!(connectionName in $__57))?187:196;break;case 196:modules$__38=migration[connectionName];$__20=true;$__21=false;$__22=undefined;$ctx.state=201;break;case 201:$ctx.pushTry(182,183);$ctx.state=185;break;case 185:$__18=void 0,$__17=(Object.keys(modules$__38))[Symbol.iterator]();$ctx.state=181;break;case 181:$ctx.state=(!($__20=($__18=$__17.next()).done))?177:179;break;case 167:$__20=true;$ctx.state=181;break;case 177:modName$__39=$__18.value;$ctx.state=178;break;case 178:mod$__40=modules$__38[modName$__39];$ctx.state=172;break;case 172:$ctx.state=(!('migrate'in mod$__40))?167:149;break;case 149:action=null;$ctx.state=174;break;case 174:Promise.resolve(db.rput({'schema_version':mod$__40['code_version'],'last_upgrade':{".sv":"timestamp"},'last_status':'INSTALLING'},'modules/'+modName$__39)).then($ctx.createCallback(152),$ctx.errback);return;case 152:if(!('schema_version'in mod$__40)){action='install';}else if(util.version_compare(mod$__40.schema_version,mod$__40.code_version,"<")){action='upgrade';}else if(util.version_compare(mod$__40.schema_version,mod$__40.code_version,">")){action='downgrade';}
$ctx.state=176;break;case 176:$ctx.state=(action!==null&&this.methodExists(mod$__40.script,action))?153:167;break;case 153:Promise.resolve(Class.i(mod$__40.script)).then($ctx.createCallback(155),$ctx.errback);return;case 155:clbClass=$ctx.value;$ctx.state=154;break;case 154:Promise.resolve(clbClass[action]()).then($ctx.createCallback(158),$ctx.errback);return;case 158:rule=$ctx.value;$ctx.state=157;break;case 157:rule=rule||{};migrationRulesArray.push(rule);$ctx.state=169;break;case 169:Promise.resolve(db.rpatch({'last_status':'INSTALLED'},'modules/'+modName$__39)).then($ctx.createCallback(160),$ctx.errback);return;case 160:$__80=this.logger;$ctx.state=165;break;case 165:Promise.resolve($__80).then($ctx.createCallback(163),$ctx.errback);return;case 163:$__81=$ctx.value;$ctx.state=162;break;case 162:$__82=$__81.debug;$__83=JSON.stringify;$__84=$__83.call(JSON,rule);$__85=$__82.call($__81,"INCLUDE MIGRATION RULES: "+$__84+" FROM MODULE: "+modName$__39);$ctx.state=167;break;case 179:$ctx.popTry();$ctx.state=183;$ctx.finallyFallThrough=187;break;case 182:$ctx.popTry();$ctx.maybeUncatchable();$__23=$ctx.storedException;$ctx.state=188;break;case 188:$__21=true;$__22=$__23;$ctx.state=183;$ctx.finallyFallThrough=187;break;case 183:$ctx.popTry();$ctx.state=194;break;case 194:try{if(!$__20&&$__17.return!=null){$__17.return();}}finally{if($__21){throw $__22;}}
$ctx.state=192;break;case 202:$ctx.state=(migrationRulesArray.length)?207:-2;break;case 207:Promise.resolve(db.rget('.settings/rules')).then($ctx.createCallback(209),$ctx.errback);return;case 209:f=$ctx.value;$ctx.state=208;break;case 208:rules=JSON.parse(f);$ctx.state=228;break;case 228:$__86=this.logger;$ctx.state=214;break;case 214:Promise.resolve($__86).then($ctx.createCallback(212),$ctx.errback);return;case 212:$__87=$ctx.value;$ctx.state=211;break;case 211:$__88=$__87.debug;$__89=JSON.stringify;$__90=$__89.call(JSON,rules);$__91=$__88.call($__87,"OLD RULES: "+$__90);$ctx.state=216;break;case 216:$__27=true;$__28=false;$__29=undefined;try{for($__25=void 0,$__24=(migrationRulesArray)[Symbol.iterator]();!($__27=($__25=$__24.next()).done);$__27=true){migrationRule=$__25.value;{rules=this.objectMerge(rules,migrationRule);}}}catch($__30){$__28=true;$__29=$__30;}finally{try{if(!$__27&&$__24.return!=null){$__24.return();}}finally{if($__28){throw $__29;}}}
$ctx.state=230;break;case 230:Promise.resolve(db.rput(rules,'.settings/rules')).then($ctx.createCallback(219),$ctx.errback);return;case 219:ff=$ctx.value;$ctx.state=218;break;case 218:$__92=this.logger;$ctx.state=224;break;case 224:Promise.resolve($__92).then($ctx.createCallback(222),$ctx.errback);return;case 222:$__93=$ctx.value;$ctx.state=221;break;case 221:$__94=$__93.debug;$__95=JSON.stringify;$__96=$__95.call(JSON,rules);$__97=$__94.call($__93,"NEW RULES: "+$__96);$ctx.state=-2;break;case 64:$ctx.state=$ctx.finallyFallThrough;break;case 125:$ctx.state=$ctx.finallyFallThrough;break;case 192:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Model_Migrate);}};});
System.register("/app/awy/core/model/module/registry.js",["awy/core/model/module.js"],function($__export){"use strict";var __moduleName="/app/awy/core/model/module/registry.js";var moduleConstants,Core_Model_Module_Registry;return{setters:[function($__m){moduleConstants=$__m;}],execute:function(){Core_Model_Module_Registry=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__3;function Core_Model_Module_Registry(key){$traceurRuntime.superConstructor(Core_Model_Module_Registry).call(this);this.logger=Class.i('awy_core_model_logger','Module_Registry');this.config=[];this._currentModuleName=null;this._currentModuleStack=[];this._modules=new Map();}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_Module_Registry,($__3={},Object.defineProperty($__3,"pushModule",{value:function(name){this._currentModuleStack.push(name);return this;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"popModule",{value:function(){var name=this._currentModuleStack.pop();return this;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"currentModuleName",{value:function(){if(this._currentModuleStack.length>0){return this._currentModuleStack[this._currentModuleStack.length-1];}
return null;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"bootstrap",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var module,$__7,$__8,$__9,$__5,$__4,$__14,$__15,$__16,$__12,$__11,layout,$__10,$__17;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__7=true;$__8=false;$__9=undefined;$ctx.state=58;break;case 58:$ctx.pushTry(12,13);$ctx.state=15;break;case 15:$__5=void 0,$__4=(Array.from(this._modules.values()))[Symbol.iterator]();$ctx.state=11;break;case 11:$ctx.state=(!($__7=($__5=$__4.next()).done))?7:9;break;case 6:$__7=true;$ctx.state=11;break;case 7:module=$__5.value;$ctx.state=8;break;case 8:this.pushModule(module.module_name);$ctx.state=4;break;case 4:Promise.resolve(module.onBeforeBootstrap()).then($ctx.createCallback(2),$ctx.errback);return;case 2:this.popModule();$ctx.state=6;break;case 9:$ctx.popTry();$ctx.state=13;$ctx.finallyFallThrough=17;break;case 12:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=18;break;case 18:$__8=true;$__9=$__10;$ctx.state=13;$ctx.finallyFallThrough=17;break;case 13:$ctx.popTry();$ctx.state=24;break;case 24:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=22;break;case 17:$__14=true;$__15=false;$__16=undefined;$ctx.state=60;break;case 60:$ctx.pushTry(36,37);$ctx.state=39;break;case 39:$__12=void 0,$__11=(Array.from(this._modules.values()))[Symbol.iterator]();$ctx.state=35;break;case 35:$ctx.state=(!($__14=($__12=$__11.next()).done))?31:33;break;case 30:$__14=true;$ctx.state=35;break;case 31:module=$__12.value;$ctx.state=32;break;case 32:this.pushModule(module.module_name);$ctx.state=28;break;case 28:Promise.resolve(module.onBootstrap()).then($ctx.createCallback(26),$ctx.errback);return;case 26:this.popModule();$ctx.state=30;break;case 33:$ctx.popTry();$ctx.state=37;$ctx.finallyFallThrough=41;break;case 36:$ctx.popTry();$ctx.maybeUncatchable();$__17=$ctx.storedException;$ctx.state=42;break;case 42:$__15=true;$__16=$__17;$ctx.state=37;$ctx.finallyFallThrough=41;break;case 37:$ctx.popTry();$ctx.state=48;break;case 48:try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}
$ctx.state=46;break;case 41:console.log('after Bootstrap');$ctx.state=62;break;case 62:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(51),$ctx.errback);return;case 51:layout=$ctx.value;$ctx.state=50;break;case 50:Promise.resolve(layout.fire('ModuleRegistry::bootstrap:after')).then($ctx.createCallback(53),$ctx.errback);return;case 53:$ctx.returnValue=this;$ctx.state=55;break;case 55:$ctx.state=-2;break;case 22:$ctx.state=$ctx.finallyFallThrough;break;case 46:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"onBootstrap",{value:function(){},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"scan",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var defined,manifests,modules,index,$__81,$__82,$__83,$__84,$__85,$__86,$__87,$__88,$__89,$__90,$__91,$__92,$__93,$__94,$__95,$__96;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__85=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__85).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__86=$ctx.value;$ctx.state=2;break;case 2:$__87=$__86.debug;$__88=$__87.call($__86,'Module Registry scan');$ctx.state=7;break;case 7:Promise.resolve(this.getEnabled()).then($ctx.createCallback(10),$ctx.errback);return;case 10:defined=$ctx.value;$ctx.state=9;break;case 9:Promise.resolve(this.fetchManifests(defined)).then($ctx.createCallback(13),$ctx.errback);return;case 13:manifests=$ctx.value;$ctx.state=12;break;case 12:$__89=this.logger;$ctx.state=18;break;case 18:Promise.resolve($__89).then($ctx.createCallback(16),$ctx.errback);return;case 16:$__90=$ctx.value;$ctx.state=15;break;case 15:$__91=$__90.debug;$__92=$__91.call($__90,manifests);$ctx.state=20;break;case 20:Promise.resolve(this.initModules(manifests)).then($ctx.createCallback(23),$ctx.errback);return;case 23:modules=$ctx.value;$ctx.state=22;break;case 22:$__81=[];$__82=modules;for($__83 in $__82)
$__81.push($__83);$ctx.state=35;break;case 35:$__84=0;$ctx.state=33;break;case 33:$ctx.state=($__84<$__81.length)?27:31;break;case 30:$__84++;$ctx.state=33;break;case 27:index=$__81[$__84];$ctx.state=28;break;case 28:$ctx.state=(!(index in $__82))?30:25;break;case 25:this._modules.set(modules[index].module_name,modules[index]);$ctx.state=30;break;case 31:Promise.resolve(this.processRequires()).then($ctx.createCallback(37),$ctx.errback);return;case 37:Promise.resolve(this.processDefaultConfig()).then($ctx.createCallback(39),$ctx.errback);return;case 39:$__93=this.logger;$ctx.state=44;break;case 44:Promise.resolve($__93).then($ctx.createCallback(42),$ctx.errback);return;case 42:$__94=$ctx.value;$ctx.state=41;break;case 41:$__95=$__94.debug;$__96=$__95.call($__94,'Finished scan');$ctx.state=46;break;case 46:$ctx.returnValue=this;$ctx.state=48;break;case 48:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"getEnabled",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var m,result,$__7,$__8,$__9,$__5,$__4,key,$__97,$__98,$__99,$__100,$__101,$__102,$__103,$__104;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__97=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__97).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__98=$ctx.value;$ctx.state=2;break;case 2:$__99=$__98.debug;$__100=$__99.call($__98,'Fetching enabled modules from /app/modules.js');$ctx.state=7;break;case 7:Promise.resolve(System.import('modules.js')).then($ctx.createCallback(10),$ctx.errback);return;case 10:m=$ctx.value;$ctx.state=9;break;case 9:result=[];$__7=true;$__8=false;$__9=undefined;try{for($__5=void 0,$__4=(Object.keys(m.default))[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){key=$__5.value;{if(m.default[key].enabled){result.push([key,m.default[key]]);}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
$ctx.state=22;break;case 22:$__101=this.logger;$ctx.state=15;break;case 15:Promise.resolve($__101).then($ctx.createCallback(13),$ctx.errback);return;case 13:$__102=$ctx.value;$ctx.state=12;break;case 12:$__103=$__102.debug;$__104=$__103.call($__102,result);$ctx.state=17;break;case 17:$ctx.returnValue=result;$ctx.state=19;break;case 19:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"fetchManifests",{value:$traceurRuntime.initTailRecursiveFunction(function(defined){return $traceurRuntime.call(function(defined){var promises,manifests,$__105,$__106,$__107,$__108;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__105=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__105).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__106=$ctx.value;$ctx.state=2;break;case 2:$__107=$__106.debug;$__108=$__107.call($__106,'Fetching manifest.js files of all enabled modules.');$ctx.state=7;break;case 7:promises=defined.map($traceurRuntime.initTailRecursiveFunction(function($__67){return $traceurRuntime.call(function($__67){var $__69,$__70,$__68,key,value,m;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__68=$__67,key=($__69=$__68[Symbol.iterator](),($__70=$__69.next()).done?void 0:$__70.value),value=($__70=$__69.next()).done?void 0:$__70.value;key=key.replace(/_/g,'/');$ctx.state=8;break;case 8:Promise.resolve(System.import(key+'/manifest.js')).then($ctx.createCallback(3),$ctx.errback);return;case 3:m=$ctx.value;$ctx.state=2;break;case 2:m.default.key=key;$ctx.state=10;break;case 10:$ctx.returnValue=m.default;$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}));$ctx.state=15;break;case 15:Promise.resolve(Promise.all(promises)).then($ctx.createCallback(10),$ctx.errback);return;case 10:manifests=$ctx.value;$ctx.state=9;break;case 9:$ctx.returnValue=manifests;$ctx.state=12;break;case 12:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"initModules",{value:$traceurRuntime.initTailRecursiveFunction(function(manifests){return $traceurRuntime.call(function(manifests){var promises,loadedModules,$__109,$__110,$__111,$__112;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__109=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__109).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__110=$ctx.value;$ctx.state=2;break;case 2:$__111=$__110.debug;$__112=$__111.call($__110,'Initilizing module objects for all manifests');$ctx.state=7;break;case 7:promises=manifests.map($traceurRuntime.initTailRecursiveFunction(function(manifest){return $traceurRuntime.call(function(manifest){if(!('module_name'in manifest)){throw"Invalid or empty manifest file: "+manifest.key+'/manifest.js';}
manifest.manifest_file=manifest.key+'/manifest.js';return $traceurRuntime.continuation(ClassRegistry.getInstance,ClassRegistry,['awy_core_model_module',false,manifest]);},this,arguments);}));$ctx.state=15;break;case 15:Promise.resolve(Promise.all(promises)).then($ctx.createCallback(10),$ctx.errback);return;case 10:loadedModules=$ctx.value;$ctx.state=9;break;case 9:$ctx.returnValue=loadedModules;$ctx.state=12;break;case 12:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"configuration",{get:function(){return this.config;},configurable:true,enumerable:true}),Object.defineProperty($__3,"processRequires",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var $__113,$__114,$__115,$__116;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(this.checkRequires()).then($ctx.createCallback(2),$ctx.errback);return;case 2:$__113=this.logger;$ctx.state=7;break;case 7:Promise.resolve($__113).then($ctx.createCallback(5),$ctx.errback);return;case 5:$__114=$ctx.value;$ctx.state=4;break;case 4:$__115=$__114.debug;$__116=$__115.call($__114,'Perform topological sorting for module dependencies');$ctx.state=9;break;case 9:$ctx.returnValue=this.sortRequires();$ctx.state=11;break;case 11:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"processDefaultConfig",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var module,$__7,$__8,$__9,$__5,$__4,$__117,$__118,$__119,$__120,$__10;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__117=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__117).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__118=$ctx.value;$ctx.state=2;break;case 2:$__119=$__118.debug;$__120=$__119.call($__118,'Processing default configuration for all modules');$ctx.state=7;break;case 7:$__7=true;$__8=false;$__9=undefined;$ctx.state=32;break;case 32:$ctx.pushTry(15,16);$ctx.state=18;break;case 18:$__5=void 0,$__4=(Array.from(this._modules.values()))[Symbol.iterator]();$ctx.state=14;break;case 14:$ctx.state=(!($__7=($__5=$__4.next()).done))?10:12;break;case 9:$__7=true;$ctx.state=14;break;case 10:module=$__5.value;$ctx.state=11;break;case 11:Promise.resolve(module.processDefaultConfig()).then($ctx.createCallback(9),$ctx.errback);return;case 12:$ctx.popTry();$ctx.state=16;$ctx.finallyFallThrough=20;break;case 15:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=21;break;case 21:$__8=true;$__9=$__10;$ctx.state=16;$ctx.finallyFallThrough=20;break;case 16:$ctx.popTry();$ctx.state=27;break;case 27:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=25;break;case 20:$ctx.returnValue=this;$ctx.state=29;break;case 29:$ctx.state=-2;break;case 25:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"checkRequires",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var $__68,$__69,$__71,$__72,config,util,requestRunLevels,modName,$__121,$__122,$__123,$__124,$__7,$__8,$__9,$__5,$__4,$__67,modName1,mod,req,$__125,$__126,$__127,$__128,reqMod,$__14,$__15,$__16,$__12,$__11,$__70,modName2,mod2,$__129,$__130,$__131,$__132,$__10,$__17;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__129=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__129).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__130=$ctx.value;$ctx.state=2;break;case 2:$__131=$__130.debug;$__132=$__131.call($__130,'Checking for required modules and modules with errors');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(10),$ctx.errback);return;case 10:config=$ctx.value;$ctx.state=9;break;case 9:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(13),$ctx.errback);return;case 13:util=$ctx.value;$ctx.state=12;break;case 12:requestRunLevels=config.get('module_run_levels/request');$ctx.state=109;break;case 109:$__121=[];$__122=requestRunLevels;for($__123 in $__122)
$__121.push($__123);$ctx.state=25;break;case 25:$__124=0;$ctx.state=23;break;case 23:$ctx.state=($__124<$__121.length)?17:21;break;case 20:$__124++;$ctx.state=23;break;case 17:modName=$__121[$__124];$ctx.state=18;break;case 18:$ctx.state=(!(modName in $__122))?20:15;break;case 15:if(this._modules.has(modName)){this._modules.get(modName).run_level=requestRunLevels[modName];}else{if(requestRunLevels[modName]===moduleConstants.REQUIRED){throw new Error('Module is required but not found: '+modName);}}
$ctx.state=20;break;case 21:$__7=true;$__8=false;$__9=undefined;$ctx.state=111;break;case 111:$ctx.pushTry(69,70);$ctx.state=72;break;case 72:$__5=void 0,$__4=(this._modules)[Symbol.iterator]();$ctx.state=68;break;case 68:$ctx.state=(!($__7=($__5=$__4.next()).done))?64:66;break;case 63:$__7=true;$ctx.state=68;break;case 64:$__67=$__5.value,modName1=($__68=$__67[Symbol.iterator](),($__69=$__68.next()).done?void 0:$__69.value),mod=($__69=$__68.next()).done?void 0:$__69.value;$ctx.state=65;break;case 65:if(mod.run_level===moduleConstants.REQUIRED){mod.run_status=moduleConstants.PENDING;}
$ctx.state=61;break;case 61:$ctx.state=('require'in mod&&'module'in mod.require)?55:58;break;case 55:req=void 0;$ctx.state=56;break;case 56:$__125=[];$__126=mod.require.module;for($__127 in $__126)
$__125.push($__127);$ctx.state=54;break;case 54:$__128=0;$ctx.state=52;break;case 52:$ctx.state=($__128<$__125.length)?44:50;break;case 49:$__128++;$ctx.state=52;break;case 44:req=$__125[$__128];$ctx.state=45;break;case 45:$ctx.state=(!(req in $__126))?49:42;break;case 42:reqMod=this._modules.get(req)||false;$ctx.state=47;break;case 47:$ctx.state=(!reqMod)?28:39;break;case 28:mod.errors.push({type:'missing',mod:req});$ctx.state=49;break;case 39:$ctx.state=(reqMod.run_level===moduleConstants.DISABLED)?32:38;break;case 32:mod.errors.push({type:'disabled',mod:req});$ctx.state=49;break;case 38:$ctx.state=(!util.version_compare(reqMod.version,mod.require.module[req],'='))?36:27;break;case 36:mod.errors.push({type:'version',mod:req});$ctx.state=49;break;case 27:if(!(req in mod.parents)){mod.parents.push(req);}
if(!(modName1 in reqMod.children)){reqMod.children.push(modName1);}
if(mod.run_status===moduleConstants.PENDING){reqMod.run_status=moduleConstants.PENDING;}
$ctx.state=49;break;case 50:delete mod.require.module[req];$ctx.state=58;break;case 58:if(mod.errors.length==0&&mod.run_level===moduleConstants.REQUESTED){mod.run_status=moduleConstants.PENDING;}
$ctx.state=63;break;case 66:$ctx.popTry();$ctx.state=70;$ctx.finallyFallThrough=74;break;case 69:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=75;break;case 75:$__8=true;$__9=$__10;$ctx.state=70;$ctx.finallyFallThrough=74;break;case 70:$ctx.popTry();$ctx.state=81;break;case 81:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=79;break;case 74:$__14=true;$__15=false;$__16=undefined;$ctx.state=113;break;case 113:$ctx.pushTry(95,96);$ctx.state=98;break;case 98:$__12=void 0,$__11=(this._modules)[Symbol.iterator]();$ctx.state=94;break;case 94:$ctx.state=(!($__14=($__12=$__11.next()).done))?90:92;break;case 89:$__14=true;$ctx.state=94;break;case 90:$__70=$__12.value,modName2=($__71=$__70[Symbol.iterator](),($__72=$__71.next()).done?void 0:$__72.value),mod2=($__72=$__71.next()).done?void 0:$__72.value;$ctx.state=91;break;case 91:$ctx.state=((typeof mod2==='undefined'?'undefined':$traceurRuntime.typeof(mod2))!=='object')?85:84;break;case 85:console.error(mod2);$ctx.state=86;break;case 86:$ctx.returnValue=undefined;$ctx.state=83;break;case 83:$ctx.state=96;$ctx.finallyFallThrough=-2;break;case 84:if(mod2.errors.length>0&&!mod2.errors_propagated){this.propagateErrors(mod2);}else if(mod2.run_status===moduleConstants.PENDING){this.propagateRequires(mod2);}
$ctx.state=89;break;case 92:$ctx.popTry();$ctx.state=96;$ctx.finallyFallThrough=-2;break;case 95:$ctx.popTry();$ctx.maybeUncatchable();$__17=$ctx.storedException;$ctx.state=101;break;case 101:$__15=true;$__16=$__17;$ctx.state=96;$ctx.finallyFallThrough=-2;break;case 96:$ctx.popTry();$ctx.state=107;break;case 107:try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}
$ctx.state=105;break;case 79:$ctx.state=$ctx.finallyFallThrough;break;case 105:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"propagateErrors",{value:function(mod){mod.run_status=moduleConstants.ERROR;mod.errors_propagated=true;var childName;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(mod.children)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){childName=$__5.value;{if(!this._modules.has(childName)){continue;}
var child=this._modules.get(childName);if(child.run_level===moduleConstants.REQUIRED&&child.run_status!==moduleConstants.ERROR){this.propagateRequireErrors(child);}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
return this;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"propagateRequires",{value:function(mod){var parentName;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(mod.parents)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){parentName=$__5.value;{if(!this._modules.has(parentName)){continue;}
parent=this._modules.get(parentName);if(parent.run_status===moduleConstants.PENDING){continue;}
parent.run_status=moduleConstants.PENDING;this.propagateRequires(parent);}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
return this;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"sortRequires",{value:function(){var $__70,$__68,$__71,$__72,$__74,$__75,$__77,$__78;var modules=this._modules;var circRefsArr=[];var $__28=true;var $__29=false;var $__30=undefined;try{for(var $__26=void 0,$__25=(modules)[Symbol.iterator]();!($__28=($__26=$__25.next()).done);$__28=true){var $__67=$__26.value,modName=($__70=$__67[Symbol.iterator](),($__68=$__70.next()).done?void 0:$__68.value),mod=($__68=$__70.next()).done?void 0:$__68.value;{var circRefs=this.detectCircularReferences(mod);if(circRefs.length){var circ=void 0;var $__21=true;var $__22=false;var $__23=undefined;try{for(var $__19=void 0,$__18=(circRefs)[Symbol.iterator]();!($__21=($__19=$__18.next()).done);$__21=true){circ=$__19.value;{circRefsArr.push(circ.join(' -> '));var s=circ.length;var mod1name=circ[s-1];var mod2name=circ[s-2];var modul1=modules.get(mod1name);var modul2=modules.get(mod2name);var p=void 0;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(modul1.parents)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){p=$__5.value;{if(p===mod2name){modul1.parents.splice(modul1.parents.indexOf(p),1);}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
var c=void 0;var $__14=true;var $__15=false;var $__16=undefined;try{for(var $__12=void 0,$__11=(modul2.children)[Symbol.iterator]();!($__14=($__12=$__11.next()).done);$__14=true){c=$__12.value;{if(c===mod1name){modul2.children.splice(modul2.children.indexOf(c),1);}}}}catch($__17){$__15=true;$__16=$__17;}finally{try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}}}}}catch($__24){$__22=true;$__23=$__24;}finally{try{if(!$__21&&$__18.return!=null){$__18.return();}}finally{if($__22){throw $__23;}}}}}}}catch($__31){$__29=true;$__30=$__31;}finally{try{if(!$__28&&$__25.return!=null){$__25.return();}}finally{if($__29){throw $__30;}}}
var circRef;var $__35=true;var $__36=false;var $__37=undefined;try{for(var $__33=void 0,$__32=(circRefsArr)[Symbol.iterator]();!($__35=($__33=$__32.next()).done);$__35=true){circRef=$__33.value;{console.warn('Circular reference detected: '+circRef);}}}catch($__38){$__36=true;$__37=$__38;}finally{try{if(!$__35&&$__32.return!=null){$__32.return();}}finally{if($__36){throw $__37;}}}
var $__49=true;var $__50=false;var $__51=undefined;try{for(var $__47=void 0,$__46=(modules)[Symbol.iterator]();!($__49=($__47=$__46.next()).done);$__49=true){var $__69=$__47.value,modName1=($__71=$__69[Symbol.iterator](),($__72=$__71.next()).done?void 0:$__72.value),mod1=($__72=$__71.next()).done?void 0:$__72.value;{mod1.children_copy=mod1.children;if('load_after'in mod1&&Array.isArray(mod1.load_after)){var $__42=true;var $__43=false;var $__44=undefined;try{for(var $__40=void 0,$__39=(mod1.load_after)[Symbol.iterator]();!($__42=($__40=$__39.next()).done);$__42=true){var n=$__40.value;{if(!modules.has(n)){throw new Error('Invalid module name specified in load_after: '+n);continue;}
mod1.parents.push(n);modules.get(n).children.push(modName1);}}}catch($__45){$__43=true;$__44=$__45;}finally{try{if(!$__42&&$__39.return!=null){$__39.return();}}finally{if($__43){throw $__44;}}}}}}}catch($__52){$__50=true;$__51=$__52;}finally{try{if(!$__49&&$__46.return!=null){$__46.return();}}finally{if($__50){throw $__51;}}}
var rootModules=[];var $__56=true;var $__57=false;var $__58=undefined;try{for(var $__54=void 0,$__53=(modules)[Symbol.iterator]();!($__56=($__54=$__53.next()).done);$__56=true){var $__73=$__54.value,modName2=($__74=$__73[Symbol.iterator](),($__75=$__74.next()).done?void 0:$__75.value),mod2=($__75=$__74.next()).done?void 0:$__75.value;{if(!mod2.parents.length){rootModules.push(mod2);}}}}catch($__59){$__57=true;$__58=$__59;}finally{try{if(!$__56&&$__53.return!=null){$__53.return();}}finally{if($__57){throw $__58;}}}
var sorted=new Map();while(modules.size){if(circRefsArr.length){throw new Error('Circular reference detected, aborting module sorting');}
var n$__79=rootModules.pop();sorted.set(n$__79.module_name,n$__79);var c$__80=n$__79.children.length-1;while(c$__80>=0){var childModule=modules.get(n$__79.children[c$__80]);n$__79.children.splice(c$__80,1);childModule.parents.splice(childModule.parents.indexOf(n$__79.module_name),1);if(!childModule.parents.length){rootModules.push(childModule);}
c$__80--;}
modules.delete(n$__79.module_name);}
var srt=[];var $__63=true;var $__64=false;var $__65=undefined;try{for(var $__61=void 0,$__60=(sorted)[Symbol.iterator]();!($__63=($__61=$__60.next()).done);$__63=true){var $__76=$__61.value,modName3=($__77=$__76[Symbol.iterator](),($__78=$__77.next()).done?void 0:$__78.value),mod3=($__78=$__77.next()).done?void 0:$__78.value;{if(mod3.load_after==='ALL'){sorted.delete(modName3);srt.push(mod3);}}}}catch($__66){$__64=true;$__65=$__66;}finally{try{if(!$__63&&$__60.return!=null){$__60.return();}}finally{if($__64){throw $__65;}}}
srt.forEach(function(obj){sorted.set(obj.module_name,obj);});this._modules=sorted;return this;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"detectCircularReferences",{value:function(mod){var depPathArr=arguments[1]!==(void 0)?arguments[1]:[];var circ=[];if(mod.parents.length){var $__14=true;var $__15=false;var $__16=undefined;try{for(var $__12=void 0,$__11=(mod.parents)[Symbol.iterator]();!($__14=($__12=$__11.next()).done);$__14=true){var p=$__12.value;{if(!!~depPathArr.indexOf(p)){var found=false;var circPath=[];var k=void 0;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(depPathArr)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){k=$__5.value;{if(p===k){found=true;}
if(found){circPath.push(k);}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
circPath.push(p);circ.push(circPath);}else{var depPathArr1=JSON.parse(JSON.stringify(depPathArr));depPathArr1.push(p);var b=this.detectCircularReferences(this._modules.get(p),depPathArr1);circ=$traceurRuntime.spread(new Set($traceurRuntime.spread(circ,b)));}}}}catch($__17){$__15=true;$__16=$__17;}finally{try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}}}else{}
return circ;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__3,"expandPath",{value:function(path){if(path[0]!=='@'){return path;}
var parts=path.split("/");var mod=this._modules.get(parts.shift().substr(1));if(!mod){return path;}
return mod.root_dir+'/'+parts.join("/");},configurable:true,enumerable:true,writable:true}),$__3),{},$__super]);},this,arguments);})(Class);Object.defineProperty(Core_Model_Module_Registry,"parameters",{get:function(){return[[Object]];}});$__export('default',Core_Model_Module_Registry);}};});
System.register("/app/awy/core/model/module.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/module.js";var DISABLED,ONDEMAND,REQUESTED,REQUIRED,IDLE,PENDING,LOADED,ERROR,Core_Model_Module;return{setters:[],execute:function(){DISABLED='DISABLED';$__export("DISABLED",DISABLED);ONDEMAND='ONDEMAND';$__export("ONDEMAND",ONDEMAND);REQUESTED='REQUESTED';$__export("REQUESTED",REQUESTED);REQUIRED='REQUIRED';$__export("REQUIRED",REQUIRED);IDLE='IDLE';$__export("IDLE",IDLE);PENDING='PENDING';$__export("PENDING",PENDING);LOADED='LOADED';$__export("LOADED",LOADED);ERROR='ERROR';$__export("ERROR",ERROR);Core_Model_Module=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Core_Model_Module(params){var $__3;$traceurRuntime.superConstructor(Core_Model_Module).call(this);this._defaultRunLevel=ONDEMAND;this.root_dir=params.key;this.errors=[];this.areas={};this.errors_propagated=false;this.parents=[];this.children=[];this.children_copy=[];this.logger=Class.i('awy_core_model_logger','Module');Class.i('awy_core_model_router_request').then(($__3=this,function(r){params['area']=r.area;$__3.set(params);$__3.processAreas(params);$__3.run_level=$__3._defaultRunLevel;if(!('run_status'in $__3)){$__3.run_status=IDLE;}
if(!('channel'in $__3)){$__3.channel='alpha';}}));}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_Module,{processAreas:function(){if(this.area in this.areas){var areaParams=this.areas[this.area];areaParams['update']=true;this.update(areaParams);}
return;},set:function(key){var value=arguments[1]!==(void 0)?arguments[1]:null;if((typeof key==='undefined'?'undefined':$traceurRuntime.typeof(key))==='object'){for(var param in key){this[param]=key[param];}
return this;}
this[key]=value;return this;},update:function(params){if(!('update'in params)){console.log('Module is already registered: '+this.module_name+' with this manifest file '+this.manifest_file);return this;}
delete params['update'];var k;for(k in params){if(k in this){this[k]=this.objectMerge(this[k],params[k]);}else{this[k]=params[k];}}
return this;},processDefaultConfig:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var config,layout,$__20,$__21,$__22,$__23,path,value,$__24,$__25,$__26,$__27,$__28;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(6),$ctx.errback);return;case 6:layout=$ctx.value;$ctx.state=5;break;case 5:$ctx.state=('default_config'in this)?10:27;break;case 10:$__24=this.logger;$ctx.state=11;break;case 11:Promise.resolve($__24).then($ctx.createCallback(9),$ctx.errback);return;case 9:$__25=$ctx.value;$ctx.state=8;break;case 8:$__26=$__25.debug;$__27=this.module_name;$__28=$__26.call($__25,'Processing default_config for '+$__27);$ctx.state=13;break;case 13:$__20=[];$__21=this.default_config;for($__22 in $__21)
$__20.push($__22);$ctx.state=25;break;case 25:$__23=0;$ctx.state=23;break;case 23:$ctx.state=($__23<$__20.length)?17:21;break;case 20:$__23++;$ctx.state=23;break;case 17:path=$__20[$__23];$ctx.state=18;break;case 18:$ctx.state=(!(path in $__21))?20:15;break;case 15:if(this.strpos(path,'/')!==false){value=this.default_config[path];config.set(path,value);delete this.default_config[path];}
$ctx.state=20;break;case 21:config.add(this.default_config);$ctx.state=27;break;case 27:Promise.resolve(this.processThemes(layout)).then($ctx.createCallback(30),$ctx.errback);return;case 30:$ctx.returnValue=this;$ctx.state=32;break;case 32:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),processThemes:$traceurRuntime.initTailRecursiveFunction(function(layout){return $traceurRuntime.call(function(layout){var $__3,themes,themeKeys,promises,loadedThemes,$__29,$__30,$__31,$__32,$__33;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$__3=this;themes=JSON.parse(JSON.stringify(this.themes||{}));$ctx.state=19;break;case 19:$ctx.state=(this.run_status!==PENDING||!Object.keys(themes).length)?1:3;break;case 1:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$__29=this.logger;$ctx.state=9;break;case 9:Promise.resolve($__29).then($ctx.createCallback(7),$ctx.errback);return;case 7:$__30=$ctx.value;$ctx.state=6;break;case 6:$__31=$__30.debug;$__32=this.module_name;$__33=$__31.call($__30,'Processing theme configuration from '+$__32);$ctx.state=11;break;case 11:themeKeys=Object.keys(themes);promises=themeKeys.map($traceurRuntime.initTailRecursiveFunction(function(themeName){return $traceurRuntime.call(function(themeName){var params=themes[themeName];if('name'in params&&'area'in params){params['module_name']=$__3.module_name;}
return $traceurRuntime.continuation(layout.addTheme,layout,[themeName,params,$__3.module_name]);},this,arguments);}));$ctx.state=21;break;case 21:Promise.resolve(Promise.all(promises)).then($ctx.createCallback(14),$ctx.errback);return;case 14:loadedThemes=$ctx.value;$ctx.state=13;break;case 13:$ctx.returnValue=loadedThemes;$ctx.state=16;break;case 16:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onBeforeBootstrap:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var className,method,clbClass,$__34,$__35,$__36,$__37,$__38,$__39,$__40,$__41,$__42,$__43;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(this.run_status!==PENDING)?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:this.prepareModuleEnvData();$ctx.state=34;break;case 34:Promise.resolve(this.processOverrides()).then($ctx.createCallback(6),$ctx.errback);return;case 6:$ctx.state=(!('before_bootstrap'in this)||!('callback'in this.before_bootstrap))?7:9;break;case 7:$ctx.returnValue=undefined;$ctx.state=8;break;case 8:$ctx.state=-2;break;case 9:className=this.before_bootstrap.callback.split(".")[0];method=this.before_bootstrap.callback.split(".")[1];$ctx.state=36;break;case 36:$__34=this.logger;$ctx.state=15;break;case 15:Promise.resolve($__34).then($ctx.createCallback(13),$ctx.errback);return;case 13:$__35=$ctx.value;$ctx.state=12;break;case 12:$__36=$__35.debug;$__37=this.module_name;$__38=$__36.call($__35,'Start BEFORE bootstrap callback for '+$__37);$ctx.state=17;break;case 17:Promise.resolve(Class.i(className)).then($ctx.createCallback(20),$ctx.errback);return;case 20:clbClass=$ctx.value;$ctx.state=19;break;case 19:Promise.resolve(clbClass[method]()).then($ctx.createCallback(22),$ctx.errback);return;case 22:$__39=this.logger;$ctx.state=27;break;case 27:Promise.resolve($__39).then($ctx.createCallback(25),$ctx.errback);return;case 25:$__40=$ctx.value;$ctx.state=24;break;case 24:$__41=$__40.debug;$__42=this.module_name;$__43=$__41.call($__40,'End BEFORE bootstrap callback for '+$__42);$ctx.state=29;break;case 29:$ctx.returnValue=undefined;$ctx.state=31;break;case 31:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),prepareModuleEnvData:function(){if(!('url_prefix'in this)){this['url_prefix']='';}
if(!('view_root_dir'in this)){this['view_root_dir']=this.root_dir;}
return this;},processOverrides:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var override,$__7,$__8,$__9,$__5,$__4,$__44,$__45,$__46,$__47,$__48,$__49,$__50,$__10;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=('override'in this&&'class'in this.override)?28:20;break;case 28:$__7=true;$__8=false;$__9=undefined;$ctx.state=29;break;case 29:$ctx.pushTry(15,16);$ctx.state=18;break;case 18:$__5=void 0,$__4=(this.override['class'])[Symbol.iterator]();$ctx.state=14;break;case 14:$ctx.state=(!($__7=($__5=$__4.next()).done))?10:12;break;case 9:$__7=true;$ctx.state=14;break;case 10:override=$__5.value;$ctx.state=11;break;case 11:$__44=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__44).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__45=$ctx.value;$ctx.state=2;break;case 2:$__46=$__45.debug;$__47=override[0];$__48=override[1];$__49=this.module_name;$__50=$__46.call($__45,'OVERRIDE CLASS: '+$__47+' -> '+$__48+' @ '+$__49);$ctx.state=7;break;case 7:Promise.resolve(ClassRegistry.overrideClass(override[0],override[1])).then($ctx.createCallback(9),$ctx.errback);return;case 12:$ctx.popTry();$ctx.state=16;$ctx.finallyFallThrough=20;break;case 15:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=21;break;case 21:$__8=true;$__9=$__10;$ctx.state=16;$ctx.finallyFallThrough=20;break;case 16:$ctx.popTry();$ctx.state=27;break;case 27:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=25;break;case 20:$ctx.returnValue=this;$ctx.state=32;break;case 32:$ctx.state=-2;break;case 25:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onBootstrap:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var b,$__7,$__8,$__9,$__5,$__4,className,method,clbClass,$__51,$__52,$__53,$__54,$__55,$__10,$__56,$__57,$__58,$__59,$__60;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(this.run_status!==PENDING)?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:this.processAutoload();this.processTranslations();$ctx.state=60;break;case 60:Promise.resolve(this.processViews()).then($ctx.createCallback(6),$ctx.errback);return;case 6:Promise.resolve(this.processAutoUse()).then($ctx.createCallback(8),$ctx.errback);return;case 8:Promise.resolve(this.processRouting()).then($ctx.createCallback(10),$ctx.errback);return;case 10:Promise.resolve(this.processObserve()).then($ctx.createCallback(12),$ctx.errback);return;case 12:$ctx.state=('bootstrap'in this)?16:52;break;case 16:$__51=this.logger;$ctx.state=17;break;case 17:Promise.resolve($__51).then($ctx.createCallback(15),$ctx.errback);return;case 15:$__52=$ctx.value;$ctx.state=14;break;case 14:$__53=$__52.debug;$__54=this.module_name;$__55=$__53.call($__52,'Start bootstrap callback for '+$__54);$ctx.state=19;break;case 19:$__7=true;$__8=false;$__9=undefined;$ctx.state=54;break;case 54:$ctx.pushTry(33,34);$ctx.state=36;break;case 36:$__5=void 0,$__4=(this.bootstrap)[Symbol.iterator]();$ctx.state=32;break;case 32:$ctx.state=(!($__7=($__5=$__4.next()).done))?28:30;break;case 24:$__7=true;$ctx.state=32;break;case 28:b=$__5.value;$ctx.state=29;break;case 29:$ctx.state=('callback'in b)?25:24;break;case 25:className=b.callback.split(".")[0];method=b.callback.split(".")[1];$ctx.state=26;break;case 26:Promise.resolve(Class.i(className)).then($ctx.createCallback(22),$ctx.errback);return;case 22:clbClass=$ctx.value;$ctx.state=21;break;case 21:Promise.resolve(clbClass[method]()).then($ctx.createCallback(24),$ctx.errback);return;case 30:$ctx.popTry();$ctx.state=34;$ctx.finallyFallThrough=38;break;case 33:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=39;break;case 39:$__8=true;$__9=$__10;$ctx.state=34;$ctx.finallyFallThrough=38;break;case 34:$ctx.popTry();$ctx.state=45;break;case 45:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=43;break;case 38:$__56=this.logger;$ctx.state=50;break;case 50:Promise.resolve($__56).then($ctx.createCallback(48),$ctx.errback);return;case 48:$__57=$ctx.value;$ctx.state=47;break;case 47:$__58=$__57.debug;$__59=this.module_name;$__60=$__58.call($__57,'End bootstrap callback for '+$__59);$ctx.state=52;break;case 52:this.run_status=LOADED;$ctx.state=62;break;case 62:$ctx.returnValue=this;$ctx.state=57;break;case 57:$ctx.state=-2;break;case 43:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),processAutoload:function(){if('autoload'in this){var al;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(this.autoload)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){al=$__5.value;{}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}}},processTranslations:function(){if('translations'in this){var tr=this.translations['en'];var file='/app/'+this.root_dir+"/i18n/"+tr;}},processViews:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var layout,$__61,$__62,$__63,$__64,v,$__65,$__66,$__67,$__68,$__69,$__70,$__71,$__72;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!('views'in this))?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(7),$ctx.errback);return;case 7:layout=$ctx.value;$ctx.state=6;break;case 6:$__61=[];$__62=this.views;for($__63 in $__62)
$__61.push($__63);$ctx.state=26;break;case 26:$__64=0;$ctx.state=24;break;case 24:$ctx.state=($__64<$__61.length)?20:-2;break;case 16:$__64++;$ctx.state=24;break;case 20:v=$__61[$__64];$ctx.state=21;break;case 21:$ctx.state=(!(v in $__62))?16:18;break;case 18:Promise.resolve(layout.addView(v,this.views[v])).then($ctx.createCallback(9),$ctx.errback);return;case 9:$__65=this.logger;$ctx.state=14;break;case 14:Promise.resolve($__65).then($ctx.createCallback(12),$ctx.errback);return;case 12:$__66=$ctx.value;$ctx.state=11;break;case 11:$__67=$__66.debug;$__68=this.views;$__69=$__68[v];$__70=$__69['view_class'];$__71=this.module_name;$__72=$__67.call($__66,'ADD VIEW: '+v+' -> '+$__70+' @ '+$__71);$ctx.state=16;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),processAutoUse:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var req,util,area,areaDir,mainExist,areaExist;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!('auto_use'in this))?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(7),$ctx.errback);return;case 7:req=$ctx.value;$ctx.state=6;break;case 6:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(10),$ctx.errback);return;case 10:util=$ctx.value;$ctx.state=9;break;case 9:area=req.area;areaDir=area.replace('awy_','');$ctx.state=25;break;case 25:$ctx.state=(util.contains(this.auto_use,'all')||util.contains(this.auto_use,'bootstrap'))?17:-2;break;case 17:if(!('bootstrap'in this)){this['bootstrap']=[];}
$ctx.state=18;break;case 18:Promise.resolve(this.methodExists(this.module_name+'_main','bootstrap')).then($ctx.createCallback(13),$ctx.errback);return;case 13:mainExist=$ctx.value;$ctx.state=12;break;case 12:if(mainExist){this.bootstrap.push({callback:this.module_name+'_main.bootstrap'});}
$ctx.state=20;break;case 20:Promise.resolve(this.methodExists(this.module_name+'_'+areaDir,'bootstrap')).then($ctx.createCallback(16),$ctx.errback);return;case 16:areaExist=$ctx.value;$ctx.state=15;break;case 15:if(areaExist){this.bootstrap.push({callback:this.module_name+'_'+areaDir+'.bootstrap'});}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),processRouting:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var hlp,r,method,route,callback,args,name,multiple,$__7,$__8,$__9,$__5,$__4,$__10;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!('routing'in this))?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(7),$ctx.errback);return;case 7:hlp=$ctx.value;$ctx.state=6;break;case 6:$__7=true;$__8=false;$__9=undefined;$ctx.state=31;break;case 31:$ctx.pushTry(17,18);$ctx.state=20;break;case 20:$__5=void 0,$__4=(this.routing)[Symbol.iterator]();$ctx.state=16;break;case 16:$ctx.state=(!($__7=($__5=$__4.next()).done))?12:14;break;case 9:$__7=true;$ctx.state=16;break;case 12:r=$__5.value;$ctx.state=13;break;case 13:if(r[0][0]==='/'||r[0][0]==='^'){method='route';route=r[0];callback=r[1];args=r[2]||{};name=r[3]||null;multiple=r[4]||true;}else{method=r[0].toLowerCase();route=r[1];callback=r[2]||null;args=r[3]||{};name=r[4]||null;multiple=r[5]||true;}
$ctx.state=11;break;case 11:Promise.resolve(hlp[method](route,callback,args,name,multiple)).then($ctx.createCallback(9),$ctx.errback);return;case 14:$ctx.popTry();$ctx.state=18;$ctx.finallyFallThrough=-2;break;case 17:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=23;break;case 23:$__8=true;$__9=$__10;$ctx.state=18;$ctx.finallyFallThrough=-2;break;case 18:$ctx.popTry();$ctx.state=29;break;case 29:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=27;break;case 27:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),processObserve:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var hlp,o,$__7,$__8,$__9,$__5,$__4,evnt,callback,args,$__10;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!('observe'in this))?1:3;break;case 1:$ctx.returnValue=undefined;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(7),$ctx.errback);return;case 7:hlp=$ctx.value;$ctx.state=6;break;case 6:$__7=true;$__8=false;$__9=undefined;$ctx.state=31;break;case 31:$ctx.pushTry(17,18);$ctx.state=20;break;case 20:$__5=void 0,$__4=(this.observe)[Symbol.iterator]();$ctx.state=16;break;case 16:$ctx.state=(!($__7=($__5=$__4.next()).done))?12:14;break;case 9:$__7=true;$ctx.state=16;break;case 12:o=$__5.value;$ctx.state=13;break;case 13:evnt=o[0];callback=o[1];args=o[2]||{};$ctx.state=11;break;case 11:Promise.resolve(hlp.on(evnt,callback,args)).then($ctx.createCallback(9),$ctx.errback);return;case 14:$ctx.popTry();$ctx.state=18;$ctx.finallyFallThrough=-2;break;case 17:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=23;break;case 23:$__8=true;$__9=$__10;$ctx.state=18;$ctx.finallyFallThrough=-2;break;case 18:$ctx.popTry();$ctx.state=29;break;case 29:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=27;break;case 27:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),methodExists:$traceurRuntime.initTailRecursiveFunction(function(obj,method){return $traceurRuntime.call(function(obj,method){var clbClass,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.pushTry(10,null);$ctx.state=13;break;case 13:Promise.resolve(Class.i(obj)).then($ctx.createCallback(3),$ctx.errback);return;case 3:clbClass=$ctx.value;$ctx.state=2;break;case 2:$ctx.returnValue=typeof clbClass[method]==='function';$ctx.state=5;break;case 5:$ctx.state=-2;break;case 6:$ctx.popTry();$ctx.state=-2;break;case 10:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=7;break;case 7:$ctx.returnValue=false;$ctx.state=8;break;case 8:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),strpos:function(haystack,needle,offset){var i=(haystack+'').indexOf(needle,(offset||0));return i===-1?false:i;},objectMerge:function(){var $__19;for(var rest=[],$__18=0;$__18<arguments.length;$__18++)
rest[$__18]=arguments[$__18];var base=rest.shift();var $__14=true;var $__15=false;var $__16=undefined;try{for(var $__12=void 0,$__11=(rest)[Symbol.iterator]();!($__14=($__12=$__11.next()).done);$__14=true){var append=$__12.value;{if((typeof base==='undefined'?'undefined':$traceurRuntime.typeof(base))!=='object'){return append;}
if(Array.isArray(append)&&Array.isArray(base)){var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(append)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){var val=$__5.value;{if(!!~base.indexOf(val)){base[base.indexOf(val)]=val;append.splice(append.indexOf(val),1);}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
($__19=base).push.apply($__19,$traceurRuntime.spread(append));}
var key=void 0;for(key in append){if(key in base){base[key]=this.objectMerge(base[key],append[key]);}else{Object.assign(base,append);}}}}}catch($__17){$__15=true;$__16=$__17;}finally{try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}}
return base;}},{},$__super]);},this,arguments);})(Class);Object.defineProperty(Core_Model_Module,"parameters",{get:function(){return[[Object]];}});$__export('default',Core_Model_Module);}};});
System.register("/app/awy/core/model/router/request.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/router/request.js";var Core_Model_Router_Request;return{setters:[],execute:function(){Core_Model_Router_Request=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__3;var $__2;function Core_Model_Router_Request(){$traceurRuntime.superConstructor(Core_Model_Router_Request).call(this);this._area='awy_frontend';}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_Router_Request,($__2={},Object.defineProperty($__2,"scriptDir",{value:function(){var dir=window.location.pathname.replace(/[^\\\/]*$/,'');return dir;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__2,"scriptName",{value:function(){return window.location.pathname;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__2,"area",{set:function(area){this._area=area;},configurable:true,enumerable:true,get:function(){return this._area;}}),Object.defineProperty($__2,"httpHost",{value:function(){var includePort=arguments[0]!==(void 0)?arguments[0]:true;if(includePort){return window.location.host;}
return window.location.hostname;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__2,"isAgent",{value:function(search){return(navigator.userAgent.indexOf(search)>-1);},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__2,"currentUrl",{value:function(){return window.location.href;},configurable:true,enumerable:true,writable:true}),Object.defineProperty($__2,"scheme",{value:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return($__3=window.location.protocol,$traceurRuntime.continuation($__3.replace,$__3,[/:/,'']));},this,arguments);}),configurable:true,enumerable:true,writable:true}),Object.defineProperty($__2,"ajax",{value:$traceurRuntime.initTailRecursiveFunction(function(method,url){return $traceurRuntime.call(function(method,url){var args=arguments[2]!==(void 0)?arguments[2]:null;var data=arguments[3]!==(void 0)?arguments[3]:null;return $traceurRuntime.continuation($traceurRuntime.construct,Promise,[function(resolve,reject){var client=new XMLHttpRequest();var uri=url;if(args&&(method==='GET'||method==='DELETE'||method==='POST'||method==='PUT'||method==='PATCH')){uri+='?';var argcount=0;for(var key in args){if(args.hasOwnProperty(key)){if(argcount++){uri+='&';}
uri+=encodeURIComponent(key)+'='+encodeURIComponent(args[key]);}}}
client.open(method,uri);if(data&&(method==='POST'||method==='PUT'||method==='PATCH')){client.send(data);}else{client.send();}
client.onload=function(){if(this.status>=200&&this.status<300){resolve(this.response);}else{var resp=JSON.parse(this.response);if(resp.error){reject(resp.error);}else{reject(this.statusText);}}};client.onerror=function(){reject(this.statusText);};}]);},this,arguments);}),configurable:true,enumerable:true,writable:true}),$__2),{},$__super]);},this,arguments);})(Class);$__export('default',Core_Model_Router_Request);}};});
System.register("/app/awy/core/model/router/response.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/router/response.js";var Core_Model_Router_Response;return{setters:[],execute:function(){Core_Model_Router_Response=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Core_Model_Router_Response(){$traceurRuntime.superConstructor(Core_Model_Router_Response).call(this);this.logger=Class.i('awy_core_model_logger','Response');this._contentType='text/html';this._charset='UTF-8';this._content=null;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Core_Model_Router_Response,{render:function(){},output:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var type,app,l;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:type=$arguments[0]!==(void 0)?$arguments[0]:null;$ctx.state=14;break;case 14:Promise.resolve(Class.i('awy_core_model_app')).then($ctx.createCallback(3),$ctx.errback);return;case 3:app=$ctx.value;$ctx.state=2;break;case 2:app.host.innerHTML="";if(null!==type){this.setContentType(type);}
$ctx.state=16;break;case 16:$ctx.state=(this._contentType=='application/json')?10:4;break;case 10:if(null!==this._content){this._content=this._content;}
$ctx.state=-2;break;case 4:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(6),$ctx.errback);return;case 6:l=$ctx.value;$ctx.state=5;break;case 5:Promise.resolve(l.render(null,{parent:app.host})).then($ctx.createCallback(9),$ctx.errback);return;case 9:this._content=$ctx.value;$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),setContentType:function(type){this._contentType=type;return this;},header:function(header){var replace=arguments[1]!==(void 0)?arguments[1]:true;var httpResponseCode=arguments[2]!==(void 0)?arguments[2]:null;return this;},redirect:function(url){var status=arguments[1]!==(void 0)?arguments[1]:302;window.location=url;}},{},$__super]);},this,arguments);})(Class);$__export('default',Core_Model_Router_Response);}};});
System.register("/app/awy/core/model/router.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/router.js";var instance,singletonEnforcer,Awy_Core_Model_Router;return{setters:[],execute:function(){instance=null;singletonEnforcer={};Awy_Core_Model_Router=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__15;function Awy_Core_Model_Router(key){$traceurRuntime.superConstructor(Awy_Core_Model_Router).call(this);this.logger=Class.i('awy_core_model_logger','Router');this.routes=[];this.mode=null;this.root='/';this.current=null;this._reload=false;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Model_Router,{config:function(options){this.mode=options&&options.mode&&options.mode=='history'&&!!(history.pushState)?'history':'hash';this.root=options&&options.root?'/'+this.clearSlashes(options.root)+'/':'/';return this;},getFragment:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var fragment='';if(this.mode==='history'){fragment=this.clearSlashes(decodeURI(location.pathname+location.search));fragment=fragment.replace(/\?(.*)$/,'');fragment=this.root!='/'?fragment.replace(this.root,''):fragment;}else{var match=window.location.href.match(/#(.*)$/);fragment=match?match[1]:'';}
return $traceurRuntime.continuation(this.clearSlashes,this,[fragment]);},this,arguments);}),clearSlashes:$traceurRuntime.initTailRecursiveFunction(function(path){return $traceurRuntime.call(function(path){return($__15=path.toString().replace(/\/$/,''),$traceurRuntime.continuation($__15.replace,$__15,[/^\//,'']));},this,arguments);}),add:function(re,handler){if(typeof re=='function'){handler=re;re='';}
this.routes.push({re:re,handler:handler});return this;},remove:function(param){for(var i=0,r=void 0;i<this.routes.length,r=this.routes[i];i++){if(r.handler===param||r.re.toString()===param.toString()){this.routes.splice(i,1);return this;}}
return this;},flush:function(){this.routes=[];this.mode=null;this.root='/';return this;},check:$traceurRuntime.initTailRecursiveFunction(function(f){return $traceurRuntime.call(function(f){var found,fragment,i,escaperRoute,match,className,method,clbClass,evt,forward,actionName,controllerName,params;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:found=false;fragment=f||this.getFragment();$ctx.state=29;break;case 29:i=0;$ctx.state=24;break;case 24:$ctx.state=(i<this.routes.length)?20:22;break;case 12:i++;$ctx.state=24;break;case 20:escaperRoute=this.routes[i].re.replace(/[-/\\^$*+?.()|[\]{}]/g,'\\$&');match=("/"+fragment).match(new RegExp(escaperRoute));$ctx.state=21;break;case 21:$ctx.state=(match&&match[0]=="/"+fragment)?13:12;break;case 13:found=true;match.shift();className=this.routes[i].handler.split(".")[0];method=this.routes[i].handler.split(".")[1];$ctx.state=14;break;case 14:Promise.resolve(Class.i(className)).then($ctx.createCallback(3),$ctx.errback);return;case 3:clbClass=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(6),$ctx.errback);return;case 6:evt=$ctx.value;$ctx.state=5;break;case 5:evt.clear();$ctx.state=16;break;case 16:Promise.resolve(clbClass.dispatch(method,match)).then($ctx.createCallback(9),$ctx.errback);return;case 9:forward=$ctx.value;$ctx.state=8;break;case 8:if(Array.isArray(forward)){actionName=forward[0];controllerName=forward[1]||className;params=forward[2];this.route('_ /forward',controllerName+'.'+actionName,{'params':params},null,false);}
$ctx.state=18;break;case 18:$ctx.returnValue=this;$ctx.state=11;break;case 11:$ctx.state=-2;break;case 22:$ctx.returnValue=this;$ctx.state=26;break;case 26:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),listen:function(){try{clearInterval(this.interval);this.interval=setInterval(this.loop.bind(this),50);return this;}catch(e){throw e;}},loop:function(){try{if(this.current!==this.getFragment()){this.current=this.getFragment();this.check(this.current);}
if(this._reload){this.current=this.getFragment();this.check(this.current);this._reload=false;}}catch(e){throw e;}},navigate:$traceurRuntime.initTailRecursiveFunction(function(path){return $traceurRuntime.call(function(path){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=path?path:'';if(this.mode==='history'){history.pushState(null,null,this.root+this.clearSlashes(path));}else{window.location.href=window.location.href.replace(/#(.*)$/,'')+'#'+path;}
$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),refresh:$traceurRuntime.initTailRecursiveFunction(function(path){return $traceurRuntime.call(function(path){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:path=path?path:'';if(this.mode==='history'){history.pushState(null,null,this.root+this.clearSlashes(path));this._reload=true;}else{window.location.href=window.location.href.replace(/#(.*)$/,'')+'#'+path;}
$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),redirect:function(path){window.location.href=path;},route:$traceurRuntime.initTailRecursiveFunction(function(route){return $traceurRuntime.call(function(route){var callback,args,name,multiple,a,$__6,$__7,$__8,$__4,$__3,modReg,util,$__10,$__11,$__12,$__13;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:callback=$arguments[1]!==(void 0)?$arguments[1]:null;args=$arguments[2]!==(void 0)?$arguments[2]:null;name=$arguments[3]!==(void 0)?$arguments[3]:null;multiple=$arguments[4]!==(void 0)?$arguments[4]:true;$ctx.state=27;break;case 27:$ctx.state=(Array.isArray(route))?4:3;break;case 4:$__6=true;$__7=false;$__8=undefined;try{for($__4=void 0,$__3=(route)[Symbol.iterator]();!($__6=($__4=$__3.next()).done);$__6=true){r=$__4.value;{if(null===callback){this.route(a[0],a[1],(a[2]||null),(a[3]||null));}else{this.route(a,callback,args,name,multiple);}}}}catch($__9){$__7=true;$__8=$__9;}finally{try{if(!$__6&&$__3.return!=null){$__3.return();}}finally{if($__7){throw $__8;}}}
$ctx.state=5;break;case 5:$ctx.returnValue=this;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.state=(!('module_name'in args))?7:11;break;case 7:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(9),$ctx.errback);return;case 9:modReg=$ctx.value;$ctx.state=8;break;case 8:args['module_name']=modReg.currentModuleName();$ctx.state=11;break;case 11:$__10=this.logger;$ctx.state=17;break;case 17:Promise.resolve($__10).then($ctx.createCallback(15),$ctx.errback);return;case 15:$__11=$ctx.value;$ctx.state=14;break;case 14:$__12=$__11.debug;$__13=$__12.call($__11,'ROUTE '+route);$ctx.state=19;break;case 19:Promise.resolve(Class.i('awy_core_util_misc')).then($ctx.createCallback(22),$ctx.errback);return;case 22:util=$ctx.value;$ctx.state=21;break;case 21:if(!util.contains(this.routes,route)){this.routes.push({re:route,handler:callback});}
$ctx.state=29;break;case 29:$ctx.returnValue=this;$ctx.state=24;break;case 24:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{getInstance:function(){return instance||(instance=new Awy_Core_Model_Router(singletonEnforcer));}},$__super]);},this,arguments);})(Class);Object.defineProperty(Awy_Core_Model_Router,"parameters",{get:function(){return[[Object]];}});$__export('default',Awy_Core_Model_Router);}};});
System.register("/app/awy/core/model/view.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/model/view.js";var Awy_Core_Model_View;return{setters:[],execute:function(){Awy_Core_Model_View=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__38,$__50;function Awy_Core_Model_View(params){$traceurRuntime.superConstructor(Awy_Core_Model_View).call(this);this._params=params||{};this.logger=Class.i('awy_core_model_logger','View');this.binders={checked:function(node,propertyName,object){node.addEventListener('change',function(){object.set(propertyName,node.checked);});return{updateProperty:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var checked;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:checked=object.get(propertyName);if(checked!==node.checked){node.checked=checked;}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),observer:function(changes){var change;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(changes)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){change=$__5.value;{console.log(change);if(change.name===propertyName){console.log(change);if(change.object[change.name]!==node.checked){node.checked=change.object[change.name];}}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}}};},value:function(node,propertyName,object){node.addEventListener('change',function(){object.set(propertyName,node.value);});return{updateProperty:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var value;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:value=object.get(propertyName);if(value!==node.value){node.value=value;}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),observer:function(changes){var change;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(changes)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){change=$__5.value;{if(change.name===propertyName){if(change.object[change.name]!==node.value){node.value=change.object[change.name];}}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}}};},text:function(node,propertyName,object){return{updateProperty:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var value;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:value=object.get(propertyName);if(value!==node.innerHTML){node.innerHTML=value;}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),observer:function(changes){var change;var $__7=true;var $__8=false;var $__9=undefined;try{for(var $__5=void 0,$__4=(changes)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){change=$__5.value;{if(change.name===propertyName){if(change.object[change.name]!==node.innerHTML){node.innerHTML=change.object[change.name];}}}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}}};},click:function(node,propertyName,object){var previous;return{updateProperty:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var fn,listener;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:fn=object[propertyName];node.href="javascript:void(0)";listener=$traceurRuntime.initTailRecursiveFunction(function(e){return $traceurRuntime.call(function(e){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(object[propertyName]()).then($ctx.createCallback(2),$ctx.errback);return;case 2:e.preventDefault();$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);});if(previous){node.removeEventListener(previous);previous=listener;}
node.addEventListener('click',listener);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),observer:function(changes){return false;}};}};}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Model_View,{onlyDirectNested:$traceurRuntime.initTailRecursiveFunction(function(container,selector){return $traceurRuntime.call(function(container,selector){var collection=container.querySelectorAll(selector);return($__38=Array.prototype.filter,$traceurRuntime.continuation($__38.call,$__38,[collection,this['isDirectNested']]));},this,arguments);}),isDirectNested:function(node){node=node.parentElement;while(node){if(node.dataset.repeat){return false;}
node=node.parentElement;}
return true;},bindModel:$traceurRuntime.initTailRecursiveFunction(function(container){return $traceurRuntime.call(function(container){var bindings,i,$__18,$__19,$__20,$__21;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:bindings=this.onlyDirectNested(container,'[data-bind]');$ctx.state=18;break;case 18:$__18=[];$__19=bindings;for($__20 in $__19)
$__18.push($__20);$ctx.state=13;break;case 13:$__21=0;$ctx.state=11;break;case 11:$ctx.state=($__21<$__18.length)?7:9;break;case 2:$__21++;$ctx.state=11;break;case 7:i=$__18[$__21];$ctx.state=8;break;case 8:$ctx.state=(!(i in $__19))?2:5;break;case 5:Promise.resolve(this.bindObject(bindings[i])).then($ctx.createCallback(3),$ctx.errback);return;case 3:bindings[i]=$ctx.value;$ctx.state=2;break;case 9:$ctx.returnValue={unobserve:function(){bindings.forEach(function(binding){binding.unobserve();});}};$ctx.state=15;break;case 15:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),bindObject:$traceurRuntime.initTailRecursiveFunction(function(node){return $traceurRuntime.call(function(node){var object,parts,propertyName,binderName,binder;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:object=this;parts=node.dataset.bind.split(' ');propertyName=parts[1];binderName=parts[0];binder=this.binders[binderName](node,propertyName,this);binder.updateProperty();Object.observe(this._params.args,binder['observer']);$ctx.state=5;break;case 5:$ctx.returnValue={unobserve:function(){Object.unobserve(object._params.args,binder['observer']);}};$ctx.state=2;break;case 2:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),showStructure:function(){alert(JSON.stringify(this,null,4));},href:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var url,app;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:url=$arguments[0]!==(void 0)?$arguments[0]:'';$ctx.state=8;break;case 8:Promise.resolve(Class.i('awy_core_model_app')).then($ctx.createCallback(3),$ctx.errback);return;case 3:app=$ctx.value;$ctx.state=2;break;case 2:$ctx.returnValue=app.href(url);$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),factory:$traceurRuntime.initTailRecursiveFunction(function(viewName){return $traceurRuntime.call(function(viewName){var params,className,view;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:params=$arguments[1]!==(void 0)?$arguments[1]:{};params['view_name']=viewName;className=params.view_class||this._origClass.toLowerCase();$ctx.state=8;break;case 8:Promise.resolve(ClassRegistry.getInstance(className,false,params)).then($ctx.createCallback(3),$ctx.errback);return;case 3:view=$ctx.value;$ctx.state=2;break;case 2:$ctx.returnValue=view;$ctx.state=5;break;case 5:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),setParam:function(key){var value=arguments[1]!==(void 0)?arguments[1]:null;if((typeof key==='undefined'?'undefined':$traceurRuntime.typeof(key))==='object'){for(k in key){this.setParam(k,key[k]);}
return this;}
this._params[key]=value;return this;},set:function(name){var value=arguments[1]!==(void 0)?arguments[1]:null;if(!('args'in this._params)){this._params['args']={};}
if((typeof name==='undefined'?'undefined':$traceurRuntime.typeof(name))==='object'){var k;for(k in name){this._params['args'][k]=name[k];}
return this;}
this._params['args'][name]=value;return this;},get:function(name){if(!('args'in this._params)){return null;}
return this._params['args'][name]||null;},__toString:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var result,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:result='';$ctx.state=17;break;case 17:$ctx.pushTry(4,null);$ctx.state=7;break;case 7:Promise.resolve(this.render()).then($ctx.createCallback(3),$ctx.errback);return;case 3:result=$ctx.value;$ctx.state=2;break;case 2:$ctx.popTry();$ctx.state=9;break;case 4:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=10;break;case 10:result=e;$ctx.state=9;break;case 9:$ctx.returnValue=result;$ctx.state=14;break;case 14:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),_render:$traceurRuntime.initTailRecursiveFunction(function(params){return $traceurRuntime.call(function(params){var parent,t,doc,bnd,collection,node,$__7,$__8,$__9,$__5,$__4,collectionRender,nodeRender,$__14,$__15,$__16,$__12,$__11,$__10,$__17;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('VIEW OBJECT');console.log(this);if('parent'in params){parent=params.parent;}else{parent=this.get('parent');}
console.log(parent);$ctx.state=51;break;case 51:Promise.resolve(this.getTemplateFileName()).then($ctx.createCallback(3),$ctx.errback);return;case 3:t=$ctx.value;$ctx.state=2;break;case 2:doc=this.fragmentFromString(t);$ctx.state=53;break;case 53:Promise.resolve(this.bindModel(doc)).then($ctx.createCallback(6),$ctx.errback);return;case 6:bnd=$ctx.value;$ctx.state=5;break;case 5:collection=Array.from(doc.querySelectorAll('[data-hook]'));$__7=true;$__8=false;$__9=undefined;$ctx.state=55;break;case 55:$ctx.pushTry(14,15);$ctx.state=17;break;case 17:$__5=void 0,$__4=(collection)[Symbol.iterator]();$ctx.state=13;break;case 13:$ctx.state=(!($__7=($__5=$__4.next()).done))?9:11;break;case 8:$__7=true;$ctx.state=13;break;case 9:node=$__5.value;$ctx.state=10;break;case 10:Promise.resolve(this.hook(node.dataset.hook,{parent:node})).then($ctx.createCallback(8),$ctx.errback);return;case 11:$ctx.popTry();$ctx.state=15;$ctx.finallyFallThrough=19;break;case 14:$ctx.popTry();$ctx.maybeUncatchable();$__10=$ctx.storedException;$ctx.state=20;break;case 20:$__8=true;$__9=$__10;$ctx.state=15;$ctx.finallyFallThrough=19;break;case 15:$ctx.popTry();$ctx.state=26;break;case 26:try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}
$ctx.state=24;break;case 19:collectionRender=Array.from(doc.querySelectorAll('[data-render]'));$__14=true;$__15=false;$__16=undefined;$ctx.state=57;break;case 57:$ctx.pushTry(34,35);$ctx.state=37;break;case 37:$__12=void 0,$__11=(collectionRender)[Symbol.iterator]();$ctx.state=33;break;case 33:$ctx.state=(!($__14=($__12=$__11.next()).done))?29:31;break;case 28:$__14=true;$ctx.state=33;break;case 29:nodeRender=$__12.value;$ctx.state=30;break;case 30:Promise.resolve(this.renderer(nodeRender)).then($ctx.createCallback(28),$ctx.errback);return;case 31:$ctx.popTry();$ctx.state=35;$ctx.finallyFallThrough=39;break;case 34:$ctx.popTry();$ctx.maybeUncatchable();$__17=$ctx.storedException;$ctx.state=40;break;case 40:$__15=true;$__16=$__17;$ctx.state=35;$ctx.finallyFallThrough=39;break;case 35:$ctx.popTry();$ctx.state=46;break;case 46:try{if(!$__14&&$__11.return!=null){$__11.return();}}finally{if($__15){throw $__16;}}
$ctx.state=44;break;case 39:parent.appendChild(doc);$ctx.state=59;break;case 59:$ctx.returnValue=doc;$ctx.state=48;break;case 48:$ctx.state=-2;break;case 24:$ctx.state=$ctx.finallyFallThrough;break;case 44:$ctx.state=$ctx.finallyFallThrough;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),hook:$traceurRuntime.initTailRecursiveFunction(function(hookName){return $traceurRuntime.call(function(hookName){var args,result,eventsInstance,hookRes,doc,$__7,$__8,$__9,$__5,$__4,$__22,$__23,$__24,$__25,$__26,$__27,$__28,$__29;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[1]!==(void 0)?$arguments[1]:{};result='';$ctx.state=25;break;case 25:$__22=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__22).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__23=$ctx.value;$ctx.state=2;break;case 2:$__24=$__23.debug;$__25=$__24.call($__23,"START HOOK: "+hookName);$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(10),$ctx.errback);return;case 10:eventsInstance=$ctx.value;$ctx.state=9;break;case 9:Promise.resolve(eventsInstance.fire('Layout::hook:'+hookName,args)).then($ctx.createCallback(13),$ctx.errback);return;case 13:hookRes=$ctx.value;$ctx.state=12;break;case 12:$__7=true;$__8=false;$__9=undefined;try{for($__5=void 0,$__4=(hookRes)[Symbol.iterator]();!($__7=($__5=$__4.next()).done);$__7=true){doc=$__5.value;{args.parent.appendChild(doc);}}}catch($__10){$__8=true;$__9=$__10;}finally{try{if(!$__7&&$__4.return!=null){$__4.return();}}finally{if($__8){throw $__9;}}}
$ctx.state=27;break;case 27:$__26=this.logger;$ctx.state=18;break;case 18:Promise.resolve($__26).then($ctx.createCallback(16),$ctx.errback);return;case 16:$__27=$ctx.value;$ctx.state=15;break;case 15:$__28=$__27.debug;$__29=$__28.call($__27,"END HOOK: "+hookName);$ctx.state=20;break;case 20:$ctx.returnValue=result;$ctx.state=22;break;case 22:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),renderer:$traceurRuntime.initTailRecursiveFunction(function(node){return $traceurRuntime.call(function(node){var parts,rendererType,propertyValue,parent,renderedCallbackName,html,itemFragment;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:parts=node.dataset.render.split(' ');rendererType=parts[0];propertyValue=this.get(parts[1]);parent=node;if(propertyValue){renderedCallbackName='render_'+rendererType;console.log('RENDER: ',propertyValue,parent);html=this[renderedCallbackName](propertyValue);itemFragment=this.fragmentFromString(html);parent.appendChild(itemFragment);}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),hasObjects:function(node){for(var i in node){if($traceurRuntime.typeof(node[i])==='object'){return true;}}
return false;},isRootTree:$traceurRuntime.initTailRecursiveFunction(function(node){return $traceurRuntime.call(function(node){return $traceurRuntime.continuation(Object.is,Object,[]);},this,arguments);}),getTemplateFileName:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var fileExt,quiet,template,viewName,modName,modReg,$__30,$__31,$__32,$__33;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:fileExt=$arguments[0]!==(void 0)?$arguments[0]:null;quiet=$arguments[1]!==(void 0)?$arguments[1]:false;if(null===fileExt){fileExt=this.param('file_ext');}
template=this.param('template');viewName=this.param('view_name');modName=this.param('module_name');$ctx.state=21;break;case 21:$ctx.state=(!template&&viewName)?1:5;break;case 1:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(3),$ctx.errback);return;case 3:modReg=$ctx.value;$ctx.state=2;break;case 2:template=modReg._modules.get(modName).view_root_dir+'/views/'+viewName;$ctx.state=5;break;case 5:$__30=this.logger;$ctx.state=11;break;case 11:Promise.resolve($__30).then($ctx.createCallback(9),$ctx.errback);return;case 9:$__31=$ctx.value;$ctx.state=8;break;case 8:$__32=$__31.debug;$__33=$__32.call($__31,'TEMPLATE '+template+'.js');$ctx.state=13;break;case 13:Promise.resolve(System.import(template+'.js')).then($ctx.createCallback(16),$ctx.errback);return;case 16:template=$ctx.value;$ctx.state=15;break;case 15:template=template.default;$ctx.state=23;break;case 23:$ctx.returnValue=template;$ctx.state=18;break;case 18:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),fragmentFromString:$traceurRuntime.initTailRecursiveFunction(function(strHTML){return $traceurRuntime.call(function(strHTML){return($__50=document.createRange(),$traceurRuntime.continuation($__50.createContextualFragment,$__50,[strHTML]));},this,arguments);}),render:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var args,retrieveMetaData,viewName,modName,viewContent,$__34,$__35,$__36,$__37;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[0]!==(void 0)?$arguments[0]:{};retrieveMetaData=$arguments[1]!==(void 0)?$arguments[1]:false;viewName=this.param('view_name');modName=this.param('module_name');$ctx.state=19;break;case 19:$__34=this.logger;$ctx.state=5;break;case 5:Promise.resolve($__34).then($ctx.createCallback(3),$ctx.errback);return;case 3:$__35=$ctx.value;$ctx.state=2;break;case 2:$__36=$__35.debug;$__37=$__36.call($__35,'RENDER.VIEW @'+modName+'/'+viewName);$ctx.state=7;break;case 7:$ctx.state=(this.param('raw_text')!==null)?8:10;break;case 8:$ctx.returnValue=this.param('raw_text');$ctx.state=9;break;case 9:$ctx.state=-2;break;case 10:Promise.resolve(this._render(args)).then($ctx.createCallback(14),$ctx.errback);return;case 14:viewContent=$ctx.value;$ctx.state=13;break;case 13:$ctx.returnValue=viewContent;$ctx.state=16;break;case 16:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),param:function(){var key=arguments[0]!==(void 0)?arguments[0]:null;if(null===key){return this._params;}
return this._params[key]||null;}},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Model_View);}};});
System.register("/app/awy/core/util/misc.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/util/misc.js";var Awy_Core_Util_Misc;return{setters:[],execute:function(){Awy_Core_Util_Misc=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_Util_Misc(){$traceurRuntime.superConstructor(Awy_Core_Util_Misc).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Util_Misc,{contains:function(haystack,needle){return!!~haystack.indexOf(needle);},version_compare:function(v1,v2){var operator=arguments[2]!==(void 0)?arguments[2]:false;var compare=0;v1=this.prepVersion(v1);v2=this.prepVersion(v2);var x=Math.max(v1.length,v2.length);for(var i=0;i<x;i++){if(v1[i]==v2[i]){continue;}
v1[i]=this.numVersion(v1[i]);v2[i]=this.numVersion(v2[i]);if(v1[i]<v2[i]){compare=-1;break;}else if(v1[i]>v2[i]){compare=1;break;}}
if(!operator){return compare;}
switch(operator){case'>':case'gt':return(compare>0);case'>=':case'ge':return(compare>=0);case'<=':case'le':return(compare<=0);case'==':case'=':case'eq':return(compare===0);case'<>':case'!=':case'ne':return(compare!==0);case'':case'<':case'lt':return(compare<0);default:return null;}},prepVersion:$traceurRuntime.initTailRecursiveFunction(function(v){return $traceurRuntime.call(function(v){v=(''+v).replace(/[_\-+]/g,'.');v=v.replace(/([^.\d]+)/g,'.$1.').replace(/\.{2,}/g,'.');return(!v.length?[-8]:$traceurRuntime.continuation(v.split,v,['.']));},this,arguments);}),numVersion:$traceurRuntime.initTailRecursiveFunction(function(v){return $traceurRuntime.call(function(v){return!v?0:(isNaN(v)?this.vm(v)||-7:$traceurRuntime.continuation(parseInt,null,[v,10]));},this,arguments);}),vm:function(v){switch(v){case'dev':return-6;break;case'alpha':case'a':return-5;break;case'beta':case'b':return-4;break;case'RC':case'rc':return-3;break;case'#':return-2;break;case'p':case'pl':return 1;break;}}},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Util_Misc);}};});
System.register("/app/awy/core/util/vertex.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/util/vertex.js";var Awy_Core_Util_Vertex;return{setters:[],execute:function(){Awy_Core_Util_Vertex=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){var $__7,$__12;function Awy_Core_Util_Vertex(){$traceurRuntime.superConstructor(Awy_Core_Util_Vertex).call(this);this.regexp=new RegExp();this._prefixes="";this._source="";this._suffixes="";this._modifiers="gm";}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_Util_Vertex,{sanitize:$traceurRuntime.initTailRecursiveFunction(function(value){return $traceurRuntime.call(function(value){if(value.source)
return value.source;if(typeof value==="number")
return value;return $traceurRuntime.continuation(value.replace,value,[/[^\w]/g,function(character){return"\\"+character;}]);},this,arguments);}),add:function(value){this._source+=value||"";this.regexp.compile(this._prefixes+this._source+this._suffixes,this._modifiers);return this;},startOfLine:function(enable){enable=(enable!==false);this._prefixes=enable?"^":"";this.add("");return this;},endOfLine:function(enable){enable=(enable!==false);this._suffixes=enable?"$":"";this.add("");return this;},next:function(value){value=this.sanitize(value);this.add("(?:"+value+")");return this;},find:$traceurRuntime.initTailRecursiveFunction(function(value){return $traceurRuntime.call(function(value){return $traceurRuntime.continuation(this.next,this,[value]);},this,arguments);}),maybe:function(value){value=this.sanitize(value);this.add("(?:"+value+")?");return this;},anything:function(){this.add("(?:.*)");return this;},anythingBut:function(value){value=this.sanitize(value);this.add("(?:[^"+value+"]*)");return this;},something:function(){this.add("(?:.+)");return this;},somethingBut:function(value){value=this.sanitize(value);this.add("(?:[^"+value+"]+)");return this;},replace:$traceurRuntime.initTailRecursiveFunction(function(source,value){return $traceurRuntime.call(function(source,value){source=source.toString();return $traceurRuntime.continuation(source.replace,source,[this.regexp,value]);},this,arguments);}),toString:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return($__7=this.regexp,$traceurRuntime.continuation($__7.toString,$__7,[]));},this,arguments);}),lineBreak:function(){this.add("(?:\\r\\n|\\r|\\n)");return this;},br:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation(this.lineBreak,this,[]);},this,arguments);}),tab:function(){this.add("\\t");return this;},word:function(){this.add("\\w+");return this;},anyOf:function(value){value=this.sanitize(value);this.add("["+value+"]");return this;},any:$traceurRuntime.initTailRecursiveFunction(function(value){return $traceurRuntime.call(function(value){return $traceurRuntime.continuation(this.anyOf,this,[value]);},this,arguments);}),range:function(){for(var rest=[],$__2=0;$__2<arguments.length;$__2++)
rest[$__2]=arguments[$__2];for(var _to=1;_to<rest.length;_to+=2){var from=this.sanitize(rest[_to-1]);var to=this.sanitize(rest[_to]);this.add("["+from+"-"+to+"]");}
return this;},addModifier:function(modifier){if(this._modifiers.indexOf(modifier)==-1){this._modifiers+=modifier;}
this.add("");return this;},removeModifier:function(modifier){this._modifiers=this._modifiers.replace(modifier,"");this.add("");return this;},withAnyCase:function(enable){if(enable!==false)
this.addModifier("i");else
this.removeModifier("i");this.add("");return this;},stopAtFirst:function(enable){if(enable!==false)
this.removeModifier("g");else
this.addModifier("g");this.add("");return this;},searchOneLine:function(enable){if(enable!==false)
this.removeModifier("m");else
this.addModifier("m");this.add("");return this;},repeatPrevious:function(){for(var rest=[],$__3=0;$__3<arguments.length;$__3++)
rest[$__3]=arguments[$__3];var value;if(rest.length<=1){if(/\d+/.exec(rest[0])!==null){value="{"+rest[0]+"}";}}else{var values=[];for(var i=0;i<rest.length;i++){if(/\d+/.exec(rest[i])!==null){values.push(rest[i]);}}
value="{"+values.join(",")+"}";}
this.add(value||"");return this;},multiple:function(value){value=value.source?value.source:this.sanitize(value);if(arguments.length===1){this.add("(?:"+value+")*");}
if(arguments.length>1){this.add("(?:"+value+")");this.add("{"+arguments[1]+"}");}
return this;},or:function(value){this._prefixes+="(?:";this._suffixes=")"+this._suffixes;this.add(")|(?:");if(value)
this.next(value);return this;},beginCapture:function(){this._suffixes+=")";this.add("(",false);return this;},endCapture:function(){this._suffixes=this._suffixes.substring(0,this._suffixes.length-1);this.add(")",true);return this;},toRegExp:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var arr=this.regexp.toString().match(/\/(.*)\/([a-z]+)?/);return $traceurRuntime.continuation($traceurRuntime.construct,RegExp,[arr[1],arr[2]]);},this,arguments);}),test:$traceurRuntime.initTailRecursiveFunction(function(value){return $traceurRuntime.call(function(value){return($__12=this.regexp,$traceurRuntime.continuation($__12.test,$__12,[value]));},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Core_Util_Vertex);}};});
System.register("/app/awy/core/view/base.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/core/view/base.js";var Core_Model_View,Awy_Core_View_Base;return{setters:[function($__m){Core_Model_View=$__m.default;}],execute:function(){Awy_Core_View_Base=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_View_Base(params){$traceurRuntime.superConstructor(Awy_Core_View_Base).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_View_Base,{},{},$__super]);},this,arguments);})(Core_Model_View);$__export('default',Awy_Core_View_Base);}};});
System.register("/app/awy/core/view/head.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/core/view/head.js";var Awy_Core_Model_View,Awy_Core_View_Head;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Core_View_Head=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_View_Head(params){$traceurRuntime.superConstructor(Awy_Core_View_Head).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_View_Head,{css_rule:function(args){var title=args.shift();var selector=args.shift();var rules=args.shift();var index=0;var sheets=Array.from(document.styleSheets);var sheet=sheets.find(function(element,index,array){return element.title==title;});if(!sheet){sheet=this.css_raw([]);}
if("insertRule"in sheet){index=args.shift()||0;sheet.insertRule(selector+"{"+rules+"}",index);}else if("addRule"in sheet){index=args.shift()||-1;sheet.addRule(selector,rules,index);}},addStyle:function(href){var style=document.createElement("link");style.type="text/css";style.rel="stylesheet";style.href=href;document.head.appendChild(style);return style.sheet;},css:$traceurRuntime.initTailRecursiveFunction(function(args){return $traceurRuntime.call(function(args){var modReg,mod,st,$__5,$__6,$__7,$__3,$__2,path,stylePath;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_module_registry')).then($ctx.createCallback(3),$ctx.errback);return;case 3:modReg=$ctx.value;$ctx.state=2;break;case 2:mod=modReg._modules.get(this.param('module_name'));$__5=true;$__6=false;$__7=undefined;try{for($__3=void 0,$__2=(args)[Symbol.iterator]();!($__5=($__3=$__2.next()).done);$__5=true){st=$__3.value;{path=st.split('@');if(path.length==2){mod=modReg._modules.get(path[1]);}
stylePath="/app/"+mod.root_dir+"/"+path[0];this.addStyle(stylePath);}}}catch($__8){$__6=true;$__7=$__8;}finally{try{if(!$__5&&$__2.return!=null){$__2.return();}}finally{if($__6){throw $__7;}}}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),css_raw:function(args){var style=document.createElement("style");var st;var $__5=true;var $__6=false;var $__7=undefined;try{for(var $__3=void 0,$__2=(args)[Symbol.iterator]();!($__5=($__3=$__2.next()).done);$__5=true){st=$__3.value;{var path=st.split('=');if(path.length==2){style.setAttribute(path[0],path[1]);}}}}catch($__8){$__6=true;$__7=$__8;}finally{try{if(!$__5&&$__2.return!=null){$__2.return();}}finally{if($__6){throw $__7;}}}
style.appendChild(document.createTextNode(""));document.head.appendChild(style);return style.sheet;},disable_css_raw:function(args){var title=args.shift();var sheets=Array.from(document.styleSheets);var sheet=sheets.find(function(element,index,array){return element.title==title;});sheet.disabled=true;},enable_css_raw:function(args){var title=args.shift();var sheets=Array.from(document.styleSheets);var sheet=sheets.find(function(element,index,array){return element.title==title;});sheet.disabled=false;}},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Core_View_Head);}};});
System.register("/app/awy/core/view/root.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/core/view/root.js";var Awy_Core_Model_View,Awy_Core_View_Root;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Core_View_Root=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_View_Root(params){$traceurRuntime.superConstructor(Awy_Core_View_Root).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_View_Root,{},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Core_View_Root);}};});
System.register("/app/awy/core/view/text.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/core/view/text.js";var Awy_Core_Model_View,Awy_Core_View_Text;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Core_View_Text=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Core_View_Text(params){$traceurRuntime.superConstructor(Awy_Core_View_Text).call(this);this._params=params;this._parts={};}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Core_View_Text,{addText:function(name,text){var params=arguments[2]!==(void 0)?arguments[2]:{};if('reset'in params){this._parts={};}
this._parts[name]={'text':text};return this;},render:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var args,retrieveMetaData,output,n,$__3,$__4,$__5,$__6;var $arguments=arguments;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:args=$arguments[0]!==(void 0)?$arguments[0]:{};retrieveMetaData=$arguments[1]!==(void 0)?$arguments[1]:false;output='';$ctx.state=17;break;case 17:$__3=[];$__4=this._parts;for($__5 in $__4)
$__3.push($__5);$ctx.state=12;break;case 12:$__6=0;$ctx.state=10;break;case 10:$ctx.state=($__6<$__3.length)?4:8;break;case 7:$__6++;$ctx.state=10;break;case 4:p=$__3[$__6];$ctx.state=5;break;case 5:$ctx.state=(!(p in $__4))?7:2;break;case 2:output+="\n\n"+this._parts[n]['text'];$ctx.state=7;break;case 8:$ctx.returnValue=output;$ctx.state=14;break;case 14:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Core_View_Text);}};});
System.register("/app/awy/core/views/core/errors.js",[],function($__export){"use strict";var __moduleName="/app/awy/core/views/core/errors.js";var str;return{setters:[],execute:function(){str="\n<div class=\"container container-low\"> \n\t<ul>\n\t\t<li data-bind=\"text errors\"></li>\n\t</ul>\n<div>\n";$__export('default',str);}};});
System.register("/app/awy/install/controller.js",["awy/core/controller/abstract.js"],function($__export){"use strict";var __moduleName="/app/awy/install/controller.js";var Awy_Core_Controller_Abstract,Awy_Install_Controller;return{setters:[function($__m){Awy_Core_Controller_Abstract=$__m.default;}],execute:function(){Awy_Install_Controller=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Install_Controller(){$traceurRuntime.superConstructor(Awy_Install_Controller).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Install_Controller,{onBeforeDispatch:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var req,method,layout;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.state=(!$traceurRuntime.superGet(this,Awy_Install_Controller.prototype,"onBeforeDispatch").call(this))?1:3;break;case 1:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_router_request')).then($ctx.createCallback(7),$ctx.errback);return;case 7:req=$ctx.value;$ctx.state=6;break;case 6:method='GET';$ctx.state=23;break;case 23:switch(method){default:$ctx.state=18;break;case'GET':$ctx.state=8;break;case'POST':$ctx.state=18;break;}
break;case 9:Promise.resolve(layout.applyTheme('awy_install')).then($ctx.createCallback(18),$ctx.errback);return;case 10:layout=$ctx.value;$ctx.state=9;break;case 8:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(10),$ctx.errback);return;case 18:console.log('Awy_Install_Controller.onBeforeDispatch');$ctx.state=25;break;case 25:$ctx.returnValue=true;$ctx.state=20;break;case 20:$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),onAfterDispatch:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var $__10,$__11,enevts,$__5,$__6,$__7,$__3,$__2,$__9,key,value;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve($traceurRuntime.superGet(this,Awy_Install_Controller.prototype,"onAfterDispatch").call(this)).then($ctx.createCallback(2),$ctx.errback);return;case 2:Promise.resolve(Class.i('awy_core_model_events')).then($ctx.createCallback(5),$ctx.errback);return;case 5:enevts=$ctx.value;$ctx.state=4;break;case 4:$__5=true;$__6=false;$__7=undefined;try{for($__3=void 0,$__2=(enevts._events)[Symbol.iterator]();!($__5=($__3=$__2.next()).done);$__5=true){$__9=$__3.value,key=($__10=$__9[Symbol.iterator](),($__11=$__10.next()).done?void 0:$__11.value),value=($__11=$__10.next()).done?void 0:$__11.value;{console.log("EVENT: "+key);console.log(value.observers||null);}}}catch($__8){$__6=true;$__7=$__8;}finally{try{if(!$__5&&$__2.return!=null){$__2.return();}}finally{if($__6){throw $__7;}}}
$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_index:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var layout;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Install_Controller.action_index');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(3),$ctx.errback);return;case 3:layout=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(layout.applyLayout('/')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_step1:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var layout;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Install_Controller.action_step1');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(3),$ctx.errback);return;case 3:layout=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(layout.applyLayout('/step1')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_step2:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var layout;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Install_Controller.action_step2');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(3),$ctx.errback);return;case 3:layout=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(layout.applyLayout('/step2')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_step3:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var layout;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('Awy_Install_Controller.action_step3');$ctx.state=7;break;case 7:Promise.resolve(Class.i('awy_core_model_layout')).then($ctx.createCallback(3),$ctx.errback);return;case 3:layout=$ctx.value;$ctx.state=2;break;case 2:Promise.resolve(layout.applyLayout('/step3')).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Controller_Abstract);$__export('default',Awy_Install_Controller);}};});
System.register("/app/awy/install/i18n/en.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/i18n/en.js";var tr;return{setters:[],execute:function(){tr={'test':'best'};$__export('default',tr);}};});
System.register("/app/awy/install/layout.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/layout.js";var layout;return{setters:[],execute:function(){layout={base:[{view:'head',do:[['css','css/normalize.css@awy_core','css/skeleton.css@awy_core'],['css','css/install.css@awy_install']]}],"/":[{include:'base'},{hook:'main',views:'index'}],"/step1":[{include:'base'},{hook:'main',views:'step1'}],"/step2":[{include:'base'},{hook:'main',views:'step2'}],"/step3":[{include:'base'},{hook:'main',views:'step3'}]};$__export('default',layout);}};});
System.register("/app/awy/install/manifest.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/manifest.js";var config;return{setters:[],execute:function(){config={module_name:'awy_install',version:'0.0.0.2',description:"Install sequence extension",require:{module:{awy_core:'0.0.0.1',awy_admin:'0.0.0.1'}},areas:{awy_install:{views:{root:{},index:{view_class:'awy_install_view_index'},step1:{view_class:'awy_install_view_step1'},step2:{view_class:'awy_install_view_step2'},step3:{view_class:'awy_install_view_step3'}}}},routing:[['/','awy_install_controller.index'],['/install','awy_install_controller.index'],['/install/step1','awy_install_controller.step1'],['/install/step2','awy_install_controller.step2'],['/install/step3','awy_install_controller.step3'],['/install/.action','awy_install_controller']],themes:{awy_install:{layout_before:'layout.js'}},observe:[]};$__export('default',config);}};});
System.register("/app/awy/install/migrate.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/migrate.js";var Awy_Install_Migrate;return{setters:[],execute:function(){Awy_Install_Migrate=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Install_Migrate(){$traceurRuntime.superConstructor(Awy_Install_Migrate).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Install_Migrate,{install:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('install install');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),upgrade:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('install upgrade');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),downgrade:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('install downgrade');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);$__export('default',Awy_Install_Migrate);}};});
System.register("/app/awy/install/view/index.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/install/view/index.js";var Awy_Core_Model_View,Install_Index_View;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Install_Index_View=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Install_Index_View(params){$traceurRuntime.superConstructor(Install_Index_View).call(this);this._params=params;this.set('agree',false);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Install_Index_View,{completeStep:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var el,r;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:el=document.querySelector("input[name=agree]");el.parentElement.classList.remove("has-errors");this.set('errors',null);$ctx.state=11;break;case 11:$ctx.state=(!this.get('agree'))?4:3;break;case 4:this.set('errors','<li><i class="fa-li fa fa-close"></i>Please tick the agree to our terms and conditions!</li>');el.parentElement.classList.add("has-errors");$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(9),$ctx.errback);return;case 9:r=$ctx.value;$ctx.state=8;break;case 8:r.navigate('install/step1');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Install_Index_View);}};});
System.register("/app/awy/install/view/step1.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/install/view/step1.js";var Awy_Core_Model_View,Awy_Install_View_Step1;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Install_View_Step1=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Install_View_Step1(params){$traceurRuntime.superConstructor(Awy_Install_View_Step1).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Install_View_Step1,{completeStep:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var keyEl,hostEl,config,migri,r,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:keyEl=document.querySelector("input[name=key]");hostEl=document.querySelector("input[name=host]");keyEl.parentElement.classList.remove("has-errors");hostEl.parentElement.classList.remove("has-errors");this.set('errors',null);$ctx.state=31;break;case 31:$ctx.state=(!this.get('db_url')||!this.get('db_key'))?4:3;break;case 4:this.set('errors','<li><i class="fa-li fa fa-close"></i>Please submit all required fields!</li>');if(!this.get('db_url')){hostEl.parentElement.classList.add("has-errors");}
if(!this.get('db_key')){keyEl.parentElement.classList.add("has-errors");}
$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(9),$ctx.errback);return;case 9:config=$ctx.value;$ctx.state=8;break;case 8:config.add({db:{host:this.get('db_url'),key:this.get('db_key')}},true);config.writeStorage('db');$ctx.state=33;break;case 33:Promise.resolve(Class.i('awy_core_model_migrate')).then($ctx.createCallback(12),$ctx.errback);return;case 12:migri=$ctx.value;$ctx.state=11;break;case 11:$ctx.pushTry(20,null);$ctx.state=23;break;case 23:Promise.resolve(migri.migrateModules(['awy_core','awy_admin'],true)).then($ctx.createCallback(14),$ctx.errback);return;case 14:$ctx.popTry();$ctx.state=25;break;case 20:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=18;break;case 18:this.set('errors','<li><i class="fa-li fa fa-close"></i>'+e+'</li>');$ctx.state=19;break;case 19:$ctx.returnValue=false;$ctx.state=16;break;case 16:$ctx.state=-2;break;case 25:config.saveDbHostConfig();$ctx.state=35;break;case 35:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(29),$ctx.errback);return;case 29:r=$ctx.value;$ctx.state=28;break;case 28:r.navigate('install/step2');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Install_View_Step1);}};});
System.register("/app/awy/install/view/step2.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/install/view/step2.js";var Awy_Core_Model_View,Awy_Install_View_Step2;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Install_View_Step2=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Install_View_Step2(params){$traceurRuntime.superConstructor(Awy_Install_View_Step2).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Install_View_Step2,{completeStep:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var firstnameEl,lastnameEl,emailEl,passwordEl,password_confirmEl,migri,data,admin,r,e;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:firstnameEl=document.querySelector("input[name=firstname]");lastnameEl=document.querySelector("input[name=lastname]");emailEl=document.querySelector("input[name=email]");passwordEl=document.querySelector("input[name=password]");password_confirmEl=document.querySelector("input[name=password_confirm]");firstnameEl.parentElement.classList.remove("has-errors");lastnameEl.parentElement.classList.remove("has-errors");emailEl.parentElement.classList.remove("has-errors");passwordEl.parentElement.classList.remove("has-errors");password_confirmEl.parentElement.classList.remove("has-errors");this.set('errors',null);$ctx.state=51;break;case 51:$ctx.state=(!this.get('firstname')||!this.get('lastname')||!this.get('email')||!this.get('password')||!this.get('password_confirm'))?4:3;break;case 4:this.set('errors','<li><i class="fa-li fa fa-close"></i>Please submit all required fields!</li>');if(!this.get('firstname')){firstnameEl.parentElement.classList.add("has-errors");}
if(!this.get('lastname')){lastnameEl.parentElement.classList.add("has-errors");}
if(!this.get('email')){emailEl.parentElement.classList.add("has-errors");}
if(!this.get('password')){passwordEl.parentElement.classList.add("has-errors");}
if(!this.get('password_confirm')){password_confirmEl.parentElement.classList.add("has-errors");}
$ctx.state=5;break;case 5:$ctx.returnValue=false;$ctx.state=2;break;case 2:$ctx.state=-2;break;case 3:$ctx.state=(this.get('password')!==this.get('password_confirm'))?10:9;break;case 10:this.set('errors','<li><i class="fa-li fa fa-close"></i>Passwords are not identical!</li>');passwordEl.parentElement.classList.add("has-errors");password_confirmEl.parentElement.classList.add("has-errors");$ctx.state=11;break;case 11:$ctx.returnValue=false;$ctx.state=8;break;case 8:$ctx.state=-2;break;case 9:Promise.resolve(Class.i('awy_core_model_migrate')).then($ctx.createCallback(15),$ctx.errback);return;case 15:migri=$ctx.value;$ctx.state=14;break;case 14:$ctx.pushTry(23,null);$ctx.state=26;break;case 26:Promise.resolve(migri.migrateModules(['awy_admin'],true)).then($ctx.createCallback(17),$ctx.errback);return;case 17:$ctx.popTry();$ctx.state=28;break;case 23:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=21;break;case 21:this.set('errors','<li><i class="fa-li fa fa-close"></i>'+e+'</li>');$ctx.state=22;break;case 22:$ctx.returnValue=false;$ctx.state=19;break;case 19:$ctx.state=-2;break;case 28:data={"email":this.get('email'),"password":this.get('password'),"firstname":this.get('firstname'),"lastname":this.get('lastname'),"roles":{"superadmin":true}};$ctx.state=53;break;case 53:$ctx.pushTry(40,null);$ctx.state=43;break;case 43:Promise.resolve(Class.i('awy_admin_model_user')).then($ctx.createCallback(32),$ctx.errback);return;case 32:admin=$ctx.value;$ctx.state=31;break;case 31:Promise.resolve(admin.create(data)).then($ctx.createCallback(34),$ctx.errback);return;case 34:$ctx.popTry();$ctx.state=45;break;case 40:$ctx.popTry();$ctx.maybeUncatchable();e=$ctx.storedException;$ctx.state=38;break;case 38:this.set('errors','<li><i class="fa-li fa fa-close"></i>'+e+'</li>');$ctx.state=39;break;case 39:$ctx.returnValue=false;$ctx.state=36;break;case 36:$ctx.state=-2;break;case 45:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(49),$ctx.errback);return;case 49:r=$ctx.value;$ctx.state=48;break;case 48:r.navigate('install/step3');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Install_View_Step2);}};});
System.register("/app/awy/install/view/step3.js",["awy/core/model/view.js"],function($__export){"use strict";var __moduleName="/app/awy/install/view/step3.js";var Awy_Core_Model_View,Awy_Install_View_Step3;return{setters:[function($__m){Awy_Core_Model_View=$__m.default;}],execute:function(){Awy_Install_View_Step3=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Awy_Install_View_Step3(params){$traceurRuntime.superConstructor(Awy_Install_View_Step3).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Awy_Install_View_Step3,{completeStep:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var config,r;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:Promise.resolve(Class.i('awy_core_model_config')).then($ctx.createCallback(3),$ctx.errback);return;case 3:config=$ctx.value;$ctx.state=2;break;case 2:config.set('install_status','installed',false,true);config.writeStorage('core');$ctx.state=10;break;case 10:Promise.resolve(config.writeCoreConfig()).then($ctx.createCallback(5),$ctx.errback);return;case 5:Promise.resolve(Class.i('awy_core_model_router')).then($ctx.createCallback(8),$ctx.errback);return;case 8:r=$ctx.value;$ctx.state=7;break;case 7:r.redirect('/admin');$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Model_View);$__export('default',Awy_Install_View_Step3);}};});
System.register("/app/awy/install/views/index.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/views/index.js";var str;return{setters:[],execute:function(){str="\n<div class=\"row errors\">\n\t<ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n</div>\n<div class=\"row\">\n\t<h1>Welcome to Distro.</h1>\n</div>\n<div class=\"row license\">\n\t<h3>Open Software License v. 3.0 (OSL-3.0)</h3>\n\t<p>Lorem ipsum dolor sit amet, vim at melius noluisse. Ei alia dicta duo, ad cum zril facete disputando. Vim molestie assentior consequuntur et, te eum ignota cetero, meis simul possit ad sed. Vel ad tota consequat scriptorem.\n\nEi has nostrum mediocrem quaerendum, alia modus constituto ea sed. His eu enim esse volutpat, qui quot errem aeterno ut. Eum ludus homero labores ad. Te viris dolorem mnesarchum vim. Ut viderer inimicus assueverit vix.\n\nVitae senserit qui an, at est ornatus nonumes vivendum. Nam sale maiorum deleniti ex. Has pertinax invenire mandamus ea, cu est nostrud commune. Vidit doctus ad mel, dolore perpetua intellegebat te sea.\n\nLabores voluptatum quo te, mel graecis epicuri scribentur eu. Et vocibus iracundia voluptatibus per. Dolore tamquam id eam. Cu euismod facilis noluisse eum, no eirmod qualisque nam. Mea at modo brute nostrum, nam eu persius tibique. Dolores tincidunt ea vix, copiosae argumentum nam ei.\n\nDico iisque argumentum et mea. Cu nostro euismod docendi his, per vocent docendi te, impedit inermis tacimates cu per. Mei ad fabulas concludaturque, dico probatus in cum, nec no paulo menandri signiferumque. Nec ei ludus dolore melius. Sed ad legere recteque forensibus.</p>\n</div>\n<div class=\"row\">\n\t<div class=\"three columns\">\n\t\t<button class=\"button-primary\" data-bind=\"click completeStep\">Continue</button>\n\t</div>\n\t<div class=\"seven columns\">\n\t\t<label class=\"required u-pull-right\">\n\t\t\t<input data-bind=\"checked agree\" type=\"checkbox\" name=\"agree\" required=\"required\"/> \n\t\t\t<span class=\"label-body\">I agree</span>\n\t\t</label>\n\t</div>\n</div>\n";$__export('default',str);}};});
System.register("/app/awy/install/views/root.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/views/root.js";var str;return{setters:[],execute:function(){str="<div class=\"container\" data-hook=\"main\" />";$__export('default',str);}};});
System.register("/app/awy/install/views/step1.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/views/step1.js";var str;return{setters:[],execute:function(){str="\n    <div class=\"row errors\">\n        <ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n    </div>\n    <div class=\"row\">\n        <h1>Step 1 of 3: Database Connection</h1>\n    </div>\n    <div class=\"row\">\n    \t<div class=\"six columns\">\n            <label class=\"required\" for=\"host\">Firebase DB URL</label>\n    \t\t<input type=\"text\" class=\"required u-full-width\" name=\"host\" data-bind=\"value db_url\" placeholder=\"https://torrid-heat-5927.firebaseio.com\"/>\n    \t</div>\n    </div>\n    <div class=\"row\">\n    \t<div class=\"six columns\">\n            <label class=\"required\" for=\"key\">Secure Key</label>\n    \t\t<input type=\"text\" class=\"required u-full-width\" name=\"key\" data-bind=\"value db_key\" placeholder=\"HkAgAjx75eRzC4sLqzV1HVw4rPmEFqqcTQcUSAt0\"/>\n    \t</div>\n    </div>\n    <div class=\"row\">\n        <div class=\"three columns\">\n            <button type=\"submit\" class=\"button-primary\" data-bind=\"click completeStep\">Continue</button>\n        </div>\n    </div>\n";$__export('default',str);}};});
System.register("/app/awy/install/views/step2.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/views/step2.js";var str;return{setters:[],execute:function(){str="\n    <div class=\"row errors\">\n        <ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n    </div>\n    <div class=\"row\">\n        <h1>Step 2 of 3: First Admin User</h1>\n    </div>\n    <div class=\"row\">\n        <div class=\"six columns\">\n            <label class=\"required\" for=\"firstname\">First Name</label>\n            <input type=\"text\" class=\"required u-full-width\" name=\"firstname\" data-bind=\"value firstname\" placeholder=\"John\"/>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"six columns\">\n            <label class=\"required\" for=\"lastname\">Last Name</label>\n            <input type=\"text\" class=\"required u-full-width\" name=\"lastname\" data-bind=\"value lastname\" placeholder=\"Doe\"/>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"six columns\">\n            <label class=\"required\" for=\"email\">Email</label>\n            <input type=\"text\" class=\"required u-full-width\" name=\"email\" data-bind=\"value email\" placeholder=\"email@domain.tld\"/>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"three columns\">\n            <label class=\"required\" for=\"password\">Password</label>\n            <input type=\"password\" class=\"required u-full-width\" name=\"password\" data-bind=\"value password\" placeholder=\"******\"/>\n        </div>\n        <div class=\"three columns\">\n            <label class=\"required\" for=\"password_confirm\">Confirm Password</label>\n            <input type=\"password\" class=\"required u-full-width\" name=\"password_confirm\" data-bind=\"value password_confirm\"/>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"three columns\">\n            <button type=\"submit\" class=\"button-primary\" data-bind=\"click completeStep\">Continue</button>\n        </div>\n    </div>\n";$__export('default',str);}};});
System.register("/app/awy/install/views/step3.js",[],function($__export){"use strict";var __moduleName="/app/awy/install/views/step3.js";var str;return{setters:[],execute:function(){str="\n\t<div class=\"row errors\">\n        <ul class=\"fa-ul\" data-bind=\"text errors\"></ul>\n    </div>\n\t<div class=\"row\">\n\t    <h1>Step 3 of 3: Initial Configuration</h1>\n\t</div>\n\t<div data-hook=\"after_form_fields\" />\n\t<div class=\"row\">\n        <div class=\"three columns\">\n            <button type=\"submit\" class=\"button-primary\" data-bind=\"click completeStep\">Finish</button>\n        </div>\n    </div>\n";$__export('default',str);}};});
System.register("/app/bootstrap.js",["awy/core/model/aobject.js"],function($__export){"use strict";var __moduleName="/app/bootstrap.js";var Aobject,ObjectRegistry,Bootstrap;return{setters:[function($__m){Aobject=$__m.Aobject;ObjectRegistry=$__m.ObjectRegistry;}],execute:function(){Class=Aobject;ClassRegistry=ObjectRegistry;Bootstrap=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function Bootstrap(){$traceurRuntime.superConstructor(Bootstrap).call(this);this.logger=Class.i('awy_core_model_logger','Bootstrap');}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[Bootstrap,{ready:$traceurRuntime.initTailRecursiveFunction(function(global){return $traceurRuntime.call(function(global){return $traceurRuntime.continuation($traceurRuntime.construct,Promise,[function(resolve,reject){if(global.document.readyState==='complete'){resolve(global.document);}else{global.document.addEventListener('DOMContentLoaded',completed,false);global.addEventListener('load',completed,false);}
function completed(){global.document.removeEventListener('DOMContentLoaded',completed,false);global.removeEventListener('load',completed,false);resolve(global.document);}}]);},this,arguments);}),run:$traceurRuntime.initTailRecursiveFunction(function(area){return $traceurRuntime.call(function(area){var doc,appHost,app,$__2,$__3,$__4,$__5,error;return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:$ctx.pushTry(18,null);$ctx.state=21;break;case 21:Promise.resolve(this.ready(window)).then($ctx.createCallback(3),$ctx.errback);return;case 3:doc=$ctx.value;$ctx.state=2;break;case 2:appHost=doc.querySelectorAll('[distro]');$ctx.state=8;break;case 8:Promise.resolve(Class.i('awy_core_model_app')).then($ctx.createCallback(6),$ctx.errback);return;case 6:app=$ctx.value;$ctx.state=5;break;case 5:app.host=appHost[0];app.run(area);$ctx.state=10;break;case 10:$ctx.popTry();$ctx.state=-2;break;case 18:$ctx.popTry();$ctx.maybeUncatchable();error=$ctx.storedException;$ctx.state=14;break;case 14:$__2=this.logger;$ctx.state=15;break;case 15:Promise.resolve($__2).then($ctx.createCallback(13),$ctx.errback);return;case 13:$__3=$ctx.value;$ctx.state=12;break;case 12:$__4=$__3.error;$__5=$__4.call($__3,error);$ctx.state=-2;break;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Class);;$__export('default',Bootstrap);}};});
System.register("/app/distro/frontend/controller.js",["awy/core/controller/abstract.js"],function($__export){"use strict";var __moduleName="/app/distro/frontend/controller.js";var Awy_Core_Controller_Abstract,FrontendController;return{setters:[function($__m){Awy_Core_Controller_Abstract=$__m.default;}],execute:function(){FrontendController=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function FrontendController(){$traceurRuntime.superConstructor(FrontendController).call(this);}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[FrontendController,{action_index:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('FrontendController.action_index');$ctx.state=4;break;case 4:Promise.resolve(this.layout("/")).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);}),action_noroute:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){return $traceurRuntime.continuation($traceurRuntime.asyncWrap,$traceurRuntime,[$traceurRuntime.initTailRecursiveFunction(function($ctx){return $traceurRuntime.call(function($ctx){while(true)
switch($ctx.state){case 0:console.log('FrontendController.action_noroute');$ctx.state=4;break;case 4:Promise.resolve(this.layout("404")).then($ctx.createCallback(-2),$ctx.errback);return;default:return $traceurRuntime.continuation($ctx.end,$ctx,[]);}},this,arguments);}),this]);},this,arguments);})},{},$__super]);},this,arguments);})(Awy_Core_Controller_Abstract);$__export('default',FrontendController);}};});
System.register("/app/distro/frontend/layout.js",[],function($__export){"use strict";var __moduleName="/app/distro/frontend/layout.js";var l;return{setters:[],execute:function(){l={base:[{view:'head',do:[['css','css/normalize.css@awy_core','css/skeleton.css@awy_core'],['css','css/bootstrap.css@distro_frontend']]},{hook:'before_body_end',views:'bottom_scripts'},{hook:'header',views:'header'},{hook:'footer',views:'footer'}],"/":[{include:'base'},{hook:'main',views:'index'}],"404":[{include:'base'},{hook:'main',views:'404'}]};$__export('default',l);}};});
System.register("/app/distro/frontend/manifest.js",[],function($__export){"use strict";var __moduleName="/app/distro/frontend/manifest.js";var c;return{setters:[],execute:function(){c={module_name:'distro_frontend',version:'0.0.0.1',description:"Base Frontend functionality",require:{module:{awy_core:'0.0.0.1'}},areas:{distro_frontend:{views:{"root":{view_class:'distro_frontend_view_root'},"index":{},"header":{},"footer":{}},routing:[['/','distro_frontend_controller.index']],auto_use:['bootstrap']}},themes:{distro_frontend_defaultTheme:{name:'Default Frontend Theme',layout_before:'layout.js',area:'distro_frontend'}},default_config:{modules:{distro_frontend:{theme:'distro_frontend_defaultTheme',default_locale:'en_US'}}}};$__export('default',c);}};});
System.register("/app/distro/frontend/view/root.js",["awy/core/view/root.js"],function($__export){"use strict";var __moduleName="/app/distro/frontend/view/root.js";var CoreRootView,RootView;return{setters:[function($__m){CoreRootView=$__m.default;}],execute:function(){RootView=$traceurRuntime.initTailRecursiveFunction(function($__super){return $traceurRuntime.call(function($__super){function RootView(params){$traceurRuntime.superConstructor(RootView).call(this);this._params=params;}
return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[RootView,{},{},$__super]);},this,arguments);})(CoreRootView);$__export('default',RootView);}};});
System.register("/app/distro/frontend/views/footer.js",[],function($__export){"use strict";var __moduleName="/app/distro/frontend/views/footer.js";var str;return{setters:[],execute:function(){str="\n<div class=\"row\">\n\t<div class=\"centered\"><i>&copy; 2016 <a target=\"_blank\" href=\"http://www.vuleticd.com\">Vuletic Dragan</a> All rights reserved.</i></div>\n</div>\n";$__export('default',str);}};});
System.register("/app/distro/frontend/views/header.js",[],function($__export){"use strict";var __moduleName="/app/distro/frontend/views/header.js";var str;return{setters:[],execute:function(){str="\n<div class=\"row\">\n\t<h1>Header.</h1>\n</div>\n";$__export('default',str);}};});
System.register("/app/distro/frontend/views/index.js",[],function($__export){"use strict";var __moduleName="/app/distro/frontend/views/index.js";var str;return{setters:[],execute:function(){str="\n<div class=\"row\">\n\t<h1>Distro Homepage.</h1>\n</div>\n";$__export('default',str);}};});
System.register("/app/distro/frontend/views/root.js",[],function($__export){"use strict";var __moduleName="/app/distro/frontend/views/root.js";var str;return{setters:[],execute:function(){str="\n<div class=\"body_start\" data-hook=\"body_start\"></div>\n<div class=\"header\" data-hook=\"header\"></div>\n<div class=\"after_header\" data-hook=\"after_header\"></div>\n<div class=\"site-main\" role=\"main\">\n\t<div class=\"container\">\n\t\t<div class=\"before_main\" data-hook=\"before_main\"></div>\n\t\t<div class=\"main\" data-hook=\"main\"></div>\n\t\t<div class=\"after_main\" data-hook=\"after_main\"></div>\n\t</div>\n</div>\n<div class=\"before_footer\" data-hook=\"before_footer\"></div>\n<div class=\"footer\" data-hook=\"footer\"></div>\n<div class=\"before_body_end\" data-hook=\"before_body_end\"></div>\n";$__export('default',str);}};});
System.register("/app/modules.js",[],function($__export){"use strict";var __moduleName="/app/modules.js";var modulesEnabled;return{setters:[],execute:function(){modulesEnabled={awy_core:{enabled:true},awy_install:{enabled:true},awy_admin:{enabled:true},distro_frontend:{enabled:true}};$__export('default',modulesEnabled);}};});